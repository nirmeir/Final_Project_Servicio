"use strict";(self.webpackChunkRestaurantApp=self.webpackChunkRestaurantApp||[]).push([[179],{2011:(ft,ke,L)=>{L.d(ke,{Dh:()=>he,GT:()=>ye,cc:()=>Pe,hO:()=>We,on:()=>q,pX:()=>le,xv:()=>we});var d=L(4650),j=L(127),N=L(5813);ft=L.hmd(ft);const ae=["ngOnDestroy"],le=(_e,Qe,Ze,Fe={})=>new Proxy(_e,{get:(xe,De)=>Ze.runOutsideAngular(()=>{var Ke;if(_e[De])return!(null===(Ke=Fe?.spy)||void 0===Ke)&&Ke.get&&Fe.spy.get(De,_e[De]),_e[De];if(ae.indexOf(De)>-1)return()=>{};const ie=Qe.toPromise().then(me=>{const Ce=me&&me[De];return"function"==typeof Ce?Ce.bind(me):Ce&&Ce.then?Ce.then(X=>Ze.run(()=>X)):Ze.run(()=>Ce)});return new Proxy(()=>{},{get:(me,Ce)=>ie[Ce],apply:(me,Ce,X)=>ie.then(se=>{var oe;const ve=se&&se(...X);return!(null===(oe=Fe?.spy)||void 0===oe)&&oe.apply&&Fe.spy.apply(De,X,ve),ve})})})}),ye=(_e,Qe)=>{Qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Fe=>{Object.defineProperty(_e.prototype,Fe,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Fe))})})};class fe{constructor(Qe){return Qe}}const he=new d.OlP("angularfire2.app.options"),we=new d.OlP("angularfire2.app.name");function q(_e,Qe,Ze){const xe="object"==typeof Ze&&Ze||{};xe.name=xe.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ke=j.Z.apps.filter(ie=>ie&&ie.name===xe.name)[0]||Qe.runOutsideAngular(()=>j.Z.initializeApp(_e,xe));try{JSON.stringify(_e)!==JSON.stringify(Ke.options)&&W("error",`${Ke.name} Firebase App already initialized with different options${ft.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new fe(Ke)}const W=(_e,...Qe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Qe)},te={provide:fe,useFactory:q,deps:[he,d.R0b,[new d.FiY,we]]};let We=(()=>{class _e{constructor(Ze){j.Z.registerVersion("angularfire",N.q4.full,"core"),j.Z.registerVersion("angularfire",N.q4.full,"app-compat"),j.Z.registerVersion("angular",d.q4F.full,Ze.toString())}static initializeApp(Ze,Fe){return{ngModule:_e,providers:[{provide:he,useValue:Ze},{provide:we,useValue:Fe}]}}}return _e.\u0275fac=function(Ze){return new(Ze||_e)(d.LFG(d.Lbi))},_e.\u0275mod=d.oAB({type:_e}),_e.\u0275inj=d.cJS({providers:[te]}),_e})();function Pe(_e,Qe,Ze,Fe,xe){const[,De,Ke]=globalThis.\u0275AngularfireInstanceCache.find(ie=>ie[0]===_e)||[];if(De)return function Me(_e,Qe){try{return _e.toString()===Qe.toString()}catch{return _e===Qe}}(xe,Ke)||(ge("error",`${Qe} was already initialized on the ${Ze} Firebase App with different settings.${Ge?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:xe,was:Ke})),De;{const ie=Fe();return globalThis.\u0275AngularfireInstanceCache.push([_e,ie,xe]),ie}}const Ge=!!ft.hot,ge=(_e,...Qe)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...Qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ft,ke,L)=>{L.d(ke,{q4:()=>Ha,iC:()=>An,HU:()=>Zu,vb:()=>zs,JM:()=>H_,u3:()=>Ka});var d=L(4650),j=L(5867),N=L(5861),ae=L(9681),le=L(2090),ye=L(4859),fe=L(1877),he=L(8766);const we="@firebase/installations",q="0.5.12",te=`w:${q}`,We="FIS_v2",Qe=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(D){return D instanceof le.ZR&&D.code.includes("request-failed")}function Fe({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function xe(D){return{token:D.token,requestStatus:2,expiresIn:se(D.expiresIn),creationTime:Date.now()}}function De(D,T){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(D,T){const V=(yield T.json()).error;return Qe.create("request-failed",{requestName:D,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function ie({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function me(D,{refreshToken:T}){const M=ie(D);return M.append("Authorization",function oe(D){return`${We} ${D}`}(T)),M}function Ce(D){return X.apply(this,arguments)}function X(){return(X=(0,N.Z)(function*(D){const T=yield D();return T.status>=500&&T.status<600?D():T})).apply(this,arguments)}function se(D){return Number(D.replace("s","000"))}function ve(D,T){return ce.apply(this,arguments)}function ce(){return(ce=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},{fid:M}){const V=Fe(D),J=ie(D),ue=T.getImmediate({optional:!0});if(ue){const Mt=yield ue.getHeartbeatsHeader();Mt&&J.append("x-firebase-client",Mt)}const ze={method:"POST",headers:J,body:JSON.stringify({fid:M,authVersion:We,appId:D.appId,sdkVersion:te})},yt=yield Ce(()=>fetch(V,ze));if(yt.ok){const Mt=yield yt.json();return{fid:Mt.fid||M,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:xe(Mt.authToken)}}throw yield De("Create Installation",yt)})).apply(this,arguments)}function Ue(D){return new Promise(T=>{setTimeout(T,D)})}const Wt=/^[cdef][\w-]{21}$/;function Ye(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function hn(D){return function pt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Wt.test(M)?M:""}catch{return""}}function jn(D){return`${D.appName}!${D.appId}`}const fn=new Map;function qt(D,T){const M=jn(D);wn(M,T),function Ti(D,T){const M=function Rn(){return!kr&&"BroadcastChannel"in self&&(kr=new BroadcastChannel("[Firebase] FID Change"),kr.onmessage=D=>{wn(D.data.key,D.data.fid)}),kr}();M&&M.postMessage({key:D,fid:T}),function is(){0===fn.size&&kr&&(kr.close(),kr=null)}()}(M,T)}function wn(D,T){const M=fn.get(D);if(M)for(const V of M)V(T)}let kr=null;const $n="firebase-installations-store";let ji=null;function ht(){return ji||(ji=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore($n)}})),ji}function Fr(D,T){return En.apply(this,arguments)}function En(){return(En=(0,N.Z)(function*(D,T){const M=jn(D),J=(yield ht()).transaction($n,"readwrite"),ue=J.objectStore($n),Ne=yield ue.get(M);return yield ue.put(T,M),yield J.done,(!Ne||Ne.fid!==T.fid)&&qt(D,T.fid),T})).apply(this,arguments)}function Xt(D){return ur.apply(this,arguments)}function ur(){return(ur=(0,N.Z)(function*(D){const T=jn(D),V=(yield ht()).transaction($n,"readwrite");yield V.objectStore($n).delete(T),yield V.done})).apply(this,arguments)}function Lr(D,T){return lr.apply(this,arguments)}function lr(){return(lr=(0,N.Z)(function*(D,T){const M=jn(D),J=(yield ht()).transaction($n,"readwrite"),ue=J.objectStore($n),Ne=yield ue.get(M),ze=T(Ne);return void 0===ze?yield ue.delete(M):yield ue.put(ze,M),yield J.done,ze&&(!Ne||Ne.fid!==ze.fid)&&qt(D,ze.fid),ze})).apply(this,arguments)}function In(D){return cr.apply(this,arguments)}function cr(){return(cr=(0,N.Z)(function*(D){let T;const M=yield Lr(D.appConfig,V=>{const J=ss(V),ue=jt(D,J);return T=ue.registrationPromise,ue.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function ss(D){return Vr(D||{fid:Ye(),registrationStatus:0})}function jt(D,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Qe.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function Je(D,T){return ut.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Si(D)}:{installationEntry:T}}function ut(){return(ut=(0,N.Z)(function*(D,T){try{const M=yield ve(D,T);return Fr(D.appConfig,M)}catch(M){throw Ze(M)&&409===M.customData.serverCode?yield Xt(D.appConfig):yield Fr(D.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Si(D){return dr.apply(this,arguments)}function dr(){return(dr=(0,N.Z)(function*(D){let T=yield Tt(D.appConfig);for(;1===T.registrationStatus;)yield Ue(100),T=yield Tt(D.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield In(D);return V||M}return T})).apply(this,arguments)}function Tt(D){return Lr(D,T=>{if(!T)throw Qe.create("installation-not-found");return Vr(T)})}function Vr(D){return function Cn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Dn(D,T){return an.apply(this,arguments)}function an(){return(an=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:T},M){const V=tr(D,M),J=me(D,M),ue=T.getImmediate({optional:!0});if(ue){const Mt=yield ue.getHeartbeatsHeader();Mt&&J.append("x-firebase-client",Mt)}const ze={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:te,appId:D.appId}})},yt=yield Ce(()=>fetch(V,ze));if(yt.ok)return xe(yield yt.json());throw yield De("Generate Auth Token",yt)})).apply(this,arguments)}function tr(D,{fid:T}){return`${Fe(D)}/${T}/authTokens:generate`}function G(D){return z.apply(this,arguments)}function z(){return(z=(0,N.Z)(function*(D,T=!1){let M;const V=yield Lr(D.appConfig,ue=>{if(!_t(ue))throw Qe.create("not-registered");const Ne=ue.authToken;if(!T&&en(Ne))return ue;if(1===Ne.requestStatus)return M=B(D,T),ue;{if(!navigator.onLine)throw Qe.create("app-offline");const ze=hr(ue);return M=Oe(D,ze),ze}});return M?yield M:V.authToken})).apply(this,arguments)}function B(D,T){return Z.apply(this,arguments)}function Z(){return(Z=(0,N.Z)(function*(D,T){let M=yield K(D.appConfig);for(;1===M.authToken.requestStatus;)yield Ue(100),M=yield K(D.appConfig);const V=M.authToken;return 0===V.requestStatus?G(D,T):V})).apply(this,arguments)}function K(D){return Lr(D,T=>{if(!_t(T))throw Qe.create("not-registered");return function ee(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Oe(D,T){return qe.apply(this,arguments)}function qe(){return(qe=(0,N.Z)(function*(D,T){try{const M=yield Dn(D,T),V=Object.assign(Object.assign({},T),{authToken:M});return yield Fr(D.appConfig,V),M}catch(M){if(!Ze(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Fr(D.appConfig,V)}else yield Xt(D.appConfig);throw M}})).apply(this,arguments)}function _t(D){return void 0!==D&&2===D.registrationStatus}function en(D){return 2===D.requestStatus&&!function Kt(D){const T=Date.now();return T<D.creationTime||D.creationTime+D.expiresIn<T+36e5}(D)}function hr(D){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:T})}function H(){return(H=(0,N.Z)(function*(D){const T=D,{installationEntry:M,registrationPromise:V}=yield In(T);return V?V.catch(console.error):G(T).catch(console.error),M.fid})).apply(this,arguments)}function He(){return(He=(0,N.Z)(function*(D,T=!1){const M=D;return yield gt(M),(yield G(M,T)).token})).apply(this,arguments)}function gt(D){return Re.apply(this,arguments)}function Re(){return(Re=(0,N.Z)(function*(D){const{registrationPromise:T}=yield In(D);T&&(yield T)})).apply(this,arguments)}function $i(D){return Qe.create("missing-app-config-values",{valueName:D})}const Pt="installations",ro=D=>{const T=D.getProvider("app").getImmediate(),M=function Fo(D){if(!D||!D.options)throw $i("App Configuration");if(!D.name)throw $i("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!D.options[M])throw $i(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,ae._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},ba=D=>{const T=D.getProvider("app").getImmediate(),M=(0,ae._getProvider)(T,Pt).getImmediate();return{getId:()=>function $(D){return H.apply(this,arguments)}(M),getToken:J=>function Ee(D){return He.apply(this,arguments)}(M,J)}};(function Os(){(0,ae._registerComponent)(new ye.wA(Pt,ro,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("installations-internal",ba,"PRIVATE"))})(),(0,ae.registerVersion)(we,q),(0,ae.registerVersion)(we,q,"esm2017");const pr="@firebase/remote-config",Cr=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ol{constructor(T,M,V,J){this.client=T,this.storage=M,this.storageCache=V,this.logger=J}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,J=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${J}.`),J}fetch(T){var M=this;return(0,N.Z)(function*(){const[V,J]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(J&&M.isCachedDataFresh(T.cacheMaxAgeMillis,V))return J;T.eTag=J&&J.eTag;const ue=yield M.client.fetch(T),Ne=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ue.status&&Ne.push(M.storage.setLastSuccessfulFetchResponse(ue)),yield Promise.all(Ne),ue})()}}function Du(D=navigator){return D.languages&&D.languages[0]||D.language}class Ls{constructor(T,M,V,J,ue,Ne){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=V,this.projectId=J,this.apiKey=ue,this.appId=Ne}fetch(T){var M=this;return(0,N.Z)(function*(){var V,J,ue;const[Ne,ze]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},mt={sdk_version:M.sdkVersion,app_instance_id:Ne,app_instance_id_token:ze,app_id:M.appId,language_code:Du()},Wn={method:"POST",headers:St,body:JSON.stringify(mt)},yr=fetch(Mt,Wn),Zs=new Promise((bo,Ks)=>{T.signal.addEventListener(()=>{const Cd=new Error("The operation was aborted.");Cd.name="AbortError",Ks(Cd)})});let ai;try{yield Promise.race([yr,Zs]),ai=yield yr}catch(bo){let Ks="fetch-client-network";throw"AbortError"===(null===(V=bo)||void 0===V?void 0:V.name)&&(Ks="fetch-timeout"),Cr.create(Ks,{originalErrorMessage:null===(J=bo)||void 0===J?void 0:J.message})}let Oi=ai.status;const Ya=ai.headers.get("ETag")||void 0;let Qa,na;if(200===ai.status){let bo;try{bo=yield ai.json()}catch(Ks){throw Cr.create("fetch-client-parse",{originalErrorMessage:null===(ue=Ks)||void 0===ue?void 0:ue.message})}Qa=bo.entries,na=bo.state}if("INSTANCE_STATE_UNSPECIFIED"===na?Oi=500:"NO_CHANGE"===na?Oi=304:("NO_TEMPLATE"===na||"EMPTY_CONFIG"===na)&&(Qa={}),304!==Oi&&200!==Oi)throw Cr.create("fetch-status",{httpStatus:Oi});return{status:Oi,eTag:Ya,config:Qa}})()}}class os{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,N.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:V}){var J=this;return(0,N.Z)(function*(){yield function Lh(D,T){return new Promise((M,V)=>{const J=Math.max(T-Date.now(),0),ue=setTimeout(M,J);D.addEventListener(()=>{clearTimeout(ue),V(Cr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const ue=yield J.client.fetch(T);return yield J.storage.deleteThrottleMetadata(),ue}catch(ue){if(!function Gi(D){if(!(D instanceof le.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ue))throw ue;const Ne={throttleEndTimeMillis:Date.now()+(0,le.$s)(V),backoffCount:V+1};return yield J.storage.setThrottleMetadata(Ne),J.attemptFetch(T,Ne)}})()}}class tg{constructor(T,M,V,J,ue){this.app=T,this._client=M,this._storageCache=V,this._storage=J,this._logger=ue,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Aa(D,T){var M;const V=D.target.error||void 0;return Cr.create(T,{originalErrorMessage:V&&(null===(M=V)||void 0===M?void 0:M.message)})}const Vo="app_namespace_store";class nd{constructor(T,M,V,J=function rg(){return new Promise((D,T)=>{var M;try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=J=>{T(Aa(J,"storage-open"))},V.onsuccess=J=>{D(J.target.result)},V.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Vo,{keyPath:"compositeKey"})}}catch(V){T(Cr.create("storage-open",{originalErrorMessage:null===(M=V)||void 0===M?void 0:M.message}))}})}()){this.appId=T,this.appName=M,this.namespace=V,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,N.Z)(function*(){const V=yield M.openDbPromise;return new Promise((J,ue)=>{var Ne;const yt=V.transaction([Vo],"readonly").objectStore(Vo),Mt=M.createCompositeKey(T);try{const St=yt.get(Mt);St.onerror=mt=>{ue(Aa(mt,"storage-get"))},St.onsuccess=mt=>{const Wn=mt.target.result;J(Wn?Wn.value:void 0)}}catch(St){ue(Cr.create("storage-get",{originalErrorMessage:null===(Ne=St)||void 0===Ne?void 0:Ne.message}))}})})()}set(T,M){var V=this;return(0,N.Z)(function*(){const J=yield V.openDbPromise;return new Promise((ue,Ne)=>{var ze;const Mt=J.transaction([Vo],"readwrite").objectStore(Vo),St=V.createCompositeKey(T);try{const mt=Mt.put({compositeKey:St,value:M});mt.onerror=Wn=>{Ne(Aa(Wn,"storage-set"))},mt.onsuccess=()=>{ue()}}catch(mt){Ne(Cr.create("storage-set",{originalErrorMessage:null===(ze=mt)||void 0===ze?void 0:ze.message}))}})})()}delete(T){var M=this;return(0,N.Z)(function*(){const V=yield M.openDbPromise;return new Promise((J,ue)=>{var Ne;const yt=V.transaction([Vo],"readwrite").objectStore(Vo),Mt=M.createCompositeKey(T);try{const St=yt.delete(Mt);St.onerror=mt=>{ue(Aa(mt,"storage-delete"))},St.onsuccess=()=>{J()}}catch(St){ue(Cr.create("storage-delete",{originalErrorMessage:null===(Ne=St)||void 0===Ne?void 0:Ne.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Vs{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,N.Z)(function*(){const M=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),J=T.storage.getActiveConfig(),ue=yield M;ue&&(T.lastFetchStatus=ue);const Ne=yield V;Ne&&(T.lastSuccessfulFetchTimestampMillis=Ne);const ze=yield J;ze&&(T.activeConfig=ze)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function j_(){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,N.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}!function kl(){(0,ae._registerComponent)(new ye.wA("remote-config",function D(T,{instanceIdentifier:M}){const V=T.getProvider("app").getImmediate(),J=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Cr.create("registration-window");if(!(0,le.hl)())throw Cr.create("indexed-db-unavailable");const{projectId:ue,apiKey:Ne,appId:ze}=V.options;if(!ue)throw Cr.create("registration-project-id");if(!Ne)throw Cr.create("registration-api-key");if(!ze)throw Cr.create("registration-app-id");const yt=new nd(ze,V.name,M=M||"firebase"),Mt=new Vs(yt),St=new fe.Yd(pr);St.logLevel=fe.in.ERROR;const mt=new Ls(J,ae.SDK_VERSION,M,ue,Ne,ze),Wn=new os(mt,yt),yr=new Ol(Wn,yt,Mt,St),Zs=new tg(V,yr,Mt,yt,St);return function Nl(D){const T=(0,le.m9)(D);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Zs),Zs},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(pr,"0.3.11"),(0,ae.registerVersion)(pr,"0.3.11","esm2017")}();const as="/firebase-messaging-sw.js",us="/firebase-cloud-messaging-push-scope",ao="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rd="google.c.a.c_id",bu="google.c.a.c_l",Tu="google.c.a.ts",Bo="google.c.a.e";var ls=(()=>{return(D=ls||(ls={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ls;var D})();function Hn(D){const T=new Uint8Array(D);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Au(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),J=new Uint8Array(V.length);for(let ue=0;ue<V.length;++ue)J[ue]=V.charCodeAt(ue);return J}const Sa="fcm_token_details_db",id="fcm_token_object_Store";function Bh(D){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ue=>ue.name).includes(Sa))return null;let T=null;return(yield(0,he.X3)(Sa,5,{upgrade:(V=(0,N.Z)(function*(J,ue,Ne,ze){var yt;if(ue<2||!J.objectStoreNames.contains(id))return;const Mt=ze.objectStore(id),St=yield Mt.index("fcmSenderId").get(D);if(yield Mt.clear(),St)if(2===ue){const mt=St;if(!mt.auth||!mt.p256dh||!mt.endpoint)return;T={token:mt.fcmToken,createTime:null!==(yt=mt.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:mt.auth,p256dh:mt.p256dh,endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:"string"==typeof mt.vapidKey?mt.vapidKey:Hn(mt.vapidKey)}}}else if(3===ue){const mt=St;T={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:Hn(mt.auth),p256dh:Hn(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:Hn(mt.vapidKey)}}}else if(4===ue){const mt=St;T={token:mt.fcmToken,createTime:mt.createTime,subscriptionOptions:{auth:Hn(mt.auth),p256dh:Hn(mt.p256dh),endpoint:mt.endpoint,swScope:mt.swScope,vapidKey:Hn(mt.vapidKey)}}}}),function(ue,Ne,ze,yt){return V.apply(this,arguments)})})).close(),yield(0,he.Lj)(Sa),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),Fl(T)?T:null;var V}),Nn.apply(this,arguments)}function Fl(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:T}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const gr="firebase-messaging-store";let jo=null;function uo(){return jo||(jo=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,T)=>{0===T&&D.createObjectStore(gr)}})),jo}function Us(D){return sr.apply(this,arguments)}function sr(){return(sr=(0,N.Z)(function*(D){const T=cs(D),V=yield(yield uo()).transaction(gr).objectStore(gr).get(T);if(V)return V;{const J=yield Bh(D.appConfig.senderId);if(J)return yield $o(D,J),J}})).apply(this,arguments)}function $o(D,T){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,N.Z)(function*(D,T){const M=cs(D),J=(yield uo()).transaction(gr,"readwrite");return yield J.objectStore(gr).put(T,M),yield J.done,T})).apply(this,arguments)}function lo(D){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,N.Z)(function*(D){const T=cs(D),V=(yield uo()).transaction(gr,"readwrite");yield V.objectStore(gr).delete(T),yield V.done})).apply(this,arguments)}function cs({appConfig:D}){return D.appId}const at=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ll(D,T){return Su.apply(this,arguments)}function Su(){return(Su=(0,N.Z)(function*(D,T){var M;const V=yield Go(D),J=Bt(T),ue={method:"POST",headers:V,body:JSON.stringify(J)};let Ne;try{Ne=yield(yield fetch(xu(D.appConfig),ue)).json()}catch(ze){throw at.create("token-subscribe-failed",{errorInfo:null===(M=ze)||void 0===M?void 0:M.toString()})}if(Ne.error)throw at.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw at.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function sd(D,T){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,N.Z)(function*(D,T){var M;const V=yield Go(D),J=Bt(T.subscriptionOptions),ue={method:"PATCH",headers:V,body:JSON.stringify(J)};let Ne;try{Ne=yield(yield fetch(`${xu(D.appConfig)}/${T.token}`,ue)).json()}catch(ze){throw at.create("token-update-failed",{errorInfo:null===(M=ze)||void 0===M?void 0:M.toString()})}if(Ne.error)throw at.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw at.create("token-update-no-token");return Ne.token})).apply(this,arguments)}function Ra(D,T){return ds.apply(this,arguments)}function ds(){return(ds=(0,N.Z)(function*(D,T){var M;const J={method:"DELETE",headers:yield Go(D)};try{const Ne=yield(yield fetch(`${xu(D.appConfig)}/${T}`,J)).json();if(Ne.error)throw at.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(ue){throw at.create("token-unsubscribe-failed",{errorInfo:null===(M=ue)||void 0===M?void 0:M.toString()})}})).apply(this,arguments)}function xu({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Go(D){return Se.apply(this,arguments)}function Se(){return(Se=(0,N.Z)(function*({appConfig:D,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Bt({p256dh:D,auth:T,endpoint:M,vapidKey:V}){const J={web:{endpoint:M,auth:T,p256dh:D}};return V!==ao&&(J.web.applicationPubKey=V),J}const co=6048e5;function Mu(D){return bn.apply(this,arguments)}function bn(){return(bn=(0,N.Z)(function*(D){const T=yield od(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:T.endpoint,auth:Hn(T.getKey("auth")),p256dh:Hn(T.getKey("p256dh"))},V=yield Us(D.firebaseDependencies);if(V){if(Wo(V.subscriptionOptions,M))return Date.now()>=V.createTime+co?Wi(D,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Ra(D.firebaseDependencies,V.token)}catch(J){console.warn(J)}return Na(D.firebaseDependencies,M)}return Na(D.firebaseDependencies,M)})).apply(this,arguments)}function Ru(D){return hs.apply(this,arguments)}function hs(){return(hs=(0,N.Z)(function*(D){const T=yield Us(D.firebaseDependencies);T&&(yield Ra(D.firebaseDependencies,T.token),yield lo(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Wi(D,T){return ho.apply(this,arguments)}function ho(){return(ho=(0,N.Z)(function*(D,T){try{const M=yield sd(D.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield $o(D.firebaseDependencies,V),M}catch(M){throw yield Ru(D),M}})).apply(this,arguments)}function Na(D,T){return fo.apply(this,arguments)}function fo(){return(fo=(0,N.Z)(function*(D,T){const V={token:yield Ll(D,T),createTime:Date.now(),subscriptionOptions:T};return yield $o(D,V),V.token})).apply(this,arguments)}function od(D,T){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,N.Z)(function*(D,T){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Au(T)})})).apply(this,arguments)}function Wo(D,T){return T.vapidKey===D.vapidKey&&T.endpoint===D.endpoint&&T.auth===D.auth&&T.p256dh===D.p256dh}function Kn(D){const T={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function fs(D,T){if(!T.notification)return;D.notification={};const M=T.notification.title;M&&(D.notification.title=M);const V=T.notification.body;V&&(D.notification.body=V);const J=T.notification.image;J&&(D.notification.image=J)}(T,D),function Ul(D,T){!T.data||(D.data=T.data)}(T,D),function ps(D,T){var M,V,J,ue,Ne;if(!(T.fcmOptions||null!==(M=T.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const ze=null!==(J=null===(V=T.fcmOptions)||void 0===V?void 0:V.link)&&void 0!==J?J:null===(ue=T.notification)||void 0===ue?void 0:ue.click_action;ze&&(D.fcmOptions.link=ze);const yt=null===(Ne=T.fcmOptions)||void 0===Ne?void 0:Ne.analytics_label;yt&&(D.fcmOptions.analyticsLabel=yt)}(T,D),T}function gs(D){return"object"==typeof D&&!!D&&rd in D}function ad(D,T){const M=[];for(let V=0;V<D.length;V++)M.push(D.charAt(V)),V<T.length&&M.push(T.charAt(V));return M.join("")}function Pu(D){return at.create("missing-app-config-values",{valueName:D})}ad("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ad("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bl{constructor(T,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function Nu(D){if(!D||!D.options)throw Pu("App Configuration Object");if(!D.name)throw Pu("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const V of T)if(!M[V])throw Pu(V);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:J,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ou(D){return js.apply(this,arguments)}function js(){return(js=(0,N.Z)(function*(D){var T;try{D.swRegistration=yield navigator.serviceWorker.register(as,{scope:us}),D.swRegistration.update().catch(()=>{})}catch(M){throw at.create("failed-service-worker-registration",{browserErrorMessage:null===(T=M)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function ud(D,T){return po.apply(this,arguments)}function po(){return(po=(0,N.Z)(function*(D,T){if(!T&&!D.swRegistration&&(yield Ou(D)),T||!D.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw at.create("invalid-sw-registration");D.swRegistration=T}})).apply(this,arguments)}function jh(D,T){return $s.apply(this,arguments)}function $s(){return($s=(0,N.Z)(function*(D,T){T?D.vapidKey=T:D.vapidKey||(D.vapidKey=ao)})).apply(this,arguments)}function Pa(){return(Pa=(0,N.Z)(function*(D,T){if(!navigator)throw at.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw at.create("permission-blocked");return yield jh(D,T?.vapidKey),yield ud(D,T?.serviceWorkerRegistration),Mu(D)})).apply(this,arguments)}function ld(D,T,M){return zo.apply(this,arguments)}function zo(){return(zo=(0,N.Z)(function*(D,T,M){const V=cd(T);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[rd],message_name:M[bu],message_time:M[Tu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cd(D){switch(D){case ls.NOTIFICATION_CLICKED:return"notification_open";case ls.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fu(){return(Fu=(0,N.Z)(function*(D,T){const M=T.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===ls.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Kn(M)):D.onMessageHandler.next(Kn(M)));const V=M.data;gs(V)&&"1"===V[Bo]&&(yield ld(D,M.messageType,V))})).apply(this,arguments)}const Oa="@firebase/messaging",Zr=D=>{const T=new Bl(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function ku(D,T){return Fu.apply(this,arguments)}(T,M)),T},Pn=D=>{const T=D.getProvider("messaging").getImmediate();return{getToken:V=>function jl(D,T){return Pa.apply(this,arguments)}(T,V)}};function dd(){return hd.apply(this,arguments)}function hd(){return(hd=(0,N.Z)(function*(){try{yield(0,le.eu)()}catch{return!1}return typeof window<"u"&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function sg(){(0,ae._registerComponent)(new ye.wA("messaging",Zr,"PUBLIC")),(0,ae._registerComponent)(new ye.wA("messaging-internal",Pn,"PRIVATE")),(0,ae.registerVersion)(Oa,"0.9.16"),(0,ae.registerVersion)(Oa,"0.9.16","esm2017")}();const $l="analytics",mo="firebase_id",gd="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ka="https://www.googletagmanager.com/gtag/js",mr=new fe.Yd("@firebase/analytics");function md(D){return Promise.all(D.map(T=>T.catch(M=>M)))}function ag(D,T){const M=document.createElement("script");M.src=`${ka}?l=${D}&id=${T}`,M.async=!0,document.head.appendChild(M)}function Gh(D,T,M,V,J,ue){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,N.Z)(function*(D,T,M,V,J,ue){const Ne=V[J];try{if(Ne)yield T[Ne];else{const yt=(yield md(M)).find(Mt=>Mt.measurementId===J);yt&&(yield T[yt.appId])}}catch(ze){mr.error(ze)}D("config",J,ue)})).apply(this,arguments)}function Uu(D,T,M,V,J){return La.apply(this,arguments)}function La(){return(La=(0,N.Z)(function*(D,T,M,V,J){try{let ue=[];if(J&&J.send_to){let Ne=J.send_to;Array.isArray(Ne)||(Ne=[Ne]);const ze=yield md(M);for(const yt of Ne){const Mt=ze.find(mt=>mt.measurementId===yt),St=Mt&&T[Mt.appId];if(!St){ue=[];break}ue.push(St)}}0===ue.length&&(ue=Object.values(T)),yield Promise.all(ue),D("event",V,J||{})}catch(ue){mr.error(ue)}})).apply(this,arguments)}function zh(){const D=window.document.getElementsByTagName("script");for(const T of Object.values(D))if(T.src&&T.src.includes(ka))return T;return null}const ii=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),qh=new class Gl{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Va(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Tn(D){return un.apply(this,arguments)}function un(){return(un=(0,N.Z)(function*(D){var T;const{appId:M,apiKey:V}=D,J={method:"GET",headers:Va(V)},ue=gd.replace("{app-id}",M),Ne=yield fetch(ue,J);if(200!==Ne.status&&304!==Ne.status){let ze="";try{const yt=yield Ne.json();null!==(T=yt.error)&&void 0!==T&&T.message&&(ze=yt.error.message)}catch{}throw ii.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:ze})}return Ne.json()})).apply(this,arguments)}function zi(D){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,N.Z)(function*(D,T=qh,M){const{appId:V,apiKey:J,measurementId:ue}=D.options;if(!V)throw ii.create("no-app-id");if(!J){if(ue)return{measurementId:ue,appId:V};throw ii.create("no-api-key")}const Ne=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ze=new _s;return setTimeout((0,N.Z)(function*(){ze.abort()}),void 0!==M?M:6e4),qo({appId:V,apiKey:J,measurementId:ue},Ne,ze,T)})).apply(this,arguments)}function qo(D,T,M){return _o.apply(this,arguments)}function _o(){return(_o=(0,N.Z)(function*(D,{throttleEndTimeMillis:T,backoffCount:M},V,J=qh){var ue,Ne;const{appId:ze,measurementId:yt}=D;try{yield Hu(V,T)}catch(Mt){if(yt)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null===(ue=Mt)||void 0===ue?void 0:ue.message}]`),{appId:ze,measurementId:yt};throw Mt}try{const Mt=yield Tn(D);return J.deleteThrottleMetadata(ze),Mt}catch(Mt){const St=Mt;if(!Gu(St)){if(J.deleteThrottleMetadata(ze),yt)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:ze,measurementId:yt};throw Mt}const mt=503===Number(null===(Ne=St?.customData)||void 0===Ne?void 0:Ne.httpStatus)?(0,le.$s)(M,J.intervalMillis,30):(0,le.$s)(M,J.intervalMillis),Wn={throttleEndTimeMillis:Date.now()+mt,backoffCount:M+1};return J.setThrottleMetadata(ze,Wn),mr.debug(`Calling attemptFetch again in ${mt} millis`),qo(D,Wn,V,J)}})).apply(this,arguments)}function Hu(D,T){return new Promise((M,V)=>{const J=Math.max(T-Date.now(),0),ue=setTimeout(M,J);D.addEventListener(()=>{clearTimeout(ue),V(ii.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Gu(D){if(!(D instanceof le.ZR&&D.customData))return!1;const T=Number(D.customData.httpStatus);return 429===T||500===T||503===T||504===T}class _s{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let ys,ws;function dt(){return(dt=(0,N.Z)(function*(D,T,M,V,J){if(J&&J.global)D("event",M,V);else{const ue=yield T;D("event",M,Object.assign(Object.assign({},V),{send_to:ue}))}})).apply(this,arguments)}function Wl(D){ws=D}function zl(D){ys=D}function vd(){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,N.Z)(function*(){var D;if(!(0,le.hl)())return mr.warn(ii.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(T){return mr.warn(ii.create("indexeddb-unavailable",{errorInfo:null===(D=T)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Ba(){return(Ba=(0,N.Z)(function*(D,T,M,V,J,ue,Ne){var ze;const yt=zi(D);yt.then(yr=>{M[yr.measurementId]=yr.appId,D.options.measurementId&&yr.measurementId!==D.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${yr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yr=>mr.error(yr)),T.push(yt);const Mt=vd().then(yr=>{if(yr)return V.getId()}),[St,mt]=yield Promise.all([yt,Mt]);zh()||ag(ue,St.measurementId),ws&&(J("consent","default",ws),Wl(void 0)),J("js",new Date);const Wn=null!==(ze=Ne?.config)&&void 0!==ze?ze:{};return Wn.origin="firebase",Wn.update=!0,null!=mt&&(Wn[mo]=mt),J("config",St.measurementId,Wn),ys&&(J("set",ys),zl(void 0)),St.measurementId})).apply(this,arguments)}class si{constructor(T){this.app=T}_delete(){return delete br[this.app.options.appId],Promise.resolve()}}let br={},Ln=[];const Ni={};let wd,oi,vo="dataLayer",ln=!1;function ql(D,T,M){!function Kh(){const D=[];if((0,le.ru)()&&D.push("This is a browser extension environment."),(0,le.zI)()||D.push("Cookies are not available."),D.length>0){const T=D.map((V,J)=>`(${J+1}) ${V}`).join(" "),M=ii.create("invalid-analytics-context",{errorInfo:T});mr.warn(M.message)}}();const V=D.options.appId;if(!V)throw ii.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ii.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=br[V])throw ii.create("already-exists",{id:V});if(!ln){!function _d(D){let T=[];Array.isArray(window[D])?T=window[D]:window[D]=T}(vo);const{wrappedGtag:ue,gtagCore:Ne}=function Wh(D,T,M,V,J){let ue=function(...Ne){window[V].push(arguments)};return window[J]&&"function"==typeof window[J]&&(ue=window[J]),window[J]=function Hl(D,T,M,V){function ue(){return(ue=(0,N.Z)(function*(Ne,ze,yt){try{"event"===Ne?yield Uu(D,T,M,ze,yt):"config"===Ne?yield Gh(D,T,M,V,ze,yt):"consent"===Ne?D("consent","update",yt):D("set",ze)}catch(Mt){mr.error(Mt)}})).apply(this,arguments)}return function J(Ne,ze,yt){return ue.apply(this,arguments)}}(ue,D,T,M),{gtagCore:ue,wrappedGtag:window[J]}}(br,Ln,Ni,vo,"gtag");oi=ue,wd=Ne,ln=!0}return br[V]=function Qo(D,T,M,V,J,ue,Ne){return Ba.apply(this,arguments)}(D,Ln,Ni,T,wd,vo,M),new si(D)}function Zl(){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,N.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch{return!1}})).apply(this,arguments)}const $a="@firebase/analytics";!function _i(){(0,ae._registerComponent)(new ye.wA($l,(T,{options:M})=>ql(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ae._registerComponent)(new ye.wA("analytics-internal",function D(T){try{const M=T.getProvider($l).getImmediate();return{logEvent:(V,J,ue)=>function Ws(D,T,M,V){D=(0,le.m9)(D),function Fn(D,T,M,V,J){return dt.apply(this,arguments)}(oi,br[D.app.options.appId],T,M,V).catch(J=>mr.error(J))}(M,V,J,ue)}}catch(M){throw ii.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ae.registerVersion)($a,"0.8.0"),(0,ae.registerVersion)($a,"0.8.0","esm2017")}();var Ql=L(4408),qi=L(7565);const Ed=new class Eo extends qi.v{}(class wo extends Ql.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,M,V):T.flush(this)}});var Xh=L(4986),Gn=L(8306),Pi=L(8505),$r=L(9468),Xl=L(5363);const Ha=new d.GfV("7.4.1"),Xo="__angularfire_symbol__analyticsIsSupportedValue",Io="__angularfire_symbol__analyticsIsSupported",Ga="__angularfire_symbol__remoteConfigIsSupportedValue",ea="__angularfire_symbol__remoteConfigIsSupported",Wa="__angularfire_symbol__messagingIsSupportedValue",za="__angularfire_symbol__messagingIsSupported";function H_(D,T,M){if(T){if(1===T.length)return T[0];const ue=T.filter(Ne=>Ne.app===M);if(1===ue.length)return ue[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[Io]||(globalThis[Io]=Zl().then(D=>globalThis[Xo]=D).catch(()=>globalThis[Xo]=!1)),globalThis[za]||(globalThis[za]=dd().then(D=>globalThis[Wa]=D).catch(()=>globalThis[Wa]=!1)),globalThis[ea]||(globalThis[ea]=j_().then(D=>globalThis[Ga]=D).catch(()=>globalThis[Ga]=!1));const zs=(D,T)=>{const M=T?[T]:(0,j.C6)(),V=[];return M.forEach(J=>{J.container.getProvider(D).instances.forEach(Ne=>{V.includes(Ne)||V.push(Ne)})}),V};function Co(){}class qu{constructor(T,M=Ed){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,V){const J=this.zone;return this.delegate.schedule(function(Ne){J.runGuarded(()=>{T.apply(this,[Ne])})},M,V)}}class tc{constructor(T){this.zone=T,this.task=null}call(T,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Co,{},Co,Co)),M.pipe((0,Pi.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Zu=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new qu(Zone.current)),this.insideAngular=M.run(()=>new qu(Zone.current,Xh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Es(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Id(D){return Es().ngZone.runOutsideAngular(()=>D())}function yi(D){return Es().ngZone.run(()=>D())}function An(D){return Es(),function Do(D){return function(M){return(M=M.lift(new tc(D.ngZone))).pipe((0,$r.R)(D.outsideAngular),(0,Xl.Q)(D.insideAngular))}}(Es())(D)}const qs=(D,T)=>function(){const V=arguments;return T&&setTimeout(()=>{"scheduled"===T.state&&T.invoke()},10),yi(()=>D.apply(void 0,V))},Ka=(D,T)=>function(){let M;const V=arguments;for(let ue=0;ue<arguments.length;ue++)"function"==typeof V[ue]&&(T&&(M||(M=yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Co,{},Co,Co)))),V[ue]=qs(V[ue],M));const J=Id(()=>D.apply(this,V));if(!T){if(J instanceof Gn.y){const ue=Es();return J.pipe((0,$r.R)(ue.outsideAngular),(0,Xl.Q)(ue.insideAngular))}return yi(()=>J)}return J instanceof Gn.y?J.pipe(An):J instanceof Promise?yi(()=>new Promise((ue,Ne)=>J.then(ze=>yi(()=>ue(ze)),ze=>yi(()=>Ne(ze))))):"function"==typeof J&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),J.apply(this,arguments)}:yi(()=>J)}},6457:(ft,ke,L)=>{L.d(ke,{$:()=>xu,A:()=>W,B:()=>Pe,G:()=>ba,H:()=>rr,J:()=>os,L:()=>en,M:()=>Mi,N:()=>Vh,P:()=>Xh,Q:()=>rd,R:()=>_r,T:()=>bu,U:()=>ao,V:()=>ls,W:()=>Hn,X:()=>Bh,Y:()=>Ho,Z:()=>Ll,_:()=>sd,a:()=>$u,a0:()=>Mu,a1:()=>Ru,a2:()=>Wi,a3:()=>Na,a4:()=>od,a5:()=>Wo,a6:()=>fs,a7:()=>Ul,a8:()=>gs,a9:()=>ad,aA:()=>Wn,aB:()=>ze,aC:()=>yi,aD:()=>Id,aE:()=>nr,aI:()=>Va,aL:()=>Bo,aa:()=>Ou,ab:()=>ud,ac:()=>jh,af:()=>ld,ag:()=>cd,ah:()=>ku,ak:()=>gr,al:()=>Lu,an:()=>ka,ao:()=>Fa,ap:()=>cn,aq:()=>Ce,ar:()=>Et,as:()=>gt,at:()=>Ze,au:()=>rf,av:()=>Oi,aw:()=>Fe,ax:()=>ie,ay:()=>se,az:()=>Kt,b:()=>ii,c:()=>ea,d:()=>$_,e:()=>za,f:()=>An,g:()=>M,h:()=>Ka,i:()=>Wu,j:()=>ue,k:()=>yg,l:()=>xr,m:()=>Xa,o:()=>he,r:()=>Ql,s:()=>Jh,u:()=>Ed});var d=L(5861),j=L(2090),N=L(9681),ae=L(655),le=L(1877),ye=L(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Pe=function te(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Me=function We(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ge=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new le.Yd("@firebase/auth");function Qe(w,...g){_e.logLevel<=le.in.ERROR&&_e.error(`Auth (${N.SDK_VERSION}): ${w}`,...g)}function Ze(w,...g){throw Ke(w,...g)}function Fe(w,...g){return Ke(w,...g)}function xe(w,g,_){const I=Object.assign(Object.assign({},Me()),{[g]:_});return new j.LL("auth","Firebase",I).create(g,{appName:w.name})}function De(w,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ze(w,"argument-error"),xe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(w,...g){if("string"!=typeof w){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(_,...I)}return Ge.create(w,...g)}function ie(w,g,..._){if(!w)throw Ke(g,..._)}function me(w){const g="INTERNAL ASSERTION FAILED: "+w;throw Qe(g),new Error(g)}function Ce(w,g){w||me(g)}const X=new Map;function se(w){Ce(w instanceof Function,"Expected a class definition");let g=X.get(w);return g?(Ce(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,X.set(w,g),g)}function ce(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Ue(){return"http:"===pt()||"https:"===pt()}function pt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Ye{constructor(g,_){this.shortDelay=g,this.longDelay=_,Ce(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Wt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ue()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(w,g){Ce(w.emulator,"Emulator should always be set here");const{url:_}=w.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class jn{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const fn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},qt=new Ye(3e4,6e4);function Ut(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Zt(w,g,_,I){return wn.apply(this,arguments)}function wn(){return(wn=(0,d.Z)(function*(w,g,_,I,x={}){return Ti(w,x,(0,d.Z)(function*(){let k={},ne={};I&&("GET"===g?ne=I:k={body:JSON.stringify(I)});const Te=(0,j.xO)(Object.assign({key:w.config.apiKey},ne)).slice(1),nt=yield w._getAdditionalHeaders();return nt["Content-Type"]="application/json",w.languageCode&&(nt["X-Firebase-Locale"]=w.languageCode),jn.fetch()(gi(w,w.config.apiHost,_,Te),Object.assign({method:g,headers:nt,referrerPolicy:"no-referrer"},k))}))})).apply(this,arguments)}function Ti(w,g,_){return kr.apply(this,arguments)}function kr(){return(kr=(0,d.Z)(function*(w,g,_){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},fn),g);try{const x=new Ai(w),k=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const ne=yield k.json();if("needConfirmation"in ne)throw $n(w,"account-exists-with-different-credential",ne);if(k.ok&&!("errorMessage"in ne))return ne;{const Te=k.ok?ne.errorMessage:ne.error.message,[nt,ot]=Te.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===nt)throw $n(w,"credential-already-in-use",ne);if("EMAIL_EXISTS"===nt)throw $n(w,"email-already-in-use",ne);if("USER_DISABLED"===nt)throw $n(w,"user-disabled",ne);const Rt=I[nt]||nt.toLowerCase().replace(/[_\s]+/g,"-");if(ot)throw xe(w,Rt,ot);Ze(w,Rt)}}catch(x){if(x instanceof j.ZR)throw x;Ze(w,"network-request-failed")}})).apply(this,arguments)}function Rn(w,g,_,I){return is.apply(this,arguments)}function is(){return(is=(0,d.Z)(function*(w,g,_,I,x={}){const k=yield Zt(w,g,_,I,x);return"mfaPendingCredential"in k&&Ze(w,"multi-factor-auth-required",{_serverResponse:k}),k})).apply(this,arguments)}function gi(w,g,_,I){const x=`${g}${_}?${I}`;return w.config.emulator?hn(w.config,x):`${w.config.apiScheme}://${x}`}class Ai{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(Fe(this.auth,"network-request-failed")),qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $n(w,g,_){const I={appName:w.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const x=Fe(w,g,I);return x.customData._tokenResponse=_,x}function ht(){return(ht=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Fr(w,g){return En.apply(this,arguments)}function En(){return(En=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Xt(w,g){return ur.apply(this,arguments)}function ur(){return(ur=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Lr(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function cr(){return(cr=(0,d.Z)(function*(w,g=!1){const _=(0,j.m9)(w),I=yield _.getIdToken(g),x=jt(I);ie(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const k="object"==typeof x.firebase?x.firebase:void 0,ne=k?.sign_in_provider;return{claims:x,token:I,authTime:Lr(ss(x.auth_time)),issuedAtTime:Lr(ss(x.iat)),expirationTime:Lr(ss(x.exp)),signInProvider:ne||null,signInSecondFactor:k?.sign_in_second_factor||null}})).apply(this,arguments)}function ss(w){return 1e3*Number(w)}function jt(w){var g;const[_,I,x]=w.split(".");if(void 0===_||void 0===I||void 0===x)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,j.tV)(I);return k?JSON.parse(k):(Qe("Failed to decode base64 JWT payload"),null)}catch(k){return Qe("Caught error parsing JWT payload as JSON",null===(g=k)||void 0===g?void 0:g.toString()),null}}function ut(w,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(w,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof j.ZR&&dr(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function dr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Tt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,d.Z)(function*(){var _;try{yield g.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(_=I)||void 0===_?void 0:_.code)&&g.schedule(!0))}g.schedule()})()}}class Vr{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cn(w){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,d.Z)(function*(w){var g;const _=w.auth,I=yield w.getIdToken(),x=yield ut(w,Xt(_,{idToken:I}));ie(x?.users.length,_,"internal-error");const k=x.users[0];w._notifyReloadListener(k);const ne=null!==(g=k.providerUserInfo)&&void 0!==g&&g.length?z(k.providerUserInfo):[],Te=G(w.providerData,ne),Rt=!!w.isAnonymous&&!(w.email&&k.passwordHash||Te?.length),_n={uid:k.localId,displayName:k.displayName||null,photoURL:k.photoUrl||null,email:k.email||null,emailVerified:k.emailVerified||!1,phoneNumber:k.phoneNumber||null,tenantId:k.tenantId||null,providerData:Te,metadata:new Vr(k.createdAt,k.lastLoginAt),isAnonymous:Rt};Object.assign(w,_n)})).apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(w){const g=(0,j.m9)(w);yield Cn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function G(w,g){return[...w.filter(I=>!g.some(x=>x.providerId===I.providerId)),...g]}function z(w){return w.map(g=>{var{providerId:_}=g,I=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Z(){return(Z=(0,d.Z)(function*(w,g){const _=yield Ti(w,{},(0,d.Z)(function*(){const I=(0,j.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:k}=w.config,ne=gi(w,x,"/v1/token",`key=${k}`),Te=yield w._getAdditionalHeaders();return Te["Content-Type"]="application/x-www-form-urlencoded",jn.fetch()(ne,{method:"POST",headers:Te,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class K{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){ie(g.idToken,"internal-error"),ie(typeof g.idToken<"u","internal-error"),ie(typeof g.refreshToken<"u","internal-error");const _="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function Je(w){const g=jt(w);return ie(g,"internal-error"),ie(typeof g.exp<"u","internal-error"),ie(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,d.Z)(function*(){return ie(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:k,expiresIn:ne}=yield function B(w,g){return Z.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(x,k,Number(ne))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:x,expirationTime:k}=_,ne=new K;return I&&(ie("string"==typeof I,"internal-error",{appName:g}),ne.refreshToken=I),x&&(ie("string"==typeof x,"internal-error",{appName:g}),ne.accessToken=x),k&&(ie("number"==typeof k,"internal-error",{appName:g}),ne.expirationTime=k),ne}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new K,this.toJSON())}_performRefresh(){return me("not implemented")}}function Oe(w,g){ie("string"==typeof w||typeof w>"u","internal-error",{appName:g})}class qe{constructor(g){var{uid:_,auth:I,stsTokenManager:x}=g,k=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Tt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=k.displayName||null,this.email=k.email||null,this.emailVerified=k.emailVerified||!1,this.phoneNumber=k.phoneNumber||null,this.photoURL=k.photoURL||null,this.isAnonymous=k.isAnonymous||!1,this.tenantId=k.tenantId||null,this.providerData=k.providerData?[...k.providerData]:[],this.metadata=new Vr(k.createdAt||void 0,k.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const I=yield ut(_,_.stsTokenManager.getToken(_.auth,g));return ie(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function In(w){return cr.apply(this,arguments)}(this,g)}reload(){return function an(w){return tr.apply(this,arguments)}(this)}_assign(g){this!==g&&(ie(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new qe(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,d.Z)(function*(){let x=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield Cn(I)),yield I.auth._persistUserIfCurrent(I),x&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield ut(g,function ji(w,g){return ht.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,x,k,ne,Te,nt,ot,Rt;const _n=null!==(I=_.displayName)&&void 0!==I?I:void 0,Zi=null!==(x=_.email)&&void 0!==x?x:void 0,To=null!==(k=_.phoneNumber)&&void 0!==k?k:void 0,Yu=null!==(ne=_.photoURL)&&void 0!==ne?ne:void 0,Q_=null!==(Te=_.tenantId)&&void 0!==Te?Te:void 0,af=null!==(nt=_._redirectEventId)&&void 0!==nt?nt:void 0,Td=null!==(ot=_.createdAt)&&void 0!==ot?ot:void 0,Qu=null!==(Rt=_.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:ic,emailVerified:J_,isAnonymous:Ig,providerData:Ad,stsTokenManager:X_}=_;ie(ic&&X_,g,"internal-error");const uf=K.fromJSON(this.name,X_);ie("string"==typeof ic,g,"internal-error"),Oe(_n,g.name),Oe(Zi,g.name),ie("boolean"==typeof J_,g,"internal-error"),ie("boolean"==typeof Ig,g,"internal-error"),Oe(To,g.name),Oe(Yu,g.name),Oe(Q_,g.name),Oe(af,g.name),Oe(Td,g.name),Oe(Qu,g.name);const lf=new qe({uid:ic,auth:g,email:Zi,emailVerified:J_,displayName:_n,isAnonymous:Ig,photoURL:Yu,phoneNumber:To,tenantId:Q_,stsTokenManager:uf,createdAt:Td,lastLoginAt:Qu});return Ad&&Array.isArray(Ad)&&(lf.providerData=Ad.map(Cg=>Object.assign({},Cg))),af&&(lf._redirectEventId=af),lf}static _fromIdTokenResponse(g,_,I=!1){return(0,d.Z)(function*(){const x=new K;x.updateFromServerResponse(_);const k=new qe({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:I});return yield Cn(k),k})()}}const en=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,I){var x=this;return(0,d.Z)(function*(){x.storage[_]=I})()}_get(_){var I=this;return(0,d.Z)(function*(){const x=I.storage[_];return void 0===x?null:x})()}_remove(_){var I=this;return(0,d.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return w.type="NONE",w})();function Kt(w,g,_){return`firebase:${w}:${g}:${_}`}class hr{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:x,name:k}=this.auth;this.fullUserKey=Kt(this.userKey,x.apiKey,k),this.fullPersistenceKey=Kt("persistence",x.apiKey,k),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?qe._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,d.Z)(function*(){if(!_.length)return new hr(se(en),g,I);const x=(yield Promise.all(_.map(function(){var ot=(0,d.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return ot.apply(this,arguments)}}()))).filter(ot=>ot);let k=x[0]||se(en);const ne=Kt(I,g.config.apiKey,g.name);let Te=null;for(const ot of _)try{const Rt=yield ot._get(ne);if(Rt){const _n=qe._fromJSON(g,Rt);ot!==k&&(Te=_n),k=ot;break}}catch{}const nt=x.filter(ot=>ot._shouldAllowMigration);return k._shouldAllowMigration&&nt.length?(k=nt[0],Te&&(yield k._set(ne,Te.toJSON())),yield Promise.all(_.map(function(){var ot=(0,d.Z)(function*(Rt){if(Rt!==k)try{yield Rt._remove(ne)}catch{}});return function(Rt){return ot.apply(this,arguments)}}())),new hr(k,g,I)):new hr(k,g,I)})()}}function ee(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(He(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if($(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(Re(g))return"Blackberry";if(tt(g))return"Webos";if(H(g))return"Safari";if((g.includes("chrome/")||Ee(g))&&!g.includes("edge/"))return"Chrome";if(gt(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function $(w=(0,j.z$)()){return/firefox\//i.test(w)}function H(w=(0,j.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Ee(w=(0,j.z$)()){return/crios\//i.test(w)}function He(w=(0,j.z$)()){return/iemobile/i.test(w)}function gt(w=(0,j.z$)()){return/android/i.test(w)}function Re(w=(0,j.z$)()){return/blackberry/i.test(w)}function tt(w=(0,j.z$)()){return/webos/i.test(w)}function Et(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function cn(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function fr(w=(0,j.z$)()){return Et(w)||gt(w)||tt(w)||Re(w)||/windows phone/i.test(w)||He(w)}function Fo(w,g=[]){let _;switch(w){case"Browser":_=ee((0,j.z$)());break;case"Worker":_=`${ee((0,j.z$)())}-${w}`;break;default:_=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${I}`}class $i{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,_){const I=k=>new Promise((ne,Te)=>{try{ne(g(k))}catch(nt){Te(nt)}});I.onAbort=_,this.queue.push(I);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(g){var _=this;return(0,d.Z)(function*(){var I;if(_.auth.currentUser===g)return;const x=[];try{for(const k of _.queue)yield k(g),k.onAbort&&x.push(k.onAbort)}catch(k){x.reverse();for(const ne of x)try{ne()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=k)||void 0===I?void 0:I.message})}})()}}class Pt{constructor(g,_,I){this.app=g,this.heartbeatServiceProvider=_,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ro(this),this.idTokenSubscription=new ro(this),this.beforeStateQueue=new $i(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=se(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,k;if(!I._deleted&&(I.persistenceManager=yield hr.create(I,g),!I._deleted)){if(null!==(x=I._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(k=I.currentUser)||void 0===k?void 0:k.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_,!0)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var I;const x=yield _.assertedPersistence.getCurrentUser();let k=x,ne=!1;if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Te=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,nt=k?._redirectEventId,ot=yield _.tryRedirectSignIn(g);(!Te||Te===nt)&&ot?.user&&(k=ot.user,ne=!0)}if(!k)return _.directlySetCurrentUser(null);if(!k._redirectEventId){if(ne)try{yield _.beforeStateQueue.runMiddleware(k)}catch(Te){k=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Te))}return k?_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)}return ie(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch{yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){var I;try{yield Cn(g)}catch(x){if("auth/network-request-failed"!==(null===(I=x)||void 0===I?void 0:I.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function Vt(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const I=g?(0,j.m9)(g):null;return I&&ie(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g,_=!1){var I=this;return(0,d.Z)(function*(){if(!I._deleted)return g&&ie(I.tenantId===g.tenantId,I,"tenant-id-mismatch"),_||(yield I.beforeStateQueue.runMiddleware(g)),I.queue((0,d.Z)(function*(){yield I.directlySetCurrentUser(g),I.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(se(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new j.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}beforeAuthStateChanged(g,_){return this.beforeStateQueue.pushCallback(g,_)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,d.Z)(function*(){const x=yield I.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&se(g)||_._popupRedirectResolver;ie(I,_,"argument-error"),_.redirectPersistenceManager=yield hr.create(_,[se(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var I,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,x){if(this._deleted)return()=>{};const k="function"==typeof _?_:_.next.bind(_),ne=this._isInitialized?Promise.resolve():this._initializationPromise;return ie(ne,this,"internal-error"),ne.then(()=>k(this.currentUser)),"function"==typeof _?g.addObserver(_,I,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Fo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,d.Z)(function*(){var _;const I={"X-Client-Version":g.clientVersion};g.app.options.appId&&(I["X-Firebase-gmpid"]=g.app.options.appId);const x=yield null===(_=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(I["X-Firebase-Client"]=x),I})()}}function nr(w){return(0,j.m9)(w)}class ro{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,j.ne)(_=>this.observer=_)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ba(w,g,_){const I=nr(w);ie(I._canInitEmulator,I,"emulator-config-failed"),ie(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const x=!!_?.disableWarnings,k=Os(g),{host:ne,port:Te}=function pr(w){const g=Os(w),_=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(I);if(x){const k=x[1];return{host:k,port:io(I.substr(k.length+1))}}{const[k,ne]=I.split(":");return{host:k,port:io(ne)}}}(g);I.config.emulator={url:`${k}//${ne}${null===Te?"":`:${Te}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:ne,port:Te,protocol:k.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function ks(){function w(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Os(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function io(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class rr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return me("not implemented")}_getIdTokenResponse(g){return me("not implemented")}_linkToIdToken(g,_){return me("not implemented")}_getReauthenticationResolver(g){return me("not implemented")}}function Fs(w,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:resetPassword",Ut(w,g))})).apply(this,arguments)}function pn(w,g){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Fh(w,g){return so.apply(this,arguments)}function so(){return(so=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",Ut(w,g))})).apply(this,arguments)}function Hi(){return(Hi=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithPassword",Ut(w,g))})).apply(this,arguments)}function Lo(w,g){return xi.apply(this,arguments)}function xi(){return(xi=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:sendOobCode",Ut(w,g))})).apply(this,arguments)}function ir(w,g){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,d.Z)(function*(w,g){return Lo(w,g)})).apply(this,arguments)}function Ur(w,g){return Br.apply(this,arguments)}function Br(){return(Br=(0,d.Z)(function*(w,g){return Lo(w,g)})).apply(this,arguments)}function Pl(w,g){return oo.apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(w,g){return Lo(w,g)})).apply(this,arguments)}function Ta(w,g){return mi.apply(this,arguments)}function mi(){return(mi=(0,d.Z)(function*(w,g){return Lo(w,g)})).apply(this,arguments)}function Xp(){return(Xp=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithEmailLink",Ut(w,g))})).apply(this,arguments)}function Ol(){return(Ol=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithEmailLink",Ut(w,g))})).apply(this,arguments)}class Du extends rr{constructor(g,_,I,x=null){super("password",I),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new Du(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new Du(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Iu(w,g){return Hi.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Cu(w,g){return Xp.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ze(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,d.Z)(function*(){switch(I.signInMethod){case"password":return pn(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Xc(w,g){return Ol.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:Ze(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Ls(w,g){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithIdp",Ut(w,g))})).apply(this,arguments)}class os extends rr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new os(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ze("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x}=_,k=(0,ae._T)(_,["providerId","signInMethod"]);if(!I||!x)return null;const ne=new os(I,x);return ne.idToken=k.idToken||void 0,ne.accessToken=k.accessToken||void 0,ne.secret=k.secret,ne.nonce=k.nonce,ne.pendingToken=k.pendingToken||null,ne}_getIdTokenResponse(g){return Ls(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Ls(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ls(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,j.xO)(_)}return g}}function eg(w,g){return ed.apply(this,arguments)}function ed(){return(ed=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:sendVerificationCode",Ut(w,g))})).apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ut(w,g))})).apply(this,arguments)}function td(){return(td=(0,d.Z)(function*(w,g){const _=yield Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ut(w,g));if(_.temporaryProof)throw $n(w,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ng={USER_NOT_FOUND:"user-not-found"};function nd(){return(nd=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithPhoneNumber",Ut(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ng)})).apply(this,arguments)}class Vs extends rr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Vs({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Vs({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function tg(w,g){return Aa.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Vo(w,g){return td.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function rg(w,g){return nd.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:k}=g;return I||_||x||k?new Vs({verificationId:_,verificationCode:I,phoneNumber:x,temporaryProof:k}):null}}class Uo{constructor(g){var _,I,x,k,ne,Te;const nt=(0,j.zd)((0,j.pd)(g)),ot=null!==(_=nt.apiKey)&&void 0!==_?_:null,Rt=null!==(I=nt.oobCode)&&void 0!==I?I:null,_n=function kl(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=nt.mode)&&void 0!==x?x:null);ie(ot&&Rt&&_n,"argument-error"),this.apiKey=ot,this.operation=_n,this.code=Rt,this.continueUrl=null!==(k=nt.continueUrl)&&void 0!==k?k:null,this.languageCode=null!==(ne=nt.languageCode)&&void 0!==ne?ne:null,this.tenantId=null!==(Te=nt.tenantId)&&void 0!==Te?Te:null}static parseLink(g){const _=function B_(w){const g=(0,j.zd)((0,j.pd)(w)).link,_=g?(0,j.zd)((0,j.pd)(g)).deep_link_id:null,I=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(I?(0,j.zd)((0,j.pd)(I)).link:null)||I||_||g||w}(g);try{return new Uo(_)}catch{return null}}}let Mi=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(_,I){return Du._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const x=Uo.parseLink(I);return ie(x,"argument-error"),Du._fromEmailAndCode(_,x.code,x.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class as{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class us extends as{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ao extends us{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return ie("providerId"in _&&"signInMethod"in _,"argument-error"),os._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return ie(g.idToken||g.accessToken,"argument-error"),os._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ao.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ao.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:x,pendingToken:k,nonce:ne,providerId:Te}=g;if(!I&&!x&&!_&&!k||!Te)return null;try{return new ao(Te)._credential({idToken:_,accessToken:I,nonce:ne,pendingToken:k})}catch{return null}}}let Vh=(()=>{class w extends us{constructor(){super("facebook.com")}static credential(_){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),rd=(()=>{class w extends us{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:x}=_;if(!I&&!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),bu=(()=>{class w extends us{constructor(){super("github.com")}static credential(_){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return w.credential(_.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Bo extends rr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Ls(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Ls(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Ls(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:x,pendingToken:k}=_;return I&&x&&k&&I===x?new Bo(I,k):null}static _create(g,_){return new Bo(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ls extends as{constructor(g){ie(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ls.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ls.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Bo.fromJSON(g);return ie(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return Bo._create(I,_)}catch{return null}}}let Hn=(()=>{class w extends us{constructor(){super("twitter.com")}static credential(_,I){return os._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:x}=_;if(!I||!x)return null;try{return w.credential(I,x)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function Au(w,g){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signUp",Ut(w,g))})).apply(this,arguments)}class qr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,x=!1){return(0,d.Z)(function*(){const k=yield qe._fromIdTokenResponse(g,I,x),ne=id(I);return new qr({user:k,providerId:ne,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const x=id(I);return new qr({user:g,providerId:x,_tokenResponse:I,operationType:_})})()}}function id(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Bh(w){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(w){var g;const _=nr(w);if(yield _._initializationPromise,null!==(g=_.currentUser)&&void 0!==g&&g.isAnonymous)return new qr({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield Au(_,{returnSecureToken:!0}),x=yield qr._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Fl extends j.ZR{constructor(g,_,I,x){var k;super(_.code,_.message),this.operationType=I,this.user=x,Object.setPrototypeOf(this,Fl.prototype),this.customData={appName:g.name,tenantId:null!==(k=g.tenantId)&&void 0!==k?k:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,x){return new Fl(g,_,I,x)}}function ig(w,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(w):_._getIdTokenResponse(w)).catch(k=>{throw"auth/multi-factor-auth-required"===k.code?Fl._fromErrorAndOperation(w,k,g,I):k})}function xa(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function gr(w,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(w,g){const _=(0,j.m9)(w);yield sr(!0,_,g);const{providerUserInfo:I}=yield Fr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=xa(I||[]);return _.providerData=_.providerData.filter(k=>x.has(k.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function uo(w,g){return Us.apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(w,g,_=!1){const I=yield ut(w,g._linkToIdToken(w.auth,yield w.getIdToken()),_);return qr._forOperation(w,"link",I)})).apply(this,arguments)}function sr(w,g,_){return $o.apply(this,arguments)}function $o(){return($o=(0,d.Z)(function*(w,g,_){yield Cn(g);const x=!1===w?"provider-already-linked":"no-such-provider";ie(xa(g.providerData).has(_)===w,g.auth,x)})).apply(this,arguments)}function Bs(w,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(w,g,_=!1){var I;const{auth:x}=w,k="reauthenticate";try{const ne=yield ut(w,ig(x,k,g,w),_);ie(ne.idToken,x,"internal-error");const Te=jt(ne.idToken);ie(Te,x,"internal-error");const{sub:nt}=Te;return ie(w.uid===nt,x,"user-mismatch"),qr._forOperation(w,k,ne)}catch(ne){throw"auth/user-not-found"===(null===(I=ne)||void 0===I?void 0:I.code)&&Ze(x,"user-mismatch"),ne}})).apply(this,arguments)}function Ri(w,g){return cs.apply(this,arguments)}function cs(){return(cs=(0,d.Z)(function*(w,g,_=!1){const I="signIn",x=yield ig(w,I,g),k=yield qr._fromIdTokenResponse(w,I,x);return _||(yield w._updateCurrentUser(k.user)),k})).apply(this,arguments)}function Ho(w,g){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(w,g){return Ri(nr(w),g)})).apply(this,arguments)}function Ll(w,g){return Su.apply(this,arguments)}function Su(){return(Su=(0,d.Z)(function*(w,g){const _=(0,j.m9)(w);return yield sr(!1,_,g.providerId),uo(_,g)})).apply(this,arguments)}function sd(w,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(w,g){return Bs((0,j.m9)(w),g)})).apply(this,arguments)}function Ra(w,g){return ds.apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(w,g){return Rn(w,"POST","/v1/accounts:signInWithCustomToken",Ut(w,g))})).apply(this,arguments)}function xu(w,g){return Go.apply(this,arguments)}function Go(){return(Go=(0,d.Z)(function*(w,g){const _=nr(w),I=yield Ra(_,{token:g,returnSecureToken:!0}),x=yield qr._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Se{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?Bt._fromServerResponse(g,_):Ze(g,"internal-error")}}class Bt extends Se{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new Bt(_)}}function co(w,g,_){var I;ie((null===(I=_.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),ie(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ie(_.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(ie(_.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function Mu(w,g,_){return bn.apply(this,arguments)}function bn(){return(bn=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w),x={requestType:"PASSWORD_RESET",email:g};_&&co(I,x,_),yield Ur(I,x)})).apply(this,arguments)}function Ru(w,g,_){return hs.apply(this,arguments)}function hs(){return(hs=(0,d.Z)(function*(w,g,_){yield Fs((0,j.m9)(w),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Wi(w,g){return ho.apply(this,arguments)}function ho(){return(ho=(0,d.Z)(function*(w,g){yield Fh((0,j.m9)(w),{oobCode:g})})).apply(this,arguments)}function Na(w,g){return fo.apply(this,arguments)}function fo(){return(fo=(0,d.Z)(function*(w,g){const _=(0,j.m9)(w),I=yield Fs(_,{oobCode:g}),x=I.requestType;switch(ie(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(I.mfaInfo,_,"internal-error");default:ie(I.email,_,"internal-error")}let k=null;return I.mfaInfo&&(k=Se._fromServerResponse(nr(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:k},operation:x}})).apply(this,arguments)}function od(w,g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,d.Z)(function*(w,g){const{data:_}=yield Na((0,j.m9)(w),g);return _.email})).apply(this,arguments)}function Wo(w,g,_){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,d.Z)(function*(w,g,_){const I=nr(w),x=yield Au(I,{returnSecureToken:!0,email:g,password:_}),k=yield qr._fromIdTokenResponse(I,"signIn",x);return yield I._updateCurrentUser(k.user),k})).apply(this,arguments)}function fs(w,g,_){return Ho((0,j.m9)(w),Mi.credential(g,_))}function Ul(w,g,_){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w),x={requestType:"EMAIL_SIGNIN",email:g};ie(_.handleCodeInApp,I,"argument-error"),_&&co(I,x,_),yield Pl(I,x)})).apply(this,arguments)}function gs(w,g){return"EMAIL_SIGNIN"===Uo.parseLink(g)?.operation}function ad(w,g,_){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w),x=Mi.credentialWithLink(g,_||ce());return ie(x._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Ho(I,x)})).apply(this,arguments)}function Pu(w,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:createAuthUri",Ut(w,g))})).apply(this,arguments)}function Ou(w,g){return js.apply(this,arguments)}function js(){return(js=(0,d.Z)(function*(w,g){const I={identifier:g,continueUri:Ue()?ce():"http://localhost"},{signinMethods:x}=yield Pu((0,j.m9)(w),I);return x||[]})).apply(this,arguments)}function ud(w,g){return po.apply(this,arguments)}function po(){return(po=(0,d.Z)(function*(w,g){const _=(0,j.m9)(w),x={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&co(_.auth,x,g);const{email:k}=yield ir(_.auth,x);k!==w.email&&(yield w.reload())})).apply(this,arguments)}function jh(w,g,_){return $s.apply(this,arguments)}function $s(){return($s=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w),k={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};_&&co(I.auth,k,_);const{email:ne}=yield Ta(I.auth,k);ne!==w.email&&(yield w.reload())})).apply(this,arguments)}function jl(w,g){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,d.Z)(function*(w,g){return Zt(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ld(w,g){return zo.apply(this,arguments)}function zo(){return(zo=(0,d.Z)(function*(w,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,j.m9)(w),k={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},ne=yield ut(I,jl(I.auth,k));I.displayName=ne.displayName||null,I.photoURL=ne.photoUrl||null;const Te=I.providerData.find(({providerId:nt})=>"password"===nt);Te&&(Te.displayName=I.displayName,Te.photoURL=I.photoURL),yield I._updateTokensIfNecessary(ne)})).apply(this,arguments)}function cd(w,g){return Fu((0,j.m9)(w),g,null)}function ku(w,g){return Fu((0,j.m9)(w),null,g)}function Fu(w,g,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(w,g,_){const{auth:I}=w,k={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(k.email=g),_&&(k.password=_);const ne=yield ut(w,pn(I,k));yield w._updateTokensIfNecessary(ne,!0)})).apply(this,arguments)}class Zr{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class Pn extends Zr{constructor(g,_,I,x){super(g,_,I),this.username=x}}class sg extends Zr{constructor(g,_){super(g,"facebook.com",_)}}class dd extends Pn{constructor(g,_){super(g,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class hd extends Zr{constructor(g,_){super(g,"google.com",_)}}class $h extends Pn{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Lu(w){const{user:g,_tokenResponse:_}=w;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Dr(w){var g,_;if(!w)return null;const{providerId:I}=w,x=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},k=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&w?.idToken){const ne=null===(_=null===(g=jt(w.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(ne)return new Zr(k,"anonymous"!==ne&&"custom"!==ne?ne:null)}if(!I)return null;switch(I){case"facebook.com":return new sg(k,x);case"github.com":return new dd(k,x);case"google.com":return new hd(k,x);case"twitter.com":return new $h(k,x,w.screenName||null);case"custom":case"anonymous":return new Zr(k,null);default:return new Zr(k,I,x)}}(_)}class Hs{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Hs("enroll",g)}static _fromMfaPendingCredential(g){return new Hs("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(g?.multiFactorSession){if(null!==(_=g.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Hs._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(I=g.multiFactorSession)&&void 0!==I&&I.idToken)return Hs._fromIdtoken(g.multiFactorSession.idToken)}return null}}class gd{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=nr(g),x=_.customData._serverResponse,k=(x.mfaInfo||[]).map(Te=>Se._fromServerResponse(I,Te));ie(x.mfaPendingCredential,I,"internal-error");const ne=Hs._fromMfaPendingCredential(x.mfaPendingCredential);return new gd(ne,k,function(){var Te=(0,d.Z)(function*(nt){const ot=yield nt._process(I,ne);delete x.mfaInfo,delete x.mfaPendingCredential;const Rt=Object.assign(Object.assign({},x),{idToken:ot.idToken,refreshToken:ot.refreshToken});switch(_.operationType){case"signIn":const _n=yield qr._fromIdTokenResponse(I,_.operationType,Rt);return yield I._updateCurrentUser(_n.user),_n;case"reauthenticate":return ie(_.user,I,"internal-error"),qr._forOperation(_.user,_.operationType,Rt);default:Ze(I,"internal-error")}});return function(nt){return Te.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function ka(w,g){var _;const I=(0,j.m9)(w),x=g;return ie(g.customData.operationType,I,"argument-error"),ie(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),gd._fromError(I,x)}function mr(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:start",Ut(w,g))}class _d{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>Se._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new _d(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Hs._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var I=this;return(0,d.Z)(function*(){const x=g,k=yield I.getSession(),ne=yield ut(I.user,x._process(I.user.auth,k,_));return yield I.user._updateTokensIfNecessary(ne),I.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){var I;const x="string"==typeof g?g:g.uid,k=yield _.user.getIdToken(),ne=yield ut(_.user,function ag(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(w,g))}(_.user.auth,{idToken:k,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Te})=>Te!==x),yield _.user._updateTokensIfNecessary(ne);try{yield _.user.reload()}catch(Te){if("auth/user-token-expired"!==(null===(I=Te)||void 0===I?void 0:I.code))throw Te}})()}}const Gh=new WeakMap;function Fa(w){const g=(0,j.m9)(w);return Gh.has(g)||Gh.set(g,_d._fromUser(g)),Gh.get(g)}const Uu="__sak";class La{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(Uu,"1"),this.storage.removeItem(Uu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const ii=(()=>{class w extends La{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hl(){const w=(0,j.z$)();return H(w)||Et(w)}()&&function mn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const x=this.storage.getItem(I),k=this.localCache[I];x!==k&&_(I,k,x)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Te,nt,ot)=>{this.notifyListeners(Te,ot)});const x=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Te=this.storage.getItem(x);if(_.newValue!==Te)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!I)return}const k=()=>{const Te=this.storage.getItem(x);!I&&this.localCache[x]===Te||this.notifyListeners(x,Te)},ne=this.storage.getItem(x);!function wt(){return(0,j.w1)()&&10===document.documentMode}()||ne===_.newValue||_.newValue===_.oldValue?k():setTimeout(k,10)}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const k of Array.from(x))k(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var x=()=>super._set,k=this;return(0,d.Z)(function*(){yield x().call(k,_,I),k.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,x=this;return(0,d.Z)(function*(){const k=yield I().call(x,_);return x.localCache[_]=JSON.stringify(k),k})()}_remove(_){var I=()=>super._remove,x=this;return(0,d.Z)(function*(){yield I().call(x,_),delete x.localCache[_]})()}}return w.type="LOCAL",w})(),$u=(()=>{class w extends La{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return w.type="SESSION",w})();let qh=(()=>{class w{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(k=>k.isListeningto(_));if(I)return I;const x=new w(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,d.Z)(function*(){const x=_,{eventId:k,eventType:ne,data:Te}=x.data,nt=I.handlersMap[ne];if(!nt?.size)return;x.ports[0].postMessage({status:"ack",eventId:k,eventType:ne});const ot=Array.from(nt).map(function(){var _n=(0,d.Z)(function*(Zi){return Zi(x.origin,Te)});return function(Zi){return _n.apply(this,arguments)}}()),Rt=yield function Gl(w){return Promise.all(w.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(ot);x.ports[0].postMessage({status:"done",eventId:k,eventType:ne,response:Rt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Va(w="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return w+_}class Tn{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var x=this;return(0,d.Z)(function*(){const k=typeof MessageChannel<"u"?new MessageChannel:null;if(!k)throw new Error("connection_unavailable");let ne,Te;return new Promise((nt,ot)=>{const Rt=Va("",20);k.port1.start();const _n=setTimeout(()=>{ot(new Error("unsupported_event"))},I);Te={messageChannel:k,onMessage(Zi){const To=Zi;if(To.data.eventId===Rt)switch(To.data.status){case"ack":clearTimeout(_n),ne=setTimeout(()=>{ot(new Error("timeout"))},3e3);break;case"done":clearTimeout(ne),nt(To.data.response);break;default:clearTimeout(_n),clearTimeout(ne),ot(new Error("invalid_response"))}}},x.handlers.add(Te),k.port1.addEventListener("message",Te.onMessage),x.target.postMessage({eventType:g,eventId:Rt,data:_},[k.port2])}).finally(()=>{Te&&x.removeMessageHandler(Te)})})()}}function un(){return window}function Ua(){return typeof un().WorkerGlobalScope<"u"&&"function"==typeof un().importScripts}function _o(){return(_o=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const _s="firebaseLocalStorageDb",Fn="firebaseLocalStorage",dt="fbase_key";class Zo{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function yo(w,g){return w.transaction([Fn],g?"readwrite":"readonly").objectStore(Fn)}function vs(){const w=indexedDB.open(_s,1);return new Promise((g,_)=>{w.addEventListener("error",()=>{_(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(Fn,{keyPath:dt})}catch(x){_(x)}}),w.addEventListener("success",(0,d.Z)(function*(){const I=w.result;I.objectStoreNames.contains(Fn)?g(I):(I.close(),yield function yd(){const w=indexedDB.deleteDatabase(_s);return new Zo(w).toPromise()}(),g(yield vs()))}))})}function Ko(w,g,_){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,d.Z)(function*(w,g,_){const I=yo(w,!0).put({[dt]:g,value:_});return new Zo(I).toPromise()})).apply(this,arguments)}function jr(){return(jr=(0,d.Z)(function*(w,g){const _=yo(w,!1).get(g),I=yield new Zo(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function ws(w,g){const _=yo(w,!0).delete(g);return new Zo(_).toPromise()}const Wu=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield vs()),_.db})()}_withRetries(_){var I=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const k=yield I._openDb();return yield _(k)}catch(k){if(x++>3)throw k;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Ua()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=qh._getInstance(function Gu(){return Ua()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,d.Z)(function*(x,k){return{keyProcessed:(yield _._poll()).includes(k.key)}});return function(x,k){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,d.Z)(function*(x,k){return["keyChanged"]});return function(x,k){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var I,x;if(_.activeServiceWorker=yield function qo(){return _o.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Tn(_.activeServiceWorker);const k=yield _.sender._send("ping",{},800);!k||(null===(I=k[0])||void 0===I?void 0:I.fulfilled)&&(null===(x=k[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,d.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Hu(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield vs();return yield Ko(_,Uu,"1"),yield ws(_,Uu),!0}catch{}return!1})()}_withPendingWrite(_){var I=this;return(0,d.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(k=>Ko(k,_,I)),x.localCache[_]=I,x.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,d.Z)(function*(){const x=yield I._withRetries(k=>function Gs(w,g){return jr.apply(this,arguments)}(k,_));return I.localCache[_]=x,x})()}_remove(_){var I=this;return(0,d.Z)(function*(){return I._withPendingWrite((0,d.Z)(function*(){return yield I._withRetries(x=>ws(x,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const I=yield _._withRetries(ne=>{const Te=yo(ne,!1).getAll();return new Zo(Te).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const x=[],k=new Set;for(const{fbase_key:ne,value:Te}of I)k.add(ne),JSON.stringify(_.localCache[ne])!==JSON.stringify(Te)&&(_.notifyListeners(ne,Te),x.push(ne));for(const ne of Object.keys(_.localCache))_.localCache[ne]&&!k.has(ne)&&(_.notifyListeners(ne,null),x.push(ne));return x})()}notifyListeners(_,I){this.localCache[_]=I;const x=this.listeners[_];if(x)for(const k of Array.from(x))k(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Qo(w,g){return Zt(w,"POST","/v2/accounts/mfaSignIn:start",Ut(w,g))}function br(){return(br=(0,d.Z)(function*(w){return(yield Zt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ni(w){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=x=>{const k=Fe("internal-error");k.customData=x,_(k)},I.type="text/javascript",I.charset="UTF-8",function Ln(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function vo(w){return`__${w}${Math.floor(1e6*Math.random())}`}const oi=1e12;class ln{constructor(g){this.auth=g,this.counter=oi,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new Zh(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||oi;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||oi))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var I;return null===(I=_._widgets.get(g||oi))||void 0===I||I.execute(),""})()}}class Zh{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;ie(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Kh(w){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<w;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ql=vo("rcb"),ug=new Ye(3e4,6e4);class Zl{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=un().grecaptcha)||void 0===g||!g.render)}load(g,_=""){return ie(function Kl(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(un().grecaptcha):new Promise((I,x)=>{const k=un().setTimeout(()=>{x(Fe(g,"network-request-failed"))},ug.get());un()[ql]=()=>{un().clearTimeout(k),delete un()[ql];const Te=un().grecaptcha;if(!Te)return void x(Fe(g,"internal-error"));const nt=Te.render;Te.render=(ot,Rt)=>{const _n=nt(ot,Rt);return this.counter++,_n},this.hostLanguage=_,I(Te)},Ni(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:ql,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(k),x(Fe(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var _;return!(null===(_=un().grecaptcha)||void 0===_||!_.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ja{load(g){return(0,d.Z)(function*(){return new ln(g)})()}clearedOneInstance(){}}const Qh="recaptcha",lg={theme:"light",type:"image"};class _r{constructor(g,_=Object.assign({},lg),I){this.parameters=_,this.type=Qh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=nr(I),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;ie(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ja:new Zl,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(k=>{const ne=Te=>{!Te||(g.tokenChangeListeners.delete(ne),k(Te))};g.tokenChangeListeners.add(ne),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=un()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){ie(Ue()&&!Ua(),g.auth,"internal-error"),yield function Yl(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function si(w){return br.apply(this,arguments)}(g.auth);ie(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ws{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Vs._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Jh(w,g,_){return $a.apply(this,arguments)}function $a(){return($a=(0,d.Z)(function*(w,g,_){const I=nr(w),x=yield qi(I,g,(0,j.m9)(_));return new Ws(x,k=>Ho(I,k))})).apply(this,arguments)}function xr(w,g,_){return _i.apply(this,arguments)}function _i(){return(_i=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w);yield sr(!1,I,"phone");const x=yield qi(I.auth,g,(0,j.m9)(_));return new Ws(x,k=>Ll(I,k))})).apply(this,arguments)}function Ql(w,g,_){return wo.apply(this,arguments)}function wo(){return(wo=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w),x=yield qi(I.auth,g,(0,j.m9)(_));return new Ws(x,k=>sd(I,k))})).apply(this,arguments)}function qi(w,g,_){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(w,g,_){var I;const x=yield _.verify();try{let k;if(ie("string"==typeof x,w,"argument-error"),ie(_.type===Qh,w,"argument-error"),k="string"==typeof g?{phoneNumber:g}:g,"session"in k){const ne=k.session;if("phoneNumber"in k)return ie("enroll"===ne.type,w,"internal-error"),(yield mr(w,{idToken:ne.credential,phoneEnrollmentInfo:{phoneNumber:k.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ie("signin"===ne.type,w,"internal-error");const Te=(null===(I=k.multiFactorHint)||void 0===I?void 0:I.uid)||k.multiFactorUid;return ie(Te,w,"missing-multi-factor-info"),(yield Qo(w,{mfaPendingCredential:ne.credential,mfaEnrollmentId:Te,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ne}=yield eg(w,{phoneNumber:k.phoneNumber,recaptchaToken:x});return ne}}finally{_._reset()}})).apply(this,arguments)}function Ed(w,g){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,d.Z)(function*(w,g){yield uo((0,j.m9)(w),g)})).apply(this,arguments)}let Xh=(()=>{class w{constructor(_){this.providerId=w.PROVIDER_ID,this.auth=nr(_)}verifyPhoneNumber(_,I){return qi(this.auth,_,(0,j.m9)(I))}static credential(_,I){return Vs._fromVerification(_,I)}static credentialFromResult(_){return w.credentialFromTaggedObject(_)}static credentialFromError(_){return w.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:x}=_;return I&&x?Vs._fromTokenResponse(I,x):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Gn(w,g){return g?se(g):(ie(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Pi extends rr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Ls(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Ls(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Ls(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function $r(w){return Ri(w.auth,new Pi(w),w.bypassAuthState)}function Xl(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),Bs(_,new Pi(w),w.bypassAuthState)}function Ha(w){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,d.Z)(function*(w){const{auth:g,user:_}=w;return ie(_,g,"internal-error"),uo(_,new Pi(w),w.bypassAuthState)})).apply(this,arguments)}class Io{constructor(g,_,I,x,k=!1){this.auth=g,this.resolver=I,this.user=x,this.bypassAuthState=k,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(I,x){g.pendingPromise={resolve:I,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(k){g.reject(k)}});return function(I,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:I,sessionId:x,postBody:k,tenantId:ne,error:Te,type:nt}=g;if(Te)return void _.reject(Te);const ot={auth:_.auth,requestUri:I,sessionId:x,tenantId:ne||void 0,postBody:k||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(nt)(ot))}catch(Rt){_.reject(Rt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return $r;case"linkViaPopup":case"linkViaRedirect":return Ha;case"reauthViaPopup":case"reauthViaRedirect":return Xl;default:Ze(this.auth,"internal-error")}}resolve(g){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ga=new Ye(2e3,1e4);function ea(w,g,_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(w,g,_){const I=nr(w);De(w,g,as);const x=Gn(I,_);return new zu(I,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function za(w,g,_){return qa.apply(this,arguments)}function qa(){return(qa=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w);De(I.auth,g,as);const x=Gn(I.auth,_);return new zu(I.auth,"reauthViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}function $_(w,g,_){return ec.apply(this,arguments)}function ec(){return(ec=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w);De(I.auth,g,as);const x=Gn(I.auth,_);return new zu(I.auth,"linkViaPopup",g,x,I).executeNotNull()})).apply(this,arguments)}let zu=(()=>{class w extends Io{constructor(_,I,x,k,ne){super(_,I,k,ne),this.provider=x,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const I=yield _.execute();return ie(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,d.Z)(function*(){Ce(1===_.filter.length,"Popup operations only handle one event");const I=Va();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Fe(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,x;this.pollId=null!==(x=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,Ga.get())};_()}}return w.currentPopupAction=null,w})();const zs=new Map;class Co extends Io{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let I=zs.get(_.auth._key());if(!I){try{const k=(yield function qu(w,g){return tc.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(k)}catch(x){I=()=>Promise.reject(x)}zs.set(_.auth._key(),I)}return _.bypassAuthState||zs.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const x=yield I.auth._redirectUserForId(g.eventId);if(x)return I.user=x,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function tc(){return(tc=(0,d.Z)(function*(w,g){const _=Za(g),I=ta(w);if(!(yield I._isAvailable()))return!1;const x="true"===(yield I._get(_));return yield I._remove(_),x})).apply(this,arguments)}function Zu(w,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,d.Z)(function*(w,g){return ta(w)._set(Za(g),"true")})).apply(this,arguments)}function Id(){zs.clear()}function yi(w,g){zs.set(w._key(),g)}function ta(w){return se(w._redirectPersistence)}function Za(w){return Kt("pendingRedirect",w.config.apiKey,w.name)}function An(w,g,_){return function Do(w,g,_){return qs.apply(this,arguments)}(w,g,_)}function qs(){return(qs=(0,d.Z)(function*(w,g,_){const I=nr(w);De(w,g,as);const x=Gn(I,_);return yield Zu(x,I),x._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function Ka(w,g,_){return function D(w,g,_){return T.apply(this,arguments)}(w,g,_)}function T(){return(T=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w);De(I.auth,g,as);const x=Gn(I.auth,_);yield Zu(x,I.auth);const k=yield Mt(I);return x._openRedirect(I.auth,g,"reauthViaRedirect",k)})).apply(this,arguments)}function M(w,g,_){return function V(w,g,_){return J.apply(this,arguments)}(w,g,_)}function J(){return(J=(0,d.Z)(function*(w,g,_){const I=(0,j.m9)(w);De(I.auth,g,as);const x=Gn(I.auth,_);yield sr(!1,I,g.providerId),yield Zu(x,I.auth);const k=yield Mt(I);return x._openRedirect(I.auth,g,"linkViaRedirect",k)})).apply(this,arguments)}function ue(w,g){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,d.Z)(function*(w,g){return yield nr(w)._initializationPromise,ze(w,g,!1)})).apply(this,arguments)}function ze(w,g){return yt.apply(this,arguments)}function yt(){return(yt=(0,d.Z)(function*(w,g,_=!1){const I=nr(w),x=Gn(I,g),ne=yield new Co(I,x,_).execute();return ne&&!_&&(delete ne.user._redirectEventId,yield I._persistUserIfCurrent(ne.user),yield I._setRedirectUser(null,g)),ne})).apply(this,arguments)}function Mt(w){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(w){const g=Va(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class Wn{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ai(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zs(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!Zs(g)){const x=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(Fe(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yr(g))}saveEventToCache(g){this.cachedEventUids.add(yr(g)),this.lastProcessedEventTime=Date.now()}}function yr(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function Zs({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===g?.code}function Oi(w){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,d.Z)(function*(w,g={}){return Zt(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Qa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,na=/^https?/;function Ks(){return(Ks=(0,d.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield Oi(w);for(const _ of g)try{if(Cd(_))return}catch{}Ze(w,"unauthorized-domain")})).apply(this,arguments)}function Cd(w){const g=ce(),{protocol:_,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const ne=new URL(w);return""===ne.hostname&&""===I?"chrome-extension:"===_&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&ne.hostname===I}if(!na.test(_))return!1;if(Qa.test(w))return I===w;const x=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(I)}const cg=new Ye(3e4,6e4);function dg(){const w=un().___jsl;if(w?.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let _=0;_<w.CP.length;_++)w.CP[_]=null}let nc=null;function hg(w){return nc=nc||function ef(w){return new Promise((g,_)=>{var I,x,k;function ne(){dg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{dg(),_(Fe(w,"network-request-failed"))},timeout:cg.get()})}if(null!==(x=null===(I=un().gapi)||void 0===I?void 0:I.iframes)&&void 0!==x&&x.Iframe)g(gapi.iframes.getContext());else{if(null===(k=un().gapi)||void 0===k||!k.load){const Te=vo("iframefcb");return un()[Te]=()=>{gapi.load?ne():_(Fe(w,"network-request-failed"))},Ni(`https://apis.google.com/js/api.js?onload=${Te}`).catch(nt=>_(nt))}ne()}}).catch(g=>{throw nc=null,g})}(w),nc}const G_=new Ye(5e3,15e3),W_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function z_(w){const g=w.config;ie(g.authDomain,w,"auth-domain-config-required");const _=g.emulator?hn(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:w.name,v:N.SDK_VERSION},x=rc.get(w.config.apiHost);x&&(I.eid=x);const k=w._getFrameworks();return k.length&&(I.fw=k.join(",")),`${_}?${(0,j.xO)(I).slice(1)}`}function Ku(){return Ku=(0,d.Z)(function*(w){const g=yield hg(w),_=un().gapi;return ie(_,w,"internal-error"),g.open({where:document.body,url:z_(w),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:W_,dontclear:!0},I=>new Promise(function(){var x=(0,d.Z)(function*(k,ne){yield I.restyle({setHideOnLeave:!1});const Te=Fe(w,"network-request-failed"),nt=un().setTimeout(()=>{ne(Te)},G_.get());function ot(){un().clearTimeout(nt),k(I)}I.ping(ot).then(ot,()=>{ne(Te)})});return function(k,ne){return x.apply(this,arguments)}}()))}),Ku.apply(this,arguments)}const Ja={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rf(w,g,_,I,x,k){ie(w.config.authDomain,w,"auth-domain-config-required"),ie(w.config.apiKey,w,"invalid-api-key");const ne={apiKey:w.config.apiKey,appName:w.name,authType:_,redirectUrl:I,v:N.SDK_VERSION,eventId:x};if(g instanceof as){g.setDefaultLanguage(w.languageCode),ne.providerId=g.providerId||"",(0,j.xb)(g.getCustomParameters())||(ne.customParameters=JSON.stringify(g.getCustomParameters()));for(const[nt,ot]of Object.entries(k||{}))ne[nt]=ot}if(g instanceof us){const nt=g.getScopes().filter(ot=>""!==ot);nt.length>0&&(ne.scopes=nt.join(","))}w.tenantId&&(ne.tid=w.tenantId);const Te=ne;for(const nt of Object.keys(Te))void 0===Te[nt]&&delete Te[nt];return`${function $w({config:w}){return w.emulator?hn(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(Te).slice(1)}`}const sf="webStorageSupport",yg=class _g{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$u,this._completeRedirectFn=ze,this._overrideRedirectResult=yi}_openPopup(g,_,I,x){var k=this;return(0,d.Z)(function*(){var ne;Ce(null===(ne=k.eventManagers[g._key()])||void 0===ne?void 0:ne.manager,"_initialize() not called before _openPopup()");const Te=rf(g,_,I,ce(),x);return function tf(w,g,_,I=500,x=600){const k=Math.max((window.screen.availHeight-x)/2,0).toString(),ne=Math.max((window.screen.availWidth-I)/2,0).toString();let Te="";const nt=Object.assign(Object.assign({},Ja),{width:I.toString(),height:x.toString(),top:k,left:ne}),ot=(0,j.z$)().toLowerCase();_&&(Te=Ee(ot)?"_blank":_),$(ot)&&(g=g||"http://localhost",nt.scrollbars="yes");const Rt=Object.entries(nt).reduce((Zi,[To,Yu])=>`${Zi}${To}=${Yu},`,"");if(function Ir(w=(0,j.z$)()){var g;return Et(w)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(ot)&&"_self"!==Te)return function nf(w,g){const _=document.createElement("a");_.href=w,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",Te),new bd(null);const _n=window.open(g||"",Te,Rt);ie(_n,w,"popup-blocked");try{_n.focus()}catch{}return new bd(_n)}(g,Te,Va())})()}_openRedirect(g,_,I,x){var k=this;return(0,d.Z)(function*(){return yield k._originValidation(g),function zi(w){un().location.href=w}(rf(g,_,I,ce(),x)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:k}=this.eventManagers[_];return x?Promise.resolve(x):(Ce(k,"If manager is not set, promise should be"),k)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const I=yield function q_(w){return Ku.apply(this,arguments)}(g),x=new Wn(g);return I.register("authEvent",k=>(ie(k?.authEvent,g,"invalid-auth-event"),{status:x.onEvent(k.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=I,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(sf,{type:sf},x=>{var k;const ne=null===(k=x?.[0])||void 0===k?void 0:k[sf];void 0!==ne&&_(!!ne),Ze(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function bo(w){return Ks.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return fr()||H()||Et()}};class Is extends class vg{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return me("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Is(g)}_finalizeEnroll(g,_,I){return function md(w,g){return Zt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(w,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Ba(w,g){return Zt(w,"POST","/v2/accounts/mfaSignIn:finalize",Ut(w,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Xa=(()=>{class w{constructor(){}static assertion(_){return Is._fromCredential(_)}}return w.FACTOR_ID="phone",w})();var wg="@firebase/auth";class Hw{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{var x;g((null===(x=I)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Y_(w){(0,N._registerComponent)(new ye.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),x=g.getProvider("heartbeat"),{apiKey:k,authDomain:ne}=I.options;return((Te,nt)=>{ie(k&&!k.includes(":"),"invalid-api-key",{appName:Te.name}),ie(!ne?.includes(":"),"argument-error",{appName:Te.name});const ot={apiKey:k,authDomain:ne,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fo(w)},Rt=new Pt(Te,nt,ot);return function ve(w,g){const _=g?.persistence||[],I=(Array.isArray(_)?_:[_]).map(se);g?.errorMap&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,g?.popupRedirectResolver)}(Rt,_),Rt})(I,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",g=>{const _=nr(g.getProvider("auth").getImmediate());return new Hw(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(wg,"0.20.5",function Lb(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,N.registerVersion)(wg,"0.20.5","esm2017")}("Browser")},2090:(ft,ke,L)=>{L.d(ke,{$s:()=>Cn,BH:()=>We,DV:()=>Zt,Dv:()=>Lr,G6:()=>ie,GJ:()=>qt,L:()=>he,LL:()=>ce,Mn:()=>De,Pz:()=>Vt,Sg:()=>Pe,UG:()=>ge,UI:()=>Ti,US:()=>ye,Wj:()=>cr,Yr:()=>Ke,ZB:()=>W,ZR:()=>ve,b$:()=>Ze,cI:()=>Wt,d:()=>Fe,dS:()=>jt,eu:()=>Ce,g5:()=>N,gK:()=>lr,gQ:()=>ji,h$:()=>fe,hl:()=>me,hu:()=>j,jU:()=>_e,lb:()=>ss,m9:()=>tr,ne:()=>ht,p$:()=>q,pd:()=>$n,r3:()=>Ut,ru:()=>Qe,tV:()=>we,uI:()=>Ge,ug:()=>Je,vZ:()=>kr,w1:()=>xe,w9:()=>fn,xO:()=>gi,xb:()=>wn,z$:()=>Me,zI:()=>X,zd:()=>Ai});const j=function(G,z){if(!G)throw N(z)},N=function(G){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+G)},ae=function(G){const z=[];let B=0;for(let Z=0;Z<G.length;Z++){let K=G.charCodeAt(Z);K<128?z[B++]=K:K<2048?(z[B++]=K>>6|192,z[B++]=63&K|128):55296==(64512&K)&&Z+1<G.length&&56320==(64512&G.charCodeAt(Z+1))?(K=65536+((1023&K)<<10)+(1023&G.charCodeAt(++Z)),z[B++]=K>>18|240,z[B++]=K>>12&63|128,z[B++]=K>>6&63|128,z[B++]=63&K|128):(z[B++]=K>>12|224,z[B++]=K>>6&63|128,z[B++]=63&K|128)}return z},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,z){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const B=z?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let K=0;K<G.length;K+=3){const Oe=G[K],qe=K+1<G.length,_t=qe?G[K+1]:0,en=K+2<G.length,Kt=en?G[K+2]:0;let $=(15&_t)<<2|Kt>>6,H=63&Kt;en||(H=64,qe||($=64)),Z.push(B[Oe>>2],B[(3&Oe)<<4|_t>>4],B[$],B[H])}return Z.join("")},encodeString(G,z){return this.HAS_NATIVE_SUPPORT&&!z?btoa(G):this.encodeByteArray(ae(G),z)},decodeString(G,z){return this.HAS_NATIVE_SUPPORT&&!z?atob(G):function(G){const z=[];let B=0,Z=0;for(;B<G.length;){const K=G[B++];if(K<128)z[Z++]=String.fromCharCode(K);else if(K>191&&K<224){const Oe=G[B++];z[Z++]=String.fromCharCode((31&K)<<6|63&Oe)}else if(K>239&&K<365){const en=((7&K)<<18|(63&G[B++])<<12|(63&G[B++])<<6|63&G[B++])-65536;z[Z++]=String.fromCharCode(55296+(en>>10)),z[Z++]=String.fromCharCode(56320+(1023&en))}else{const Oe=G[B++],qe=G[B++];z[Z++]=String.fromCharCode((15&K)<<12|(63&Oe)<<6|63&qe)}}return z.join("")}(this.decodeStringToByteArray(G,z))},decodeStringToByteArray(G,z){this.init_();const B=z?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let K=0;K<G.length;){const Oe=B[G.charAt(K++)],_t=K<G.length?B[G.charAt(K)]:0;++K;const Kt=K<G.length?B[G.charAt(K)]:64;++K;const ee=K<G.length?B[G.charAt(K)]:64;if(++K,null==Oe||null==_t||null==Kt||null==ee)throw Error();Z.push(Oe<<2|_t>>4),64!==Kt&&(Z.push(_t<<4&240|Kt>>2),64!==ee&&Z.push(Kt<<6&192|ee))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},fe=function(G){const z=ae(G);return ye.encodeByteArray(z,!0)},he=function(G){return fe(G).replace(/\./g,"")},we=function(G){try{return ye.decodeString(G,!0)}catch(z){console.error("base64Decode failed: ",z)}return null};function q(G){return W(void 0,G)}function W(G,z){if(!(z instanceof Object))return z;switch(z.constructor){case Date:return new Date(z.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return z}for(const B in z)!z.hasOwnProperty(B)||!te(B)||(G[B]=W(G[B],z[B]));return G}function te(G){return"__proto__"!==G}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((z,B)=>{this.resolve=z,this.reject=B})}wrapCallback(z){return(B,Z)=>{B?this.reject(B):this.resolve(Z),"function"==typeof z&&(this.promise.catch(()=>{}),1===z.length?z(B):z(B,Z))}}}function Pe(G,z){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=z||"demo-project",K=G.iat||0,Oe=G.sub||G.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const qe=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:K,exp:K+3600,auth_time:K,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},G);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(qe)),""].join(".")}function Me(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function Qe(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fe(){return Me().indexOf("Electron/")>=0}function xe(){const G=Me();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function De(){return Me().indexOf("MSAppHost/")>=0}function Ke(){return!1}function ie(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function me(){return"object"==typeof indexedDB}function Ce(){return new Promise((G,z)=>{try{let B=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(Z);K.onsuccess=()=>{K.result.close(),B||self.indexedDB.deleteDatabase(Z),G(!0)},K.onupgradeneeded=()=>{B=!1},K.onerror=()=>{var Oe;z((null===(Oe=K.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(B){z(B)}})}function X(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ve extends Error{constructor(z,B,Z){super(B),this.code=z,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,ve.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(z,B,Z){this.service=z,this.serviceName=B,this.errors=Z}create(z,...B){const Z=B[0]||{},K=`${this.service}/${z}`,Oe=this.errors[z],qe=Oe?function Ue(G,z){return G.replace(pt,(B,Z)=>{const K=z[Z];return null!=K?String(K):`<${Z}?>`})}(Oe,Z):"Error";return new ve(K,`${this.serviceName}: ${qe} (${K}).`,Z)}}const pt=/\{\$([^}]+)}/g;function Wt(G){return JSON.parse(G)}function Vt(G){return JSON.stringify(G)}const Ye=function(G){let z={},B={},Z={},K="";try{const Oe=G.split(".");z=Wt(we(Oe[0])||""),B=Wt(we(Oe[1])||""),K=Oe[2],Z=B.d||{},delete B.d}catch{}return{header:z,claims:B,data:Z,signature:K}},fn=function(G){const B=Ye(G).claims;return!!B&&"object"==typeof B&&B.hasOwnProperty("iat")},qt=function(G){const z=Ye(G).claims;return"object"==typeof z&&!0===z.admin};function Ut(G,z){return Object.prototype.hasOwnProperty.call(G,z)}function Zt(G,z){if(Object.prototype.hasOwnProperty.call(G,z))return G[z]}function wn(G){for(const z in G)if(Object.prototype.hasOwnProperty.call(G,z))return!1;return!0}function Ti(G,z,B){const Z={};for(const K in G)Object.prototype.hasOwnProperty.call(G,K)&&(Z[K]=z.call(B,G[K],K,G));return Z}function kr(G,z){if(G===z)return!0;const B=Object.keys(G),Z=Object.keys(z);for(const K of B){if(!Z.includes(K))return!1;const Oe=G[K],qe=z[K];if(Rn(Oe)&&Rn(qe)){if(!kr(Oe,qe))return!1}else if(Oe!==qe)return!1}for(const K of Z)if(!B.includes(K))return!1;return!0}function Rn(G){return null!==G&&"object"==typeof G}function gi(G){const z=[];for(const[B,Z]of Object.entries(G))Array.isArray(Z)?Z.forEach(K=>{z.push(encodeURIComponent(B)+"="+encodeURIComponent(K))}):z.push(encodeURIComponent(B)+"="+encodeURIComponent(Z));return z.length?"&"+z.join("&"):""}function Ai(G){const z={};return G.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[K,Oe]=Z.split("=");z[decodeURIComponent(K)]=decodeURIComponent(Oe)}}),z}function $n(G){const z=G.indexOf("?");if(!z)return"";const B=G.indexOf("#",z);return G.substring(z,B>0?B:void 0)}class ji{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let z=1;z<this.blockSize;++z)this.pad_[z]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(z,B){B||(B=0);const Z=this.W_;if("string"==typeof z)for(let ee=0;ee<16;ee++)Z[ee]=z.charCodeAt(B)<<24|z.charCodeAt(B+1)<<16|z.charCodeAt(B+2)<<8|z.charCodeAt(B+3),B+=4;else for(let ee=0;ee<16;ee++)Z[ee]=z[B]<<24|z[B+1]<<16|z[B+2]<<8|z[B+3],B+=4;for(let ee=16;ee<80;ee++){const $=Z[ee-3]^Z[ee-8]^Z[ee-14]^Z[ee-16];Z[ee]=4294967295&($<<1|$>>>31)}let Kt,hr,K=this.chain_[0],Oe=this.chain_[1],qe=this.chain_[2],_t=this.chain_[3],en=this.chain_[4];for(let ee=0;ee<80;ee++){ee<40?ee<20?(Kt=_t^Oe&(qe^_t),hr=1518500249):(Kt=Oe^qe^_t,hr=1859775393):ee<60?(Kt=Oe&qe|_t&(Oe|qe),hr=2400959708):(Kt=Oe^qe^_t,hr=3395469782);const $=(K<<5|K>>>27)+Kt+en+hr+Z[ee]&4294967295;en=_t,_t=qe,qe=4294967295&(Oe<<30|Oe>>>2),Oe=K,K=$}this.chain_[0]=this.chain_[0]+K&4294967295,this.chain_[1]=this.chain_[1]+Oe&4294967295,this.chain_[2]=this.chain_[2]+qe&4294967295,this.chain_[3]=this.chain_[3]+_t&4294967295,this.chain_[4]=this.chain_[4]+en&4294967295}update(z,B){if(null==z)return;void 0===B&&(B=z.length);const Z=B-this.blockSize;let K=0;const Oe=this.buf_;let qe=this.inbuf_;for(;K<B;){if(0===qe)for(;K<=Z;)this.compress_(z,K),K+=this.blockSize;if("string"==typeof z){for(;K<B;)if(Oe[qe]=z.charCodeAt(K),++qe,++K,qe===this.blockSize){this.compress_(Oe),qe=0;break}}else for(;K<B;)if(Oe[qe]=z[K],++qe,++K,qe===this.blockSize){this.compress_(Oe),qe=0;break}}this.inbuf_=qe,this.total_+=B}digest(){const z=[];let B=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let K=this.blockSize-1;K>=56;K--)this.buf_[K]=255&B,B/=256;this.compress_(this.buf_);let Z=0;for(let K=0;K<5;K++)for(let Oe=24;Oe>=0;Oe-=8)z[Z]=this.chain_[K]>>Oe&255,++Z;return z}}function ht(G,z){const B=new Fr(G,z);return B.subscribe.bind(B)}class Fr{constructor(z,B){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=B,this.task.then(()=>{z(this)}).catch(Z=>{this.error(Z)})}next(z){this.forEachObserver(B=>{B.next(z)})}error(z){this.forEachObserver(B=>{B.error(z)}),this.close(z)}complete(){this.forEachObserver(z=>{z.complete()}),this.close()}subscribe(z,B,Z){let K;if(void 0===z&&void 0===B&&void 0===Z)throw new Error("Missing Observer.");K=function Xt(G,z){if("object"!=typeof G||null===G)return!1;for(const B of z)if(B in G&&"function"==typeof G[B])return!0;return!1}(z,["next","error","complete"])?z:{next:z,error:B,complete:Z},void 0===K.next&&(K.next=ur),void 0===K.error&&(K.error=ur),void 0===K.complete&&(K.complete=ur);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),Oe}unsubscribeOne(z){void 0===this.observers||void 0===this.observers[z]||(delete this.observers[z],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(z){if(!this.finalized)for(let B=0;B<this.observers.length;B++)this.sendOne(B,z)}sendOne(z,B){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[z])try{B(this.observers[z])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(z){this.finalized||(this.finalized=!0,void 0!==z&&(this.finalError=z),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ur(){}const Lr=function(G,z,B,Z){let K;if(Z<z?K="at least "+z:Z>B&&(K=0===B?"none":"no more than "+B),K)throw new Error(G+" failed: Was called with "+Z+(1===Z?" argument.":" arguments.")+" Expects "+K+".")};function lr(G,z){return`${G} failed: ${z} argument `}function cr(G,z,B,Z){if((!Z||B)&&"function"!=typeof B)throw new Error(lr(G,z)+"must be a valid function.")}function ss(G,z,B,Z){if((!Z||B)&&("object"!=typeof B||null===B))throw new Error(lr(G,z)+"must be a valid context object.")}const jt=function(G){const z=[];let B=0;for(let Z=0;Z<G.length;Z++){let K=G.charCodeAt(Z);if(K>=55296&&K<=56319){const Oe=K-55296;Z++,j(Z<G.length,"Surrogate pair missing trail surrogate."),K=65536+(Oe<<10)+(G.charCodeAt(Z)-56320)}K<128?z[B++]=K:K<2048?(z[B++]=K>>6|192,z[B++]=63&K|128):K<65536?(z[B++]=K>>12|224,z[B++]=K>>6&63|128,z[B++]=63&K|128):(z[B++]=K>>18|240,z[B++]=K>>12&63|128,z[B++]=K>>6&63|128,z[B++]=63&K|128)}return z},Je=function(G){let z=0;for(let B=0;B<G.length;B++){const Z=G.charCodeAt(B);Z<128?z++:Z<2048?z+=2:Z>=55296&&Z<=56319?(z+=4,B++):z+=3}return z};function Cn(G,z=1e3,B=2){const Z=z*Math.pow(B,G),K=Math.round(.5*Z*(Math.random()-.5)*2);return Math.min(144e5,Z+K)}function tr(G){return G&&G._delegate?G._delegate:G}},3556:(ft,ke,L)=>{var d=L(4650);let j=null;function N(){return j}const fe=new d.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(){return(0,d.LFG)(W)}()},providedIn:"platform"}),n})();const q=new d.OlP("Location Initialized");let W=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){te()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){te()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function We(){return new W((0,d.LFG)(fe))}()},providedIn:"platform"}),n})();function te(){return!!window.history.pushState}function Pe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ge(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function _e(){const n=(0,d.LFG)(fe).location;return new Ze((0,d.LFG)(he),n&&n.origin||"")}()},providedIn:"root"}),n})();const Qe=new d.OlP("appBaseHref");let Ze=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ge(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ge(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(Qe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Pe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ge(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(he),d.LFG(Qe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Me(ie(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ge(r))}normalize(t){return n.stripTrailingSlash(function Ke(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ge(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ge,n.joinWithSlash=Pe,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(d.LFG(ge))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function De(){return new xe((0,d.LFG)(ge))}()},providedIn:"root"}),n})();function ie(n){return n.replace(/\/index.html$/,"")}function Eu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class Lo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xi=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Lo(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,l),ir(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ir(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function ir(n,e){n.context.$implicit=e.item}let Ur=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Br,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Pl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Pl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Br{constructor(){this.$implicit=null,this.ngIf=null}}function Pl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let ls=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function Bh(n){return"server"===n}let xa=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new gr((0,d.LFG)(fe),window)}),n})();class gr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function uo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=jo(this.window.history)||jo(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jo(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class sr{}class Bs extends class $o extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){j||(j=n)}(new Bs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ri(){return lo=lo||document.querySelector("base"),lo?lo.getAttribute("href"):null}();return null==t?null:function Ho(n){cs=cs||document.createElement("a"),cs.setAttribute("href",n);const e=cs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){lo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Eu(document.cookie,e)}}let cs,lo=null;const at=new d.OlP("TRANSITION_ID"),Su=[{provide:d.ip1,useFactory:function Ll(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[at,fe,d.zs3],multi:!0}];let Ma=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ra=new d.OlP("EventManagerPlugins");let ds=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ra),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class xu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Go=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends Go{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Bt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Bt))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Bt(n){N().remove(n)}const co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Mu=/%COMP%/g;function fo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?fo(n,i,t):(i=i.replace(Mu,n),t.push(i))}return t}function od(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Wo=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Kn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new gs(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new ad(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=fo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ds),d.LFG(Se),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Kn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(co[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ps(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ps(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=co[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=co[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,od(r)):this.eventManager.addEventListener(e,t,od(r))}}function ps(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class gs extends Kn{constructor(e,t,r,i){super(e),this.component=r;const a=fo(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function ho(n){return"_ngcontent-%COMP%".replace(Mu,n)}(i+"-"+r.id),this.hostAttr=function Na(n){return"_nghost-%COMP%".replace(Mu,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ad extends Kn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=fo(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const f=document.createElement("style");f.textContent=a[l],this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Nu=(()=>{class n extends xu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=["alt","control","meta","shift"],Ou={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},js={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ud={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let po=(()=>{class n extends xu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Pu.forEach(m=>{const v=r.indexOf(m);v>-1&&(r.splice(v,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const f={};return f.domEventName=i,f.fullKey=l,f}static getEventFullKey(t){let r="",i=function jh(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&js.hasOwnProperty(e)&&(e=js[e]))}return Ou[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Pu.forEach(a=>{a!=i&&(0,ud[a])(t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fu=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function ld(){Bs.makeCurrent()},multi:!0},{provide:fe,useFactory:function cd(){return(0,d.RDi)(document),document},deps:[]}]),Oa=new d.OlP(""),Dr=[{provide:d.rWj,useClass:class sd{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const f=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(f)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Zr=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function zo(){return new d.qLn},deps:[]},{provide:Ra,useClass:Nu,multi:!0,deps:[fe,d.R0b,d.Lbi]},{provide:Ra,useClass:po,multi:!0,deps:[fe]},{provide:Wo,useClass:Wo,deps:[ds,Se,d.AFp]},{provide:d.FYo,useExisting:Wo},{provide:Go,useExisting:Se},{provide:Se,useClass:Se,deps:[fe]},{provide:ds,useClass:ds,deps:[Ra,d.R0b]},{provide:sr,useClass:Ma,deps:[]},[]];let Pn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:at,useExisting:d.AFp},Su]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Oa,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Zr,...Dr],imports:[ls,d.hGG]}),n})(),Lu=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function $h(){return new Lu((0,d.LFG)(fe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Tn=L(8996),un=L(8306);const{isArray:zi}=Array,{getPrototypeOf:Ua,prototype:qo,keys:_o}=Object;function Hu(n){if(1===n.length){const e=n[0];if(zi(e))return{args:e,keys:null};if(function Gu(n){return n&&"object"==typeof n&&Ua(n)===qo}(e)){const t=_o(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var _s=L(8421),ys=L(7669),Fn=L(5403),dt=L(4004);const{isArray:Zo}=Array;function yd(n){return(0,dt.U)(e=>function yo(n,e){return Zo(e)?n(...e):n(e)}(n,e))}function vs(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Yo=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Gs=(()=>{class n extends Yo{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const jr=new d.OlP("NgValueAccessor"),zl={provide:jr,useExisting:(0,d.Gpc)(()=>Qo),multi:!0},Wu=new d.OlP("CompositionEventMode");let Qo=(()=>{class n extends Yo{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vd(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Wu,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[d._Bn([zl]),d.qOj]}),n})();const Ln=new d.OlP("NgValidators"),Ni=new d.OlP("NgAsyncValidators");function Kl(n){return null!=n}function ja(n){return(0,d.QGY)(n)?(0,Tn.D)(n):n}function Qh(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function lg(n,e){return e.map(t=>t(n))}function Yl(n){return n.map(e=>function _r(n){return!n.validate}(e)?e:t=>e.validate(t))}function Jh(n){return null!=n?function Ws(n){if(!n)return null;const e=n.filter(Kl);return 0==e.length?null:function(t){return Qh(lg(t,e))}}(Yl(n)):null}function xr(n){return null!=n?function $a(n){if(!n)return null;const e=n.filter(Kl);return 0==e.length?null:function(t){return function Ko(...n){const e=(0,ys.jO)(n),{args:t,keys:r}=Hu(n),i=new un.y(a=>{const{length:l}=t;if(!l)return void a.complete();const f=new Array(l);let m=l,v=l;for(let b=0;b<l;b++){let S=!1;(0,_s.Xf)(t[b]).subscribe((0,Fn.x)(a,P=>{S||(S=!0,v--),f[b]=P},()=>m--,void 0,()=>{(!m||!S)&&(v||a.next(r?vs(r,f):f),a.complete())}))}});return e?i.pipe(yd(e)):i}(lg(t,e).map(ja)).pipe((0,dt.U)(Qh))}}(Yl(n)):null}function _i(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Ql(n){return n._rawValidators}function wo(n){return n._rawAsyncValidators}function qi(n){return n?Array.isArray(n)?n:[n]:[]}function Eo(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ed(n,e){const t=qi(e);return qi(n).forEach(i=>{Eo(t,i)||t.push(i)}),t}function Jl(n,e){return qi(e).filter(t=>!Eo(n,t))}class Xh{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Gn extends Xh{get formDirective(){return null}get path(){return null}}class Pi extends Xh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $r{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xo=(()=>{class n extends $r{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Pi,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})(),Io=(()=>{class n extends $r{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Gn,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[d.qOj]}),n})();const Za="VALID",An="INVALID",Do="PENDING",qs="DISABLED";function Ka(n){return(V(n)?n.validators:n)||null}function D(n){return Array.isArray(n)?Jh(n):n||null}function T(n,e){return(V(e)?e.asyncValidators:n)||null}function M(n){return Array.isArray(n)?xr(n):n||null}function V(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function J(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")}function ue(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})}class Ne{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=D(this._rawValidators),this._composedAsyncValidatorFn=M(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Za}get invalid(){return this.status===An}get pending(){return this.status==Do}get disabled(){return this.status===qs}get enabled(){return this.status!==qs}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=D(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=M(e)}addValidators(e){this.setValidators(Ed(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ed(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Jl(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Jl(e,this._rawAsyncValidators))}hasValidator(e){return Eo(this._rawValidators,e)}hasAsyncValidator(e){return Eo(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Do,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qs,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Za,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Za||this.status===Do)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qs:Za}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Do,this._hasOwnPendingAsyncValidator=!0;const t=ja(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?qs:this.errors?An:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Do)?Do:this._anyControlsHaveStatus(An)?An:Za}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){V(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class ze extends Ne{constructor(e,t,r){super(Ka(t),T(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){ue(this,0,e),Object.keys(e).forEach(r=>{J(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function yr(n,e){Ya(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function na(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ks(n,e)})}(n,e),function Cd(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function bo(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ks(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Oi(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Zs(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Qa(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ai(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ya(n,e){const t=Ql(n);null!==e.validator?n.setValidators(_i(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=wo(n);null!==e.asyncValidator?n.setAsyncValidators(_i(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();ai(e._rawValidators,i),ai(e._rawAsyncValidators,i)}function Qa(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Ql(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=wo(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return ai(e._rawValidators,r),ai(e._rawAsyncValidators,r),t}function Ks(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gg(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function mg(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Dd=class extends Ne{constructor(e=null,t,r){super(Ka(t),T(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),V(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=mg(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gg(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gg(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mg(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let Xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Y_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const I=new d.OlP("NgModelWithFormControlWarning"),ne={provide:Gn,useExisting:(0,d.Gpc)(()=>Te)};let Te=(()=>{class n extends Gn{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Qa(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return yr(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Zs(t.control||null,t,!1),function z_(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function W_(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Zs(r||null,t),(n=>n instanceof Dd)(i)&&(yr(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function cg(n,e){Ya(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function dg(n,e){return Qa(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ya(this.form,this),this._oldForm&&Qa(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ln,10),d.Y36(Ni,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([ne]),d.qOj,d.TTD]}),n})();const To={provide:Pi,useExisting:(0,d.Gpc)(()=>Yu)};let Yu=(()=>{class n extends Pi{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function rc(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Qo?t=a:function pg(n){return Object.getPrototypeOf(n.constructor)===Gs}(a)?r=a:i=a}),i||r||t||null}(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function fg(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Wn(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Gn,13),d.Y36(Ln,10),d.Y36(Ni,10),d.Y36(jr,10),d.Y36(I,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([To]),d.qOj,d.TTD]}),n})(),df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Y_]}),n})(),Zw=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:I,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[df]}),n})();class Kw extends Ne{constructor(e,t,r){super(Ka(t),T(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){ue(this,0,e),e.forEach((r,i)=>{J(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Yw(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Qw=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let f,a=null,l=null;return null!==r&&(Yw(r)?(a=null!=r.validators?r.validators:null,l=null!=r.asyncValidators?r.asyncValidators:null,f=null!=r.updateOn?r.updateOn:void 0):(a=null!=r.validator?r.validator:null,l=null!=r.asyncValidator?r.asyncValidator:null)),new ze(i,{asyncValidators:l,updateOn:f,validators:a})}control(t,r,i){let a={};return this.useNonNullable?(Yw(r)?a=r:(a.validators=r,a.asyncValidators=i),new Dd(t,{...a,nonNullable:!0})):new Dd(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new Kw(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof Dd||t instanceof Ne?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:Zw}),n})();function At(...n){const e=(0,ys.yG)(n);return(0,Tn.D)(n,e)}var ki=L(5577),bg=L(576);function xd(n,e){return(0,bg.m)(e)?(0,ki.z)(n,e,1):(0,ki.z)(n,1)}var vi=L(4482);function Vn(n,e){return(0,vi.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}class Tg{}class ny{}class Ys{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ys?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ys;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ys?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(f=>-1===a.indexOf(f)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class wi{encodeKey(e){return Xw(e)}encodeValue(e){return Xw(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ry=/%(\d[a-f0-9])/gi,Zb={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Xw(n){return encodeURIComponent(n).replace(ry,(e,t)=>Zb[t]??e)}function ff(n){return`${n}`}class Ju{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wi,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function hf(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,f]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(f),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ff):[ff(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ju({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ff(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ff(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Yb{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function tE(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function nE(n){return typeof Blob<"u"&&n instanceof Blob}function rE(n){return typeof FormData<"u"&&n instanceof FormData}class pf{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function eE(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Ys),this.context||(this.context=new Yb),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+l}}else this.params=new Ju,this.urlWithParams=t}serializeBody(){return null===this.body?null:tE(this.body)||nE(this.body)||rE(this.body)||function Qb(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ju?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||rE(this.body)?null:nE(this.body)?this.body.type||null:tE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ju?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,a=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,v=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((S,P)=>S.set(P,e.setHeaders[P]),m)),e.setParams&&(v=Object.keys(e.setParams).reduce((S,P)=>S.set(P,e.setParams[P]),v)),new pf(t,r,a,{params:v,headers:m,context:b,reportProgress:f,responseType:i,withCredentials:l})}}var Mr=(()=>((Mr=Mr||{})[Mr.Sent=0]="Sent",Mr[Mr.UploadProgress=1]="UploadProgress",Mr[Mr.ResponseHeader=2]="ResponseHeader",Mr[Mr.DownloadProgress=3]="DownloadProgress",Mr[Mr.Response=4]="Response",Mr[Mr.User=5]="User",Mr))();class Xu{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ys,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Ao extends Xu{constructor(e={}){super(e),this.type=Mr.ResponseHeader}clone(e={}){return new Ao({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ag extends Xu{constructor(e={}){super(e),this.type=Mr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ag({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Jb extends Xu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function iE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Md=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof pf)a=t;else{let m,v;m=i.headers instanceof Ys?i.headers:new Ys(i.headers),i.params&&(v=i.params instanceof Ju?i.params:new Ju({fromObject:i.params})),a=new pf(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:v,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=At(a).pipe(xd(m=>this.handler.handle(m)));if(t instanceof pf||"events"===i.observe)return l;const f=l.pipe(Vn(m=>m instanceof Ag));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return f.pipe((0,dt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return f.pipe((0,dt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return f.pipe((0,dt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return f.pipe((0,dt.U)(m=>m.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ju).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,iE(i,r))}post(t,r,i={}){return this.request("POST",t,iE(i,r))}put(t,r,i={}){return this.request("PUT",t,iE(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Tg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Xb{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const So=new d.OlP("HTTP_INTERCEPTORS");let iy=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const uE=/^\)\]\}',?\n/;let sc=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new un.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,Q)=>i.setRequestHeader(U,Q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const a=t.serializeBody();let l=null;const f=()=>{if(null!==l)return l;const U=i.statusText||"OK",Q=new Ys(i.getAllResponseHeaders()),be=function oN(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Ao({headers:Q,status:i.status,statusText:U,url:be}),l},m=()=>{let{headers:U,status:Q,statusText:be,url:$e}=f(),ct=null;204!==Q&&(ct=typeof i.response>"u"?i.responseText:i.response),0===Q&&(Q=ct?200:0);let Ct=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof ct){const Lt=ct;ct=ct.replace(uE,"");try{ct=""!==ct?JSON.parse(ct):null}catch(kt){ct=Lt,Ct&&(Ct=!1,ct={error:kt,text:ct})}}Ct?(r.next(new Ag({body:ct,headers:U,status:Q,statusText:be,url:$e||void 0})),r.complete()):r.error(new Jb({error:ct,headers:U,status:Q,statusText:be,url:$e||void 0}))},v=U=>{const{url:Q}=f(),be=new Jb({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:Q||void 0});r.error(be)};let b=!1;const S=U=>{b||(r.next(f()),b=!0);let Q={type:Mr.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(Q.total=U.total),"text"===t.responseType&&!!i.responseText&&(Q.partialText=i.responseText),r.next(Q)},P=U=>{let Q={type:Mr.UploadProgress,loaded:U.loaded};U.lengthComputable&&(Q.total=U.total),r.next(Q)};return i.addEventListener("load",m),i.addEventListener("error",v),i.addEventListener("timeout",v),i.addEventListener("abort",v),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:Mr.Sent}),()=>{i.removeEventListener("error",v),i.removeEventListener("abort",v),i.removeEventListener("load",m),i.removeEventListener("timeout",v),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const gf=new d.OlP("XSRF_COOKIE_NAME"),xg=new d.OlP("XSRF_HEADER_NAME");class lE{}let sy=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Eu(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(d.Lbi),d.LFG(gf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),oy=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(lE),d.LFG(xg))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),nT=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(So,[]);this.chain=r.reduceRight((i,a)=>new Xb(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ny),d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),rT=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:oy,useClass:iy}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:gf,useValue:t.cookieName}:[],t.headerName?{provide:xg,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[oy,{provide:So,useExisting:oy,multi:!0},{provide:lE,useClass:sy},{provide:gf,useValue:"XSRF-TOKEN"},{provide:xg,useValue:"X-XSRF-TOKEN"}]}),n})(),cE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Md,{provide:Tg,useClass:nT},sc,{provide:ny,useExisting:sc}],imports:[rT.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})();var sa=L(7579);class Cs extends sa.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Rd=L(4671),sT=L(9672);function ay(...n){const e=(0,ys.yG)(n),t=(0,ys.jO)(n),{args:r,keys:i}=Hu(n);if(0===r.length)return(0,Tn.D)([],e);const a=new un.y(function hE(n,e,t=Rd.y){return r=>{el(e,()=>{const{length:i}=n,a=new Array(i);let l=i,f=i;for(let m=0;m<i;m++)el(e,()=>{const v=(0,Tn.D)(n[m],e);let b=!1;v.subscribe((0,Fn.x)(r,S=>{a[m]=S,b||(b=!0,f--),f||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>vs(i,l):Rd.y));return t?a.pipe(yd(t)):a}function el(n,e,t){n?(0,sT.f)(t,n,e):e()}function Nd(n,e){const t=(0,bg.m)(n)?n:()=>n,r=i=>i.error(t());return new un.y(e?i=>e.schedule(r,0,i):r)}const mf=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Mg=L(8189);function uy(...n){return function Rg(){return(0,Mg.J)(1)}()((0,Tn.D)(n,(0,ys.yG)(n)))}function ly(n){return new un.y(e=>{(0,_s.Xf)(n()).subscribe(e)})}var tl=L(515),cy=L(727);function _f(){return(0,vi.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dy extends un.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,vi.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cy.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cy.w0.EMPTY)}return e}refCount(){return _f()(this)}}function Hr(n,e){return(0,vi.e)((t,r)=>{let i=null,a=0,l=!1;const f=()=>l&&!i&&r.complete();t.subscribe((0,Fn.x)(r,m=>{i?.unsubscribe();let v=0;const b=a++;(0,_s.Xf)(n(m,b)).subscribe(i=(0,Fn.x)(r,S=>r.next(e?e(m,S,b,v++):S),()=>{i=null,f()}))},()=>{l=!0,f()}))})}function nl(n){return n<=0?()=>tl.E:(0,vi.e)((e,t)=>{let r=0;e.subscribe((0,Fn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function yf(...n){const e=(0,ys.yG)(n);return(0,vi.e)((t,r)=>{(e?uy(n,t,e):uy(n,t)).subscribe(r)})}function hy(n,e,t,r,i){return(a,l)=>{let f=t,m=e,v=0;a.subscribe((0,Fn.x)(l,b=>{const S=v++;m=f?n(m,b,S):(f=!0,b),r&&l.next(m)},i&&(()=>{f&&l.next(m),l.complete()})))}}function rl(n,e){return(0,vi.e)(hy(n,e,arguments.length>=2,!0))}function eu(n){return(0,vi.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,l=>{a=(0,_s.Xf)(n(l,eu(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function oc(n){return n<=0?()=>tl.E:(0,vi.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pE(n=gE){return(0,vi.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gE(){return new mf}function fy(n){return(0,vi.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function tu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vn((i,a)=>n(i,a,r)):Rd.y,nl(1),t?fy(e):pE(()=>new mf))}var Kr=L(8505);function _E(n){return(0,vi.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}class oa{constructor(e,t){this.id=e,this.url=t}}class py extends oa{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class il extends oa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ng extends oa{constructor(e,t,r){super(e,t),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yE extends oa{constructor(e,t,r){super(e,t),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xo extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aT extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vE extends oa{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class uT extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lT extends oa{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cT{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dT{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wE{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hT{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fT{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ot{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class IE{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Pd(n){return new IE(n)}const gy="Redirecting to ",my="ngNavigationCancelingError";function _y(n){const e=Error("NavigationCancelingError: "+(n||""));return e[my]=!0,e}function gT(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],f=n[a];if(l.startsWith(":"))i[l.substring(1)]=f;else if(l!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function nu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Pg(n[i],e[i]))return!1;return!0}function Pg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function yy(n){return Array.prototype.concat.apply([],n)}function DE(n){return n.length>0?n[n.length-1]:null}function Yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function aa(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Tn.D)(Promise.resolve(n)):At(n)}const vy={exact:function TE(n,e,t){if(!sl(n.segments,e.segments)||!uc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!TE(n.children[r],e.children[r],t))return!1;return!0},subset:Cy},wy={exact:function ac(n,e){return nu(n,e)},subset:function Iy(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Pg(n[t],e[t]))},ignored:()=>!0};function Ey(n,e,t){return vy[t.paths](n.root,e.root,t.matrixParams)&&wy[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Cy(n,e,t){return Og(n,e,e.segments,t)}function Og(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!sl(i,t)||e.hasChildren()||!uc(i,t,r))}if(n.segments.length===t.length){if(!sl(n.segments,t)||!uc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Cy(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(sl(n.segments,i)&&uc(n.segments,i,r)&&n.children[Ht])&&Og(n.children[Ht],e,a,r)}}function uc(n,e,t){return e.every((r,i)=>wy[t](n[i].parameters,r.parameters))}class lc{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return xE.serialize(this)}}class zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ru(this)}}class cc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Pd(this.parameters)),this._parameterMap}toString(){return Mo(this)}}function sl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class AE{}class SE{parse(e){const t=new RE(e);return new lc(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${vf(e.root,!0)}`,r=function Ty(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${kg(t)}=${kg(i)}`).join("&"):`${kg(t)}=${kg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function vT(n){return encodeURI(n)}(e.fragment)}`:""}`}}const xE=new SE;function ru(n){return n.segments.map(e=>Mo(e)).join("/")}function vf(n,e){if(!n.hasChildren())return ru(n);if(e){const t=n.children[Ht]?vf(n.children[Ht],!1):"",r=[];return Yr(n.children,(i,a)=>{a!==Ht&&r.push(`${a}:${vf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Dy(n,e){let t=[];return Yr(n.children,(r,i)=>{i===Ht&&(t=t.concat(e(r,i)))}),Yr(n.children,(r,i)=>{i!==Ht&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ht?[vf(n.children[Ht],!1)]:[`${i}:${vf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${ru(n)}/${t[0]}`:`${ru(n)}/(${t.join("//")})`}}function ME(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kg(n){return ME(n).replace(/%3B/gi,";")}function wf(n){return ME(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ef(n){return decodeURIComponent(n)}function by(n){return Ef(n.replace(/\+/g,"%20"))}function Mo(n){return`${wf(n.path)}${function wT(n){return Object.keys(n).map(e=>`;${wf(e)}=${wf(n[e])}`).join("")}(n.parameters)}`}const Ay=/^[^\/()?;=#]+/;function Fg(n){const e=n.match(Ay);return e?e[0]:""}const lN=/^[^=?&#]+/,dN=/^[^&#]+/;class RE{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new zt([],{}):new zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new zt(e,t)),r}parseSegment(){const e=Fg(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new cc(Ef(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Fg(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Fg(this.remaining);i&&(r=i,this.capture(r))}e[Ef(t)]=Ef(r)}parseQueryParam(e){const t=function cN(n){const e=n.match(lN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function ET(n){const e=n.match(dN);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=by(t),a=by(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fg(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Ht);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Ht]:new zt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}class IT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ol(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ol(e,this._root).map(t=>t.value)}}function Sy(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sy(n,t);if(r)return r}return null}function ol(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ol(n,t);if(r.length)return r.unshift(e),r}return[]}class iu{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function dc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class If extends IT{constructor(e,t){super(e),this.snapshot=t,Vg(this,e)}toString(){return this.snapshot.toString()}}function NE(n,e){const t=function PE(n,e){const l=new Lg([],{},{},"",{},Ht,e,null,n.root,-1,{});return new kE("",new iu(l,[]))}(n,e),r=new Cs([new cc("",{})]),i=new Cs({}),a=new Cs({}),l=new Cs({}),f=new Cs(""),m=new su(r,i,l,f,a,Ht,e,t.root);return m.snapshot=t.root,new If(new iu(m,[]),t)}class su{constructor(e,t,r,i,a,l,f,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,dt.U)(e=>Pd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,dt.U)(e=>Pd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OE(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function CT(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Lg{constructor(e,t,r,i,a,l,f,m,v,b,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=f,this.routeConfig=m,this._urlSegment=v,this._lastPathIndex=b,this._correctedLastPathIndex=P??b,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Pd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Pd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kE extends IT{constructor(e,t){super(t),this.url=e,Vg(this,t)}toString(){return FE(this._root)}}function Vg(n,e){e.value._routerState=n,e.children.forEach(t=>Vg(n,t))}function FE(n){const e=n.children.length>0?` { ${n.children.map(FE).join(", ")} } `:"";return`${n.value}${e}`}function Ug(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,nu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),nu(e.params,t.params)||n.params.next(t.params),function mT(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!nu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),nu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bg(n,e){const t=nu(n.params,e.params)&&function Od(n,e){return sl(n,e)&&n.every((t,r)=>nu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Bg(n.parent,e.parent))}function jg(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function My(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return jg(n,r,i);return jg(n,r)})}(n,e,t);return new iu(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(f=>jg(n,f)),l}}const r=function DT(n){return new su(new Cs(n.url),new Cs(n.params),new Cs(n.queryParams),new Cs(n.fragment),new Cs(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>jg(n,a));return new iu(r,i)}}function Cf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Df(n){return"object"==typeof n&&null!=n&&n.outlets}function Ry(n,e,t,r,i){let a={};if(r&&Yr(r,(f,m)=>{a[m]=Array.isArray(f)?f.map(v=>`${v}`):`${f}`}),n===e)return new lc(t,a,i);const l=$g(n,e,t);return new lc(l,a,i)}function $g(n,e,t){const r={};return Yr(n.children,(i,a)=>{r[a]=i===e?t:$g(i,e,t)}),new zt(n.segments,r)}class bT{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cf(r[0]))throw new d.vHH(4003,false);const i=r.find(Df);if(i&&i!==DE(r))throw new d.vHH(4004,false)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function TT(n,e,t){if(n||(n=new zt([],{})),0===n.segments.length&&n.hasChildren())return Ny(n,e,t);const r=function VE(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],f=t[r];if(Df(f))break;const m=`${f}`,v=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&v&&"object"==typeof v&&void 0===v.outlets){if(!Py(m,v,l))return a;r+=2}else{if(!Py(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new zt(n.segments.slice(0,r.pathIndex),{});return a.children[Ht]=new zt(n.segments.slice(r.pathIndex),n.children),Ny(a,0,i)}return r.match&&0===i.length?new zt(n.segments,{}):r.match&&!n.hasChildren()?Tf(n,e,t):r.match?Ny(n,0,i):Tf(n,e,t)}function Ny(n,e,t){if(0===t.length)return new zt(n.segments,{});{const r=function gN(n){return Df(n[0])?n[0].outlets:{[Ht]:n}}(t),i={};return Yr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=TT(n.children[l],e,a))}),Yr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new zt(n.segments,i)}}function Tf(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Df(a)){const m=UE(a.outlets);return new zt(r,m)}if(0===i&&Cf(t[0])){r.push(new cc(n.segments[e].path,BE(t[0]))),i++;continue}const l=Df(a)?a.outlets[Ht]:`${a}`,f=i<t.length-1?t[i+1]:null;l&&f&&Cf(f)?(r.push(new cc(l,BE(f))),i+=2):(r.push(new cc(l,{})),i++)}return new zt(r,{})}function UE(n){const e={};return Yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Tf(new zt([],{}),0,t))}),e}function BE(n){const e={};return Yr(n,(t,r)=>e[r]=`${t}`),e}function Py(n,e,t){return n==t.path&&nu(e,t.parameters)}class jE{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new al,this.attachRef=null}}class al{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jE,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const Ki=!1;let Hg=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||Ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,Ki);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,Ki);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,Ki);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,Ki);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,m=new AT(t,f,i.injector);if(r&&function Oy(n){return!!n.resolveComponentFactory}(r)){const v=r.resolveComponentFactory(l);this.activated=i.createComponent(v,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(al),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class AT{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===su?this.route:e===al?this.childContexts:this.parent.get(e,t)}}let ua=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Hg],encapsulation:2}),n})();function Gg(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Af(n){const e=n.children&&n.children.map(Af),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=ua),t}function Yi(n){return n.outlet||Ht}function MT(n,e){const t=n.filter(r=>Yi(r)===e);return t.push(...n.filter(r=>Yi(r)!==e)),t}function GE(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class NT{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ug(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=dc(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Yr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=dc(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=dc(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=dc(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new pT(a.value.snapshot))}),e.children.length&&this.forwardEvent(new hT(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Ug(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(f.contexts),l.attachRef=f.componentRef,l.route=f.route.value,l.outlet&&l.outlet.attach(f.componentRef,f.route.value),Ug(f.route.value),this.activateChildRoutes(e,null,l.children)}else{const f=GE(i.snapshot),m=f?.get(d._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=f,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}function qg(n){return"function"==typeof n}function Fd(n){return n instanceof lc}const Sf=Symbol("INITIAL_VALUE");function hc(){return Hr(n=>ay(n.map(e=>e.pipe(nl(1),yf(Sf)))).pipe(rl((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==Sf?i:(a===Sf&&(r=!0),r||!1!==a&&l!==t.length-1&&!Fd(a)?i:a),e)},Sf),Vn(e=>e!==Sf),(0,dt.U)(e=>Fd(e)?e:!0===e),nl(1)))}const OT={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...OT}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gT)(t,n,e);if(!i)return{...OT};const a={};Yr(i.posParams,(f,m)=>{a[m]=f.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Ly(n,e,t,r,i="corrected"){if(t.length>0&&function vN(n,e,t){return t.some(r=>Vy(n,e,r)&&Yi(r)!==Ht)}(n,t,r)){const l=new zt(e,function yN(n,e,t,r){const i={};i[Ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Yi(a)!==Ht){const l=new zt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Yi(a)]=l}return i}(n,e,r,new zt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function wN(n,e,t){return t.some(r=>Vy(n,e,r))}(n,t,r)){const l=new zt(n.segments,function _N(n,e,t,r,i,a){const l={};for(const f of r)if(Vy(n,t,f)&&!i[Yi(f)]){const m=new zt([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Yi(f)]=m}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new zt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Vy(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function kT(n,e,t,r){return!!(Yi(n)===r||r!==Ht&&Vy(e,t,n))&&("**"===n.path||Fy(e,n,t).matched)}function FT(n,e,t){return 0===e.length&&!n.children[t]}const Ro=!1;class Ld{constructor(e){this.segmentGroup=e||null}}class ZE{constructor(e){this.urlTree=e}}function Vd(n){return Nd(new Ld(n))}function Zg(n){return Nd(new ZE(n))}class ul{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=Ly(this.urlTree.root,[],[],this.config).segmentGroup,t=new zt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ht).pipe((0,dt.U)(a=>this.createUrlTree(By(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(eu(a=>{if(a instanceof ZE)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof Ld?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ht).pipe((0,dt.U)(i=>this.createUrlTree(By(i),e.queryParams,e.fragment))).pipe(eu(i=>{throw i instanceof Ld?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Ro)}createUrlTree(e,t,r){const i=e.segments.length>0?new zt([],{[Ht]:e}):e;return new lc(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,dt.U)(a=>new zt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Tn.D)(i).pipe(xd(a=>{const l=r.children[a],f=MT(t,a);return this.expandSegmentGroup(e,f,l,a).pipe((0,dt.U)(m=>({segment:m,outlet:a})))}),rl((a,l)=>(a[l.outlet]=l.segment,a),{}),function oT(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Vn((i,a)=>n(i,a,r)):Rd.y,oc(1),t?fy(e):pE(()=>new mf))}())}expandSegment(e,t,r,i,a,l){return(0,Tn.D)(r).pipe(xd(f=>this.expandSegmentAgainstRoute(e,t,r,f,i,a,l).pipe(eu(v=>{if(v instanceof Ld)return At(null);throw v}))),tu(f=>!!f),eu((f,m)=>{if(f instanceof mf||"EmptyError"===f.name)return FT(t,i,a)?At(new zt([],{})):Vd(t);throw f}))}expandSegmentAgainstRoute(e,t,r,i,a,l,f){return kT(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):f&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Vd(t):Vd(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Zg(a):this.lineralizeSegments(r,a).pipe((0,ki.z)(l=>{const f=new zt(l,{});return this.expandSegment(e,f,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:f,consumedSegments:m,remainingSegments:v,positionalParamSegments:b}=Fy(t,i,a);if(!f)return Vd(t);const S=this.applyRedirectCommands(m,i.redirectTo,b);return i.redirectTo.startsWith("/")?Zg(S):this.lineralizeSegments(i,S).pipe((0,ki.z)(P=>this.expandSegment(e,t,r,P.concat(v),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return e=Gg(r,e),r.loadChildren?(r._loadedRoutes?At({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,dt.U)(S=>(r._loadedRoutes=S.routes,r._loadedInjector=S.injector,new zt(i,{})))):At(new zt(i,{}));const{matched:l,consumedSegments:f,remainingSegments:m}=Fy(t,r,i);return l?(e=Gg(r,e),this.getChildConfig(e,r,i).pipe((0,ki.z)(b=>{const S=b.injector??e,P=b.routes,{segmentGroup:U,slicedSegments:Q}=Ly(t,f,m,P),be=new zt(U.segments,U.children);if(0===Q.length&&be.hasChildren())return this.expandChildren(S,P,be).pipe((0,dt.U)(Lt=>new zt(f,Lt)));if(0===P.length&&0===Q.length)return At(new zt(f,{}));const $e=Yi(r)===a;return this.expandSegment(S,be,P,Q,$e?Ht:a,!0).pipe((0,dt.U)(Ct=>new zt(f.concat(Ct.segments),Ct.children)))}))):Vd(t)}getChildConfig(e,t,r){return t.children?At({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?At({routes:t._loadedRoutes,injector:t._loadedInjector}):this.runCanLoadGuards(e,t,r).pipe((0,ki.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Kr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function Uy(n){return Nd(_y(Ro))}())):At({routes:[],injector:e})}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?At(i.map(l=>{const f=e.get(l);return aa(function PT(n){return n&&qg(n.canLoad)}(f)?f.canLoad(t,r):f(t,r))})).pipe(hc(),(0,Kr.b)(l=>{if(!Fd(l))return;const f=_y(gy+this.urlSerializer.serialize(l));throw f.url=l,f}),(0,dt.U)(l=>!0===l)):At(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return At(r);if(i.numberOfChildren>1||!i.children[Ht])return Nd(new d.vHH(4e3,Ro));i=i.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new lc(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Yr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const f=i.substring(1);r[a]=t[f]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Yr(t.children,(f,m)=>{l[m]=this.createSegmentGroup(e,f,r,i)}),new zt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Ro);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function By(n){const e={};for(const r of Object.keys(n.children)){const a=By(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function YE(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new zt(n.segments.concat(e.segments),e.children)}return n}(new zt(n.segments,e))}class QE{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xf{constructor(e,t){this.component=e,this.route=t}}function VT(n,e,t){const r=n._root;return la(r,e?e._root:null,t,[r.value])}function fc(n,e,t){return(GE(e)??t).get(n)}function la(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=dc(e);return n.children.forEach(l=>{(function $y(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function Ud(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!sl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!sl(n.url,e.url)||!nu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bg(n,e)||!nu(n.queryParams,e.queryParams);default:return!Bg(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new QE(r)):(a.data=l.data,a._resolvedData=l._resolvedData),la(n,e,a.component?f?f.children:null:t,r,i),m&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new xf(f.outlet.component,l))}else l&&ll(e,f,i),i.canActivateChecks.push(new QE(r)),la(n,null,a.component?f?f.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Yr(a,(l,f)=>ll(l,t.getContext(f),i)),i}function ll(n,e,t){const r=dc(n),i=n.value;Yr(r,(a,l)=>{ll(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new xf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class EN{}function tI(n){return new un.y(e=>e.error(n))}class jT{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Ly(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ht);if(null===t)return null;const r=new Lg([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new iu(r,t),a=new kE(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=OE(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],f=MT(e,a),m=this.processSegmentGroup(f,l,a);if(null===m)return null;r.push(...m)}const i=Qi(r);return function rI(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return FT(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!kT(e,t,r,i))return null;let a,l=[],f=[];if("**"===e.path){const U=r.length>0?DE(r).parameters:{},Q=GT(t)+r.length;a=new Lg(r,U,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kg(e),Yi(e),e.component??e._loadedComponent??null,e,iI(t),Q,qy(e),Q)}else{const U=Fy(t,e,r);if(!U.matched)return null;l=U.consumedSegments,f=U.remainingSegments;const Q=GT(t)+l.length;a=new Lg(l,U.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Kg(e),Yi(e),e.component??e._loadedComponent??null,e,iI(t),Q,qy(e),Q)}const m=function $T(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(e),{segmentGroup:v,slicedSegments:b}=Ly(t,l,f,m.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===b.length&&v.hasChildren()){const U=this.processChildren(m,v);return null===U?null:[new iu(a,U)]}if(0===m.length&&0===b.length)return[new iu(a,[])];const S=Yi(e)===i,P=this.processSegment(m,v,b,S?Ht:i);return null===P?null:[new iu(a,P)]}}function HT(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Qi(n){const e=[],t=new Set;for(const r of n){if(!HT(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Qi(r.children);e.push(new iu(r.value,i))}return e.filter(r=>!t.has(r))}function iI(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function GT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Kg(n){return n.data||{}}function qy(n){return n.resolve||{}}const Zy=Symbol("RouteTitle");function uI(n){return"string"==typeof n.title||null===n.title}function Yg(n){return Hr(e=>{const t=n(e);return t?(0,Tn.D)(t).pipe((0,dt.U)(()=>e)):At(e)})}class ca extends class KT{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ky=new d.OlP("ROUTES");let Yy=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return At(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=aa(t.loadComponent()).pipe((0,Kr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),_E(()=>{this.componentLoaders.delete(t)})),i=new dy(r,()=>new sa.x).pipe(_f());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return At({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,dt.U)(f=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,v,b=!1;Array.isArray(f)?v=f:(m=f.create(t).injector,v=yy(m.get(Ky,[],d.XFs.Self|d.XFs.Optional)));return{routes:v.map(Af),injector:m}}),_E(()=>{this.childrenLoaders.delete(r)})),l=new dy(a,()=>new sa.x).pipe(_f());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return aa(t()).pipe((0,ki.z)(r=>r instanceof d.YKP||Array.isArray(r)?At(r):(0,Tn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class cI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function YT(n){throw n}function QT(n,e,t){return e.parse("/")}const Qy={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rr=(()=>{class n{constructor(t,r,i,a,l,f,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new sa.x,this.errorHandler=YT,this.malformedUriErrorHandler=QT,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>At(void 0),this.urlHandlingStrategy=new cI,this.routeReuseStrategy=new ca,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(Yy),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new dT(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new cT(P)),this.ngModule=l.get(d.h0i),this.console=l.get(d.c2e);const S=l.get(d.R0b);this.isNgZoneEnabled=S instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function yT(){return new lc(new zt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NE(this.currentUrlTree,this.rootComponentType),this.transitions=new Cs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Vn(i=>0!==i.id),(0,dt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hr(i=>{let a=!1,l=!1;return At(i).pipe((0,Kr.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hr(f=>{const m=this.browserUrlTree.toString(),v=!this.navigated||f.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return Xg(f.source)&&(this.browserUrlTree=f.extractedUrl),At(f).pipe(Hr(S=>{const P=this.transitions.getValue();return r.next(new py(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?tl.E:Promise.resolve(S)}),function jy(n,e,t,r){return Hr(i=>function LT(n,e,t,r,i){return new ul(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,dt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects}}),function WT(n,e,t,r,i){return(0,ki.z)(a=>function nI(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new jT(n,e,t,r,i,a).recognize();return null===l?tI(new EN):At(l)}catch(l){return tI(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,dt.U)(l=>({...a,targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new xo(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:U,source:Q,restoredState:be,extras:$e}=f,ct=new py(P,this.serializeUrl(U),Q,be);r.next(ct);const Ct=NE(U,this.rootComponentType).snapshot;return At({...f,targetSnapshot:Ct,urlAfterRedirects:U,extras:{...$e,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=f.rawUrl,f.resolve(null),tl.E}),(0,Kr.b)(f=>{const m=new aT(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(m)}),(0,dt.U)(f=>({...f,guards:VT(f.targetSnapshot,f.currentSnapshot,this.rootContexts)})),function Mf(n,e){return(0,ki.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?At({...t,guardsResult:!0}):function BT(n,e,t,r){return(0,Tn.D)(n).pipe((0,ki.z)(i=>function Wy(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?At(a.map(f=>{const m=fc(f,e,i);return aa(function qE(n){return n&&qg(n.canDeactivate)}(m)?m.canDeactivate(n,e,t,r):m(n,e,t,r)).pipe(tu())})).pipe(hc()):At(!0)}(i.component,i.route,t,e,r)),tu(i=>!0!==i,!0))}(l,r,i,n).pipe((0,ki.z)(f=>f&&function WE(n){return"boolean"==typeof n}(f)?function JE(n,e,t,r){return(0,Tn.D)(e).pipe(xd(i=>uy(function Hy(n,e){return null!==n&&e&&e(new wE(n)),At(!0)}(i.route.parent,r),function XE(n,e){return null!==n&&e&&e(new fT(n)),At(!0)}(i.route,r),function eI(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function UT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ly(()=>At(l.guards.map(m=>{const v=fc(m,l.node,t);return aa(function zE(n){return n&&qg(n.canActivateChild)}(v)?v.canActivateChild(r,n):v(r,n)).pipe(tu())})).pipe(hc())));return At(a).pipe(hc())}(n,i.path,t),function Gy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return At(!0);const i=r.map(a=>ly(()=>{const l=fc(a,e,t);return aa(function mN(n){return n&&qg(n.canActivate)}(l)?l.canActivate(e,n):l(e,n)).pipe(tu())}));return At(i).pipe(hc())}(n,i.route,t))),tu(i=>!0!==i,!0))}(r,a,n,e):At(f)),(0,dt.U)(f=>({...t,guardsResult:f})))})}(this.ngModule.injector,f=>this.triggerEvent(f)),(0,Kr.b)(f=>{if(Fd(f.guardsResult)){const v=_y(`Redirecting to "${this.serializeUrl(f.guardsResult)}"`);throw v.url=f.guardsResult,v}const m=new vE(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.triggerEvent(m)}),Vn(f=>!!f.guardsResult||(this.restoreHistory(f),this.cancelNavigationTransition(f,""),!1)),Yg(f=>{if(f.guards.canActivateChecks.length)return At(f).pipe((0,Kr.b)(m=>{const v=new uT(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}),Hr(m=>{let v=!1;return At(m).pipe(function zT(n,e){return(0,ki.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return At(t);let a=0;return(0,Tn.D)(i).pipe(xd(l=>function oI(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!uI(i)&&(a[Zy]=i.title),function qT(n,e,t,r){const i=function aI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return At({});const a={};return(0,Tn.D)(i).pipe((0,ki.z)(l=>function ZT(n,e,t,r){const i=fc(n,e,r);return aa(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe(tu(),(0,Kr.b)(f=>{a[l]=f}))),oc(1),function mE(n){return(0,dt.U)(()=>n)}(a),eu(l=>l instanceof mf?tl.E:Nd(l)))}(a,n,e,r).pipe((0,dt.U)(l=>(n._resolvedData=l,n.data=OE(n,t).resolve,i&&uI(i)&&(n.data[Zy]=i.title),null)))}(l.route,r,n,e)),(0,Kr.b)(()=>a++),oc(1),(0,ki.z)(l=>a===i.length?At(t):tl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Kr.b)(m=>{const v=new lT(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(v)}))}),Yg(f=>{const m=v=>{const b=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(v.routeConfig).pipe((0,Kr.b)(S=>{v.component=S}),(0,dt.U)(()=>{})));for(const S of v.children)b.push(...m(S));return b};return ay(m(f.targetSnapshot.root)).pipe(fy(),nl(1))}),Yg(()=>this.afterPreactivation()),(0,dt.U)(f=>{const m=function xy(n,e,t){const r=jg(n,e._root,t?t._root:void 0);return new If(r,e)}(this.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return{...f,targetRouterState:m}}),(0,Kr.b)(f=>{this.currentUrlTree=f.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl),this.routerState=f.targetRouterState,"deferred"===this.urlUpdateStrategy&&(f.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,f),this.browserUrlTree=f.urlAfterRedirects)}),((n,e,t)=>(0,dt.U)(r=>(new NT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,f=>this.triggerEvent(f)),(0,Kr.b)({next(){a=!0},complete(){a=!0}}),_E(()=>{a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),eu(f=>{if(l=!0,function CE(n){return n&&n[my]}(f)){const m=Fd(f.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const v=new Ng(i.id,this.serializeUrl(i.extractedUrl),f.message);if(r.next(v),m){const b=this.urlHandlingStrategy.merge(f.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Xg(i.source)};this.scheduleNavigation(b,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new yE(i.id,this.serializeUrl(i.extractedUrl),f);r.next(m);try{i.resolve(this.errorHandler(f))}catch(v){i.reject(v)}}return tl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const f={...a};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(i.state=f)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Af),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:f,preserveFragment:m}=r,v=i||this.routerState.root,b=m?this.currentUrlTree.fragment:l;let S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function kd(n,e,t,r,i){if(0===t.length)return Ry(e.root,e.root,e.root,r,i);const a=function hN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new bT(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Yr(a.outlets,(m,v)=>{f[v]="string"==typeof m?m.split("/"):m}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((f,m)=>{0==m&&"."===f||(0==m&&""===f?t=!0:".."===f?e++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new bT(t,e,r)}(t);return a.toRoot()?Ry(e.root,e.root,new zt([],{}),r,i):function l(m){const v=function fN(n,e,t,r){return n.isAbsolute?new bf(e.root,!0,0):-1===r?new bf(t,t===e.root,0):function pN(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new bf(r,!1,i-a)}(t,r+(Cf(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,m),b=v.processChildren?Ny(v.segmentGroup,v.index,a.commands):TT(v.segmentGroup,v.index,a.commands);return Ry(e.root,v.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}(v,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Fd(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Jg(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Qy}:!1===r?{...JT}:r,Fd(t))return Ey(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Ey(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new il(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let f,m,v;l?(f=l.resolve,m=l.reject,v=l.promise):v=new Promise((P,U)=>{f=P,m=U});const b=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:b,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:f,reject:m,promise:v,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),v.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Ng(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Xg(n){return"imperative"!==n}class XT{buildTitle(e){let t,r=e.root;for(;void 0!==r;)t=this.getResolvedTitleForRoute(r)??t,r=r.children.find(i=>i.outlet===Ht);return t}getResolvedTitleForRoute(e){return e.data[Zy]}}let DN=(()=>{class n extends XT{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Lu))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tm{}let ev=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Vn(t=>t instanceof il),xd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,d.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,f=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return(0,Tn.D)(i).pipe((0,Mg.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):At(null);const a=i.pipe((0,ki.z)(l=>null===l?At(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Tn.D)([a,l]).pipe((0,Mg.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Rr),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(tm),d.LFG(Yy))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const tv=new d.OlP("");let fI=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof py?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof il&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ot&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ot(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const No=new d.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),Rf=new d.OlP("ROUTER_FORROOT_GUARD"),tA=new d.OlP(""),nA=[xe,{provide:AE,useClass:SE},{provide:Rr,useFactory:function rv(n,e,t,r,i,a,l={},f,m,v,b){const S=new Rr(null,n,e,t,r,i,yy(a));return v&&(S.urlHandlingStrategy=v),b&&(S.routeReuseStrategy=b),S.titleStrategy=m??f,function sA(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S},deps:[AE,al,xe,d.zs3,d.Sil,Ky,No,DN,[XT,new d.FiY],[class CN{},new d.FiY],[class lI{},new d.FiY]]},al,{provide:su,useFactory:function oA(n){return n.routerState.root},deps:[Rr]},Yy];function rA(){return new d.PXZ("Router",Rr)}let pI=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[nA,[],mI(t),{provide:Rf,useFactory:nv,deps:[[Rr,new d.FiY,new d.tp0]]},{provide:No,useValue:r||{}},r?.useHash?{provide:ge,useClass:Fe}:{provide:ge,useClass:Ze},{provide:tv,useFactory:()=>{const n=(0,d.f3M)(Rr),e=(0,d.f3M)(xa),t=(0,d.f3M)(No);return t.scrollOffset&&e.setOffset(t.scrollOffset),new fI(n,e,t)}},r?.preloadingStrategy?dA(r.preloadingStrategy):[],{provide:d.PXZ,multi:!0,useFactory:rA},r?.initialNavigation?uA(r):[],[{provide:_I,useFactory:aA},{provide:d.tb,multi:!0,useExisting:_I}]]}}static forChild(t){return{ngModule:n,providers:[mI(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Rf,8),d.LFG(Rr,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function nv(n){return"guarded"}function mI(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:Ky,multi:!0,useValue:n}]}function aA(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(Rr),i=n.get(Nf);null===n.get(yI,null,d.XFs.Optional)&&r.initialNavigation(),n.get(tA,null,d.XFs.Optional)?.setUpPreloading(),n.get(tv,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const _I=new d.OlP("");function uA(n){return["disabled"===n.initialNavigation?[{provide:d.ip1,multi:!0,useFactory:()=>{const n=(0,d.f3M)(Rr);return()=>{n.setUpLocationChangeListener()}}},{provide:yI,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:yI,useValue:"enabledBlocking"},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:n=>{const e=n.get(q,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const a=n.get(Rr),l=n.get(Nf);(function r(i){const a=n.get(Rr);a.events.pipe(Vn(l=>l instanceof il||l instanceof Ng||l instanceof yE),(0,dt.U)(l=>{if(l instanceof il)return!0;const f=a.navigationId!==l.id,m=l instanceof Ng&&-1!==l.reason.indexOf(gy);return!(!f&&!m)&&null}),Vn(l=>null!==l),nl(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),a.afterPreactivation=()=>(i(!0),t||l.closed?At(void 0):l),a.initialNavigation()}))}}]:[]]}const Nf=new d.OlP("",{factory:()=>new sa.x}),yI=new d.OlP("");function dA(n){return[ev,{provide:tA,useExisting:ev},{provide:tm,useExisting:n}]}let iv=(()=>{class n{constructor(t,r,i){this.formBuilder=t,this._http=r,this.router=i}ngOnInit(){this.loginForm=this.formBuilder.group({nickname:[""],password:[""]})}login(){this._http.get("http://localhost:3000/AdminProfile").subscribe(t=>{if(t.find(i=>i.nickname==this.loginForm.value.nickname&&i.password==this.loginForm.value.password)){const i=this.loginForm.value.nickname;n.key=!0,alert("\u05d4\u05ea\u05d7\u05d1\u05e8\u05ea \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.loginForm.reset(),this.router.navigate(["restaurant-admin/",i])}else alert("\u05de\u05e9\u05ea\u05de\u05e9 \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0")},t=>{alert("the user is log in")})}canActivate(){return!!n.key||(this.router.navigate(["admin-login"]),!1)}}return n.key=!1,n.\u0275fac=function(t){return new(t||n)(d.Y36(Qw),d.Y36(Md),d.Y36(Rr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:22,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"text-center"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","exampleInputNickname"],["formControlName","nickname","type","text","id","exampleInputNickname","aria-describedby","emailHelp","placeholder","\u05d4\u05db\u05e0\u05e1 \u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9",1,"form-control"],[1,"form-group"],["for","exampleInputPassword1"],["formControlName","password","type","password","id","exampleInputPassword1","placeholder","\u05d4\u05db\u05e0\u05e1 \u05e1\u05d9\u05e1\u05de\u05d4",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),d._uU(6,"\u05d4\u05ea\u05d7\u05d1\u05e8 \u05dc\u05de\u05e2\u05e8\u05db\u05ea \u05de\u05e1\u05e2\u05d3\u05d5\u05ea "),d.qZA(),d._UZ(7,"hr"),d.TgZ(8,"form",5),d.NdJ("ngSubmit",function(){return r.login()}),d.TgZ(9,"div",6)(10,"label",7),d._uU(11,"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),d.qZA(),d._UZ(12,"input",8),d.qZA(),d.TgZ(13,"div",9)(14,"label",10),d._uU(15,"\u05e1\u05d9\u05e1\u05de\u05d4"),d.qZA(),d._uU(16,"\xa0 "),d._UZ(17,"input",11),d._uU(18,"\xa0 "),d.qZA(),d.TgZ(19,"button",12),d._uU(20,"\u05d4\u05ea\u05d7\u05d1\u05e8"),d.qZA(),d._uU(21,"\xa0 "),d.qZA()()()()()()),2&t&&(d.xp6(8),d.Q6J("formGroup",r.loginForm))},dependencies:[Xa,Qo,Xo,Io,Te,Yu],styles:[".card[_ngcontent-%COMP%]{margin-top:15%;border:1px solid black;width:550px;padding:45px;position:absolute;top:2%;left:33%}"]}),n})();var ha=L(6457),O=L(2090),Sn=L(9681),ui=L(1877),Qs=L(4859),Ds=L(4986),tn=L(5813);function cl(){return(0,vi.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function gc(n,e=Rd.y){return n=n??Bd,(0,vi.e)((t,r)=>{let i,a=!0;t.subscribe((0,Fn.x)(r,l=>{const f=e(l);(a||!n(i,f))&&(a=!1,i=f,r.next(l))}))})}function Bd(n,e){return n===e}var lt,Nr=L(2011),mc=(L(5881),L(3942)),Ie=L(5861),jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ji={},nm=nm||{},Nt=jd||self;function kf(){}function rm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $d(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var im="closure_uid_"+(1e9*Math.random()>>>0),EI=0;function hA(n,e,t){return n.call.apply(n.bind,arguments)}function fA(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?hA:fA).apply(null,arguments)}function Ff(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ci(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),f=2;f<arguments.length;f++)l[f-2]=arguments[f];return e.prototype[i].apply(r,l)}}function ou(){this.s=this.s,this.o=this.o}var ov={};ou.prototype.s=!1,ou.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function wI(n){return Object.prototype.hasOwnProperty.call(n,im)&&n[im]||(n[im]=++EI)}(this);delete ov[n]}},ou.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const II=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Lf=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function om(n){return Array.prototype.concat.apply([],arguments)}function av(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Hd(n){return/^[\s\xa0]*$/.test(n)}var di,am=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Ei(n,e){return-1!=n.indexOf(e)}function um(n,e){return n<e?-1:n>e?1:0}e:{var uv=Nt.navigator;if(uv){var lv=uv.userAgent;if(lv){di=lv;break e}}di=""}function Vf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function cv(n){const e={};for(const t in n)e[t]=n[t];return e}var CI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<CI.length;a++)t=CI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function lm(n){return lm[" "](n),n}lm[" "]=kf;var Uf,n,bI=Ei(di,"Opera"),Gd=Ei(di,"Trident")||Ei(di,"MSIE"),TI=Ei(di,"Edge"),hv=TI||Gd,fv=Ei(di,"Gecko")&&!(Ei(di.toLowerCase(),"webkit")&&!Ei(di,"Edge"))&&!(Ei(di,"Trident")||Ei(di,"MSIE"))&&!Ei(di,"Edge"),pv=Ei(di.toLowerCase(),"webkit")&&!Ei(di,"Edge");function gv(){var n=Nt.document;return n?n.documentMode:void 0}e:{var cm="",dm=(n=di,fv?/rv:([^\);]+)(\)|;)/.exec(n):TI?/Edge\/([\d\.]+)/.exec(n):Gd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pv?/WebKit\/(\S+)/.exec(n):bI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(dm&&(cm=dm?dm[1]:""),Gd){var hm=gv();if(null!=hm&&hm>parseFloat(cm)){Uf=String(hm);break e}}Uf=cm}var AI={};var gA=Nt.document&&Gd&&(gv()||parseInt(Uf,10))||void 0,mA=function(){if(!Nt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Nt.addEventListener("test",kf,e),Nt.removeEventListener("test",kf,e)}catch{}return n}();function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Bf(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(fv){e:{try{lm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Gr[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Bf.Z.h.call(this)}}hi.prototype.h=function(){this.defaultPrevented=!0},ci(Bf,hi);var Gr={2:"touch",3:"pen",4:"mouse"};Bf.prototype.h=function(){Bf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Wd="closure_listenable_"+(1e6*Math.random()|0),_A=0;function yA(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++_A,this.ca=this.fa=!1}function jf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function pm(n){this.src=n,this.g={},this.h=0}function gm(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=II(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(jf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function mm(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}pm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=mm(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new yA(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var dl="closure_lm_"+(1e6*Math.random()|0),mv={};function xI(n,e,t,r,i){if(r&&r.once)return yv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)xI(n,e[a],t,r,i);return null}return t=Js(t),n&&n[Wd]?n.N(e,t,$d(r)?!!r.capture:!!r,i):_v(n,e,t,!1,r,i)}function _v(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=$d(i)?!!i.capture:!!i,f=vv(n);if(f||(n[dl]=f=new pm(n)),(t=f.add(e,t,r,l,a)).proxy)return t;if(r=function vA(){var e=fa;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mA||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(ym(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)yv(n,e[a],t,r,i);return null}return t=Js(t),n&&n[Wd]?n.O(e,t,$d(r)?!!r.capture:!!r,i):_v(n,e,t,!0,r,i)}function wA(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)wA(n,e[a],t,r,i);else r=$d(r)?!!r.capture:!!r,t=Js(t),n&&n[Wd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=mm(a=n.g[e],t,r,i))&&(jf(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=vv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=mm(e,t,r,i)),(t=-1<n?e[n]:null)&&_m(t))}function _m(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Wd])gm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(ym(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=vv(e))?(gm(t,n),0==t.h&&(t.src=null,e[dl]=null)):jf(n)}}}function ym(n){return n in mv?mv[n]:mv[n]="on"+n}function fa(n,e){if(n.ca)n=!0;else{e=new Bf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&_m(n),n=t.call(r,e)}return n}function vv(n){return(n=n[dl])instanceof pm?n:null}var wv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Js(n){return"function"==typeof n?n:(n[wv]||(n[wv]=function(e){return n.handleEvent(e)}),n[wv])}function xn(){ou.call(this),this.i=new pm(this),this.P=this,this.I=null}function On(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var i=e;dv(e=new hi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=$f(l,r,!0,e)&&i}if(i=$f(l=e.g=n,r,!0,e)&&i,i=$f(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=$f(l=e.g=t[a],r,!1,e)&&i}function $f(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var f=l.listener,m=l.ia||l.src;l.fa&&gm(n.i,l),i=!1!==f.call(m,r)&&i}}return i&&!r.defaultPrevented}ci(xn,ou),xn.prototype[Wd]=!0,xn.prototype.removeEventListener=function(n,e,t,r){wA(this,n,e,t,r)},xn.prototype.M=function(){if(xn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jf(t[r]);delete n.g[e],n.h--}}this.I=null},xn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},xn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vm=Nt.JSON.stringify;function EA(){var n=Dv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Iv,MI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new CA,n=>n.reset());class CA{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ev(n){Nt.setTimeout(()=>{throw n},0)}function _c(n,e){Iv||function RI(){var n=Nt.Promise.resolve(void 0);Iv=function(){n.then(NI)}}(),Cv||(Iv(),Cv=!0),Dv.add(n,e)}var Cv=!1,Dv=new class IA{constructor(){this.h=this.g=null}add(e,t){const r=MI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function NI(){for(var n;n=EA();){try{n.h.call(n.g)}catch(t){Ev(t)}var e=MI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Cv=!1}function yc(n,e){xn.call(this),this.h=n||1,this.g=e||Nt,this.j=li(this.kb,this),this.l=Date.now()}function bv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function wm(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:Nt.setTimeout(n,e||0)}function Tv(n){n.g=wm(()=>{n.g=null,n.i&&(n.i=!1,Tv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ci(yc,xn),(lt=yc.prototype).da=!1,lt.S=null,lt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),On(this,"tick"),this.da&&(bv(this),this.start()))}},lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},lt.M=function(){yc.Z.M.call(this),bv(this),delete this.g};class Av extends ou{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tv(this)}M(){super.M(),this.g&&(Nt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hl(n){ou.call(this),this.h=n,this.g={}}ci(hl,ou);var Sv=[];function xv(n,e,t,r){Array.isArray(t)||(t&&(Sv[0]=t.toString()),t=Sv);for(var i=0;i<t.length;i++){var a=xI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Mv(n){Vf(n.g,function(e,t){this.g.hasOwnProperty(t)&&_m(e)},n),n.g={}}function Hf(){this.g=!0}function vc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function DA(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return vm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}hl.prototype.M=function(){hl.Z.M.call(this),Mv(this)},hl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Hf.prototype.Aa=function(){this.g=!1},Hf.prototype.info=function(){};var wc={},FI=null;function Em(){return FI=FI||new xn}function LI(n){hi.call(this,wc.Ma,n)}function Gf(n){const e=Em();On(e,new LI(e,n))}function VI(n,e){hi.call(this,wc.STAT_EVENT,n),this.stat=e}function Fi(n){const e=Em();On(e,new VI(e,n))}function UI(n,e){hi.call(this,wc.Na,n),this.size=e}function Wf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Nt.setTimeout(function(){n()},e)}wc.Ma="serverreachability",ci(LI,hi),wc.STAT_EVENT="statevent",ci(VI,hi),wc.Na="timingevent",ci(UI,hi);var Im={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},BI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Rv(){}function $I(){}Rv.prototype.h=null;var Cm,zf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Nv(){hi.call(this,"d")}function Pv(){hi.call(this,"c")}function qf(){}function zd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new hl(this),this.P=HI,this.W=new yc(n=hv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ov}function Ov(){this.i=null,this.g="",this.h=!1}ci(Nv,hi),ci(Pv,hi),ci(qf,Rv),qf.prototype.g=function(){return new XMLHttpRequest},qf.prototype.i=function(){return{}},Cm=new qf;var HI=45e3,Dm={},Zf={};function bm(n,e,t){n.K=1,n.v=Qf(lu(e)),n.s=t,n.U=!0,kv(n,null)}function kv(n,e){n.F=Date.now(),Kf(n),n.A=lu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Uv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ov,n.g=Yv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Av(li(n.Ia,n,n.g),n.O)),xv(n.V,n.g,"readystatechange",n.gb),e=n.H?cv(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Gf(1),function PI(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",f=a.split("&"),m=0;m<f.length;m++){var v=f[m].split("=");if(1<v.length){var b=v[0];v=v[1];var S=b.split("_");l=2<=S.length&&"type"==S[1]?l+(b+"=")+v+"&":l+(b+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Fv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Lv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=Ec(n,t),i==Zf){4==e&&(n.o=4,Fi(14),r=!1),vc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Dm){n.o=4,Fi(15),vc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vc(n.j,n.m,i,null),WI(n,i)}Fv(n)&&i!=Zf&&i!=Dm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Fi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Zv(e),e.L=!0,Fi(11))):(vc(n.j,n.m,t,"[Invalid Chunked Response]"),uu(n),Tm(n))}function Ec(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Zf:(t=Number(e.substring(t,r)),isNaN(t)?Dm:(r+=1)+t>e.length?Zf:(e=e.substr(r,t),n.C=r+t,e))}function Kf(n){n.Y=Date.now()+n.P,GI(n,n.P)}function GI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Wf(li(n.eb,n),e)}function au(n){n.B&&(Nt.clearTimeout(n.B),n.B=null)}function Tm(n){0==n.l.G||n.I||dC(n.l,n)}function uu(n){au(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bv(n.W),Mv(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function WI(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Sm(t.i,n)))if(t.I=n.N,!n.J&&Sm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Fm(t),Pm(t)}qv(t),Fi(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Wf(li(t.ab,t),6e3));if(1>=JI(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Ac(t,11)}else if((n.J||t.g==n)&&Fm(t),!Hd(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let v=i[e];if(t.U=v[0],v=v[1],2==t.G)if("c"==v[0]){t.J=v[1],t.la=v[2];const b=v[3];null!=b&&(t.ma=b,t.h.info("VER="+t.ma));const S=v[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=v[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const Q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Q){var a=r.i;!a.g&&(Ei(Q,"spdy")||Ei(Q,"quic")||Ei(Q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(xm(a,a.h),a.h=null))}if(r.D){const be=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;be&&(r.sa=be,qn(r.F,r.D,be))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=Kv(r,r.H?r.la:null,r.W),l.J){Bv(r.i,l);var f=l,m=r.K;m&&f.setTimeout(m),f.B&&(au(f),Kf(f)),r.g=l}else zv(r);0<t.l.length&&km(t)}else"stop"!=v[0]&&"close"!=v[0]||Ac(t,7);else 3==t.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Ac(t,7):sp(t):"noop"!=v[0]&&t.j&&t.j.wa(v),t.A=0)}Gf(4)}catch{}}function Am(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(rm(n)||"string"==typeof n)Lf(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(rm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function zI(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(rm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Yf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Yf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function It(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Ic(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Ic(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Ic(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(lt=zd.prototype).setTimeout=function(n){this.P=n},lt.gb=function(n){n=n.target;const e=this.L;e&&3==pa(n)?e.l():this.Ia(n)},lt.Ia=function(n){try{if(n==this.g)e:{const b=pa(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>b)&&(3!=b||hv||this.g&&(this.h.h||this.g.ga()||sC(this.g)))){this.I||4!=b||7==e||Gf(8==e||0>=S?3:2),au(this);var t=this.g.ba();this.N=t;t:if(Fv(this)){var r=sC(this.g);n="";var i=r.length,a=4==pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){uu(this),Tm(this);var l="";break t}this.h.i=new Nt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function OI(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,b,t),this.i){if(this.$&&!this.J){t:{if(this.g){var f,m=this.g;if((f=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hd(f)){var v=f;break t}}v=null}if(!(t=v)){this.i=!1,this.o=3,Fi(12),uu(this),Tm(this);break e}vc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,WI(this,t)}this.U?(Lv(this,b,l),hv&&this.i&&3==b&&(xv(this.V,this.W,"tick",this.fb),this.W.start())):(vc(this.j,this.m,l,null),WI(this,l)),4==b&&uu(this),this.i&&!this.I&&(4==b?dC(this.l,this):(this.i=!1,Kf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Fi(12)):(this.o=0,Fi(13)),uu(this),Tm(this)}}}catch{}},lt.fb=function(){if(this.g){var n=pa(this.g),e=this.g.ga();this.C<e.length&&(au(this),Lv(this,n,e),this.i&&4!=n&&Kf(this))}},lt.cancel=function(){this.I=!0,uu(this)},lt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function kI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Gf(3),Fi(17)),uu(this),this.o=2,Tm(this)):GI(this,this.Y-n)},(lt=Yf.prototype).R=function(){It(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},lt.T=function(){return It(this),this.g.concat()},lt.get=function(n,e){return Ic(this.h,n)?this.h[n]:e},lt.set=function(n,e){Ic(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},lt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var qI=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xs(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Xs){this.g=void 0!==e?e:n.g,Cc(this,n.j),this.s=n.s,Dc(this,n.i),zn(this,n.m),this.l=n.l,e=n.h;var t=new Xf;t.i=e.i,e.g&&(t.g=new Yf(e.g),t.h=e.h),TA(this,t),this.o=n.o}else n&&(t=String(n).match(qI))?(this.g=!!e,Cc(this,t[1]||"",!0),this.s=qd(t[2]||""),Dc(this,t[3]||"",!0),zn(this,t[4]),this.l=qd(t[5]||"",!0),TA(this,t[6]||"",!0),this.o=qd(t[7]||"")):(this.g=!!e,this.h=new Xf(null,this.g))}function lu(n){return new Xs(n)}function Cc(n,e,t){n.j=t?qd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Dc(n,e,t){n.i=t?qd(e,!0):e}function zn(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function TA(n,e,t){e instanceof Xf?(n.h=e,function RA(n,e){e&&!n.j&&(fl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(ep(this,r),Uv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Zd(e,Jf)),n.h=new Xf(e,n.g))}function qn(n,e,t){n.h.set(e,t)}function Qf(n){return qn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function qd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Zd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,KI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function KI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Zd(e,YI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Zd(e,YI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Zd(t,"/"==t.charAt(0)?xA:SA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Zd(t,MA)),n.join("")};var YI=/[#\/\?@]/g,SA=/[#\?:]/g,xA=/[#\?]/g,Jf=/[#\?@]/g,MA=/#/g;function Xf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function fl(n){n.g||(n.g=new Yf,n.h=0,n.i&&function bA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ep(n,e){fl(n),e=bc(n,e),Ic(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Ic((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&It(n)))}function Vv(n,e){return fl(n),e=bc(n,e),Ic(n.g.h,e)}function Uv(n,e,t){ep(n,e),0<t.length&&(n.i=null,n.g.set(bc(n,e),av(t)),n.h+=t.length)}function bc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Kd(n){this.l=n||NA,n=Nt.PerformanceNavigationTiming?0<(n=Nt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Nt.g&&Nt.g.Ea&&Nt.g.Ea()&&Nt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(lt=Xf.prototype).add=function(n,e){fl(this),this.i=null,n=bc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},lt.forEach=function(n,e){fl(this),this.g.forEach(function(t,r){Lf(t,function(i){n.call(e,i,r,this)},this)},this)},lt.T=function(){fl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},lt.R=function(n){fl(this);var e=[];if("string"==typeof n)Vv(this,n)&&(e=om(e,this.g.get(bc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=om(e,n[t])}return e},lt.set=function(n,e){return fl(this),this.i=null,Vv(this,n=bc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},lt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var NA=10;function QI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function JI(n){return n.h?1:n.g?n.g.size:0}function Sm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function xm(n,e){n.g?n.g.add(e):n.h=e}function Bv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function XI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return av(n.i)}function Mm(){}function PA(){this.g=new Mm}function OA(n,e,t){const r=t||"";try{Am(n,function(i,a){let l=i;$d(i)&&(l=vm(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function jv(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Rm(n){this.l=n.$b||null,this.j=n.ib||!1}function $v(n,e){xn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Kd.prototype.cancel=function(){if(this.i=XI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mm.prototype.stringify=function(n){return Nt.JSON.stringify(n,void 0)},Mm.prototype.parse=function(n){return Nt.JSON.parse(n,void 0)},ci(Rm,Rv),Rm.prototype.g=function(){return new $v(this.l,this.j)},Rm.prototype.i=function(n){return function(){return n}}({}),ci($v,xn);var Nm=0;function np(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function rp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ip(n)}function ip(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(lt=$v.prototype).open=function(n,e){if(this.readyState!=Nm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ip(this)},lt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Nt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,rp(this)),this.readyState=Nm},lt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Nt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;np(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},lt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?rp(this):ip(this),3==this.readyState&&np(this)}},lt.Ua=function(n){this.g&&(this.response=this.responseText=n,rp(this))},lt.Ta=function(n){this.g&&(this.response=n,rp(this))},lt.ha=function(){this.g&&rp(this)},lt.setRequestHeader=function(n,e){this.v.append(n,e)},lt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},lt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty($v.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var eC=Nt.JSON.parse;function Yn(n){xn.call(this),this.headers=new Yf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tC,this.K=this.L=!1}ci(Yn,xn);var tC="",kA=/^https?$/i,FA=["POST","PUT"];function VA(n){return"content-type"==n.toLowerCase()}function Hv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,nC(n),cu(n)}function nC(n){n.D||(n.D=!0,On(n,"complete"),On(n,"error"))}function rC(n){if(n.h&&typeof nm<"u"&&(!n.C[1]||4!=pa(n)||2!=n.ba()))if(n.v&&4==pa(n))wm(n.Fa,0,n);else if(On(n,"readystatechange"),4==pa(n)){n.h=!1;try{const f=n.ba();e:switch(f){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===f){var i=String(n.H).match(qI)[1]||null;if(!i&&Nt.self&&Nt.self.location){var a=Nt.self.location.protocol;i=a.substr(0,a.length-1)}r=!kA.test(i?i.toLowerCase():"")}t=r}if(t)On(n,"complete"),On(n,"success");else{n.m=6;try{var l=2<pa(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.ba()+"]",nC(n)}}finally{cu(n)}}}function cu(n,e){if(n.g){iC(n);const t=n.g,r=n.C[0]?kf:null;n.g=null,n.C=null,e||On(n,"ready");try{t.onreadystatechange=r}catch{}}}function iC(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Nt.clearTimeout(n.A),n.A=null)}function pa(n){return n.g?n.g.readyState:0}function sC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case tC:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Gv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function oC(n){let e="";return Vf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):qn(n,e,t))}function Yd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function aC(n){this.za=0,this.l=[],this.h=new Hf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Yd("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Yd("baseRetryDelayMs",5e3,n),this.$a=Yd("retryDelaySeedMs",1e4,n),this.Ya=Yd("forwardChannelMaxRetries",2,n),this.ra=Yd("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Kd(n&&n.concurrentRequestLimit),this.Ca=new PA,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function sp(n){if(Wv(n),3==n.G){var e=n.V++,t=lu(n.F);qn(t,"SID",n.J),qn(t,"RID",e),qn(t,"TYPE","terminate"),Tc(n,t),(e=new zd(n,n.h,e,void 0)).K=2,e.v=Qf(lu(t)),t=!1,Nt.navigator&&Nt.navigator.sendBeacon&&(t=Nt.navigator.sendBeacon(e.v.toString(),"")),!t&&Nt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Yv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Kf(e)}fC(n)}function Pm(n){n.g&&(Zv(n),n.g.cancel(),n.g=null)}function Wv(n){Pm(n),n.u&&(Nt.clearTimeout(n.u),n.u=null),Fm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Nt.clearTimeout(n.m),n.m=null)}function Om(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&km(n)}function km(n){QI(n.i)||n.m||(n.m=!0,_c(n.Ha,n),n.C=0)}function uC(n,e){var t;t=e?e.m:n.V++;const r=lu(n.F);qn(r,"SID",n.J),qn(r,"RID",t),qn(r,"AID",n.U),Tc(n,r),n.o&&n.s&&Gv(r,n.o,n.s),t=new zd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=lC(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),xm(n.i,t),bm(t,r,e)}function Tc(n,e){n.j&&Am({},function(t,r){qn(e,r,t)})}function lC(n,e,t){t=Math.min(n.l.length,t);var r=n.j?li(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let f=!0;for(let m=0;m<t;m++){let v=i[m].h;const b=i[m].g;if(v-=a,0>v)a=Math.max(0,i[m].h-100),f=!1;else try{OA(b,l,"req"+v+"_")}catch{r&&r(b)}}if(f){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function zv(n){n.g||n.u||(n.Y=1,_c(n.Ga,n),n.A=0)}function qv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Wf(li(n.Ga,n),hC(n,n.A)),n.A++,0))}function Zv(n){null!=n.B&&(Nt.clearTimeout(n.B),n.B=null)}function cC(n){n.g=new zd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=lu(n.oa);qn(e,"RID","rpc"),qn(e,"SID",n.J),qn(e,"CI",n.N?"0":"1"),qn(e,"AID",n.U),Tc(n,e),qn(e,"TYPE","xmlhttp"),n.o&&n.s&&Gv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Qf(lu(e)),t.s=null,t.U=!0,kv(t,n)}function Fm(n){null!=n.v&&(Nt.clearTimeout(n.v),n.v=null)}function dC(n,e){var t=null;if(n.g==e){Fm(n),Zv(n),n.g=null;var r=2}else{if(!Sm(n.i,e))return;t=e.D,Bv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;On(r=Em(),new UI(r,t,e,i)),km(n)}else zv(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function UA(n,e){return!(JI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Wf(li(n.Ha,n,e),hC(n,n.C)),n.C++,0)))}(n,e)||2==r&&qv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Ac(n,5);break;case 4:Ac(n,10);break;case 3:Ac(n,6);break;default:Ac(n,2)}}function hC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Ac(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=li(n.jb,n);t||(t=new Xs("//www.google.com/images/cleardot.gif"),Nt.location&&"http"==Nt.location.protocol||Cc(t,"https"),Qf(t)),function AN(n,e){const t=new Hf;if(Nt.Image){const r=new Image;r.onload=Ff(jv,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ff(jv,t,r,"TestLoadImage: error",!1,e),r.onabort=Ff(jv,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ff(jv,t,r,"TestLoadImage: timeout",!1,e),Nt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Fi(2);n.G=0,n.j&&n.j.va(e),fC(n),Wv(n)}function fC(n){n.G=0,n.I=-1,n.j&&((0!=XI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,av(n.l),n.l.length=0),n.j.ua())}function Kv(n,e,t){let r=function AA(n){return n instanceof Xs?lu(n):new Xs(n,void 0)}(t);if(""!=r.i)e&&Dc(r,e+"."+r.i),zn(r,r.m);else{const i=Nt.location;r=function ZI(n,e,t,r){var i=new Xs(null,void 0);return n&&Cc(i,n),e&&Dc(i,e),t&&zn(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Vf(n.aa,function(i,a){qn(r,a,i)}),t=n.sa,(e=n.D)&&t&&qn(r,e,t),qn(r,"VER",n.ma),Tc(n,r),r}function Yv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yn(t&&n.Ba&&!n.qa?new Rm({ib:!0}):n.qa)).L=n.H,e}function pC(){}function Lm(){if(Gd&&!(10<=Number(gA)))throw Error("Environmental error: no available transport.")}function Xi(n,e){xn.call(this),this.g=new aC(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!Hd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Hd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Qd(this)}function gC(n){Nv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mC(){Pv.call(this),this.status=1}function Qd(n){this.g=n}(lt=Yn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Cm.g(),this.C=function jI(n){return n.h||(n.h=n.i())}(this.u?this.u:Cm),this.g.onreadystatechange=li(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Hv(this,a)}n=t||"";const i=new Yf(this.headers);r&&Am(r,function(a,l){i.set(l,a)}),r=function sm(n){e:{var e=VA;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Nt.FormData&&n instanceof Nt.FormData,!(0<=II(FA,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{iC(this),0<this.B&&((this.K=function LA(n){return Gd&&function SI(){return function DI(n){var e=AI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=am(String(Uf)).split("."),t=am("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=um(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||um(0==i[2].length,0==a[2].length)||um(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.pa,this)):this.A=wm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Hv(this,a)}},lt.pa=function(){typeof nm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,On(this,"timeout"),this.abort(8))},lt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,On(this,"complete"),On(this,"abort"),cu(this))},lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cu(this,!0)),Yn.Z.M.call(this)},lt.Fa=function(){this.s||(this.F||this.v||this.l?rC(this):this.cb())},lt.cb=function(){rC(this)},lt.ba=function(){try{return 2<pa(this)?this.g.status:-1}catch{return-1}},lt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},lt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),eC(e)}},lt.Da=function(){return this.m},lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(lt=aC.prototype).ma=8,lt.G=1,lt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},lt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new zd(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=cv(a),dv(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lC(this,i,e),qn(t=lu(this.F),"RID",n),qn(t,"CVER",22),this.D&&qn(t,"X-HTTP-Session-Id",this.D),Tc(this,t),this.o&&a&&Gv(t,this.o,a),xm(this.i,i),this.Ra&&qn(t,"TYPE","init"),this.ja?(qn(t,"$req",e),qn(t,"SID","null"),i.$=!0,bm(i,t,null)):bm(i,t,e),this.G=2}}else 3==this.G&&(n?uC(this,n):0==this.l.length||QI(this.i)||uC(this))},lt.Ga=function(){if(this.u=null,cC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Wf(li(this.bb,this),n)}},lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fi(10),Pm(this),cC(this))},lt.ab=function(){null!=this.v&&(this.v=null,Pm(this),qv(this),Fi(19))},lt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Fi(2)):(this.h.info("Failed to ping google.com"),Fi(1))},(lt=pC.prototype).xa=function(){},lt.wa=function(){},lt.va=function(){},lt.ua=function(){},lt.Oa=function(){},Lm.prototype.g=function(n,e){return new Xi(n,e)},ci(Xi,xn),Xi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),_c(li(n.hb,n,e))),Fi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Kv(n,null,n.W),km(n)},Xi.prototype.close=function(){sp(this.g)},Xi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Om(this.g,e)}else this.v?((e={}).__data__=vm(n),Om(this.g,e)):Om(this.g,n)},Xi.prototype.M=function(){this.g.j=null,delete this.j,sp(this.g),delete this.g,Xi.Z.M.call(this)},ci(gC,Nv),ci(mC,Pv),ci(Qd,pC),Qd.prototype.xa=function(){On(this.g,"a")},Qd.prototype.wa=function(n){On(this.g,new gC(n))},Qd.prototype.va=function(n){On(this.g,new mC(n))},Qd.prototype.ua=function(){On(this.g,"b")},Lm.prototype.createWebChannel=Lm.prototype.g,Xi.prototype.send=Xi.prototype.u,Xi.prototype.open=Xi.prototype.m,Xi.prototype.close=Xi.prototype.close,Im.NO_ERROR=0,Im.TIMEOUT=8,Im.HTTP_ERROR=6,BI.COMPLETE="complete",$I.EventType=zf,zf.OPEN="a",zf.CLOSE="b",zf.ERROR="c",zf.MESSAGE="d",xn.prototype.listen=xn.prototype.N,Yn.prototype.listenOnce=Yn.prototype.O,Yn.prototype.getLastError=Yn.prototype.La,Yn.prototype.getLastErrorCode=Yn.prototype.Da,Yn.prototype.getStatus=Yn.prototype.ba,Yn.prototype.getResponseJson=Yn.prototype.Qa,Yn.prototype.getResponseText=Yn.prototype.ga,Yn.prototype.send=Yn.prototype.ea;var Qv=Ji.createWebChannelTransport=function(){return new Lm},Jv=Ji.getStatEventTarget=function(){return Em()},Vm=Ji.ErrorCode=Im,Xv=Ji.EventType=BI,BA=Ji.Event=wc,_C=Ji.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},e0=Ji.FetchXmlHttpFactory=Rm,Um=Ji.WebChannel=$I,yC=Ji.XhrIo=Yn;const vC="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let op="9.9.1";const pl=new ui.Yd("@firebase/firestore");function Sc(){return pl.logLevel}function Be(n,...e){if(pl.logLevel<=ui.in.DEBUG){const t=e.map(t0);pl.debug(`Firestore (${op}): ${n}`,...t)}}function Pr(n,...e){if(pl.logLevel<=ui.in.ERROR){const t=e.map(t0);pl.error(`Firestore (${op}): ${n}`,...t)}}function Jd(n,...e){if(pl.logLevel<=ui.in.WARN){const t=e.map(t0);pl.warn(`Firestore (${op}): ${n}`,...t)}}function t0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${op}) INTERNAL ASSERTION FAILED: `+n;throw Pr(e),new Error(e)}function Dt(n,e){n||it()}function rt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class wC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class EC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class IC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class n0{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=v=>this.i!==i?(i=this.i,t(v)):Promise.resolve();let l=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Qr,e.enqueueRetryable(()=>a(this.currentUser))};const f=()=>{const v=l;e.enqueueRetryable((0,Ie.Z)(function*(){yield v.promise,yield a(r.currentUser)}))},m=v=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(v=>m(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?m(v):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Qr)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new wC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Wr(e)}}class Bm{constructor(e,t,r){this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class ap{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Bm(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class r0{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new CC(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function HA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class DC{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=HA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ft(n,e){return n<e?-1:n>e?1:0}function Xd(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function GA(n){return n+"\0"}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ft(this.nanoseconds,e.nanoseconds):Ft(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Qn(0,0))}static max(){return new xt(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class eh{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===eh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof eh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends eh{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ve(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const WA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class or extends eh{construct(e,t,r){return new or(e,t,r)}static isValidIdentifier(e){return WA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),or.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new or(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Ve(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const f=e[i];if("\\"===f){if(i+1===e.length)throw new Ve(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ve(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===f?(l=!l,i++):"."!==f||l?(r+=f,i++):(a(),i++)}if(a(),l)throw new Ve(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new or(t)}static emptyPath(){return new or([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(nn.fromString(e))}static fromName(e){return new Xe(nn.fromString(e).popFirst(5))}static empty(){return new Xe(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new nn(e.slice()))}}class jm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function up(n){return n.fields.find(e=>2===e.kind)}function gl(n){return n.fields.filter(e=>2!==e.kind)}jm.UNKNOWN_ID=-1;class lp{constructor(e,t){this.fieldPath=e,this.kind=t}}class th{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new th(0,bs.min())}}function s0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=xt.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new bs(i,Xe.empty(),e)}function bC(n){return new bs(n.readTime,n.key,-1)}class bs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bs(xt.min(),Xe.empty(),-1)}static max(){return new bs(xt.max(),Xe.empty(),-1)}}function o0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Ft(n.largestBatchId,e.largestBatchId))}const TC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class a0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Mc(n){return $m.apply(this,arguments)}function $m(){return $m=(0,Ie.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==TC)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),$m.apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,a=0,l=!1;e.forEach(f=>{++i,f.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const a=e.length,l=new Array(a);let f=0;for(let m=0;m<a;m++){const v=m;t(e[v]).next(b=>{l[v]=b,++f,f===a&&r(l)},b=>i(b))}})}static doWhile(e,t){return new de((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class Hm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Qr,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new cp(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=u0(r.target.error);this.T.reject(new cp(e,i))}}static open(e,t,r,i){try{return new Hm(t,e.transaction(i,r))}catch(a){throw new cp(t,a)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new zA(t)}}class ga{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===ga.v((0,O.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Rc(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,O.hl)())return!1;if(ga.S())return!0;const e=(0,O.z$)(),t=ga.v(e),r=0<t&&t<10,i=ga.D(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new cp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const f=l.target.error;i("VersionError"===f.name?new Ve(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===f.name?new Ve(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+f):new cp(e,f))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.P.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ie.Z)(function*(){const l="readonly"===t;let f=0;for(;;){++f;try{a.db=yield a.k(e);const m=Hm.open(a.db,e,l?"readonly":"readwrite",r),v=i(m).next(b=>(m.R(),b)).catch(b=>(m.abort(b),de.reject(b))).toPromise();return v.catch(()=>{}),yield m.A,v}catch(m){const v=m,b="FirebaseError"!==v.name&&f<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),a.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SN{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Rc(this.$.delete())}}class cp extends Ve{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ml(n){return"IndexedDbTransactionError"===n.name}class zA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rc(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Rc(this.store.add(e))}get(e){return Rc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Rc(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Rc(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.G(i,(l,f)=>{a.push(f)}).next(()=>a)}{const i=this.store.getAll(r.range);return new de((a,l)=>{i.onerror=f=>{l(f.target.error)},i.onsuccess=f=>{a(f.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new de((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}W(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(a,l,f)=>f.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new de((r,i)=>{t.onerror=a=>{const l=u0(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(f=>{f?l.continue():r()}):r()}})}G(e,t){const r=[];return new de((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const f=l.target.result;if(!f)return void i();const m=new SN(f),v=t(f.primaryKey,f.value,m);if(v instanceof de){const b=v.catch(S=>(m.done(),de.reject(S)));r.push(b)}m.isDone?i():null===m.U?f.continue():f.continue(m.U)}}).next(()=>de.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Rc(n){return new de((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=u0(r.target.error);t(i)}})}let AC=!1;function u0(n){const e=ga.v((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ve("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AC||(AC=!0,setTimeout(()=>{throw r},0)),r}}return n}class qA{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Be("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{Be("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){ml(r)?Be("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Mc(r)}yield t.Z(1)}))}}class ZA{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,a=!0;return de.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Be("IndexBackiller",`Processing collection: ${l}`),this.nt(e,l,i).next(f=>{i-=f,r.add(l)});a=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.st(i,a)).next(f=>(Be("IndexBackiller",`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f))).next(()=>l.size)}))}st(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=bC(a);o0(l,r)>0&&(r=l)}),new bs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class es{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function SC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}es.ot=-1;class Un{constructor(e,t){this.comparator=e,this.root=t||Jr.EMPTY}insert(e,t){return new Un(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jr.BLACK,null,null))}remove(e){return new Un(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dp(this.root,e,this.comparator,!1)}getReverseIterator(){return new dp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dp(this.root,e,this.comparator,!0)}}class dp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Jr.RED,this.left=i??Jr.EMPTY,this.right=a??Jr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Jr(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Jr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Jr.EMPTY=null,Jr.RED=!0,Jr.BLACK=!1,Jr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Jr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class yn{constructor(e){this.comparator=e,this.data=new Un(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l0(this.data.getIterator())}getIteratorFrom(e){return new l0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof yn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new yn(this.comparator);return t.data=e,t}}class l0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pc(n){return n.hasNext()?n.getNext():void 0}class Ts{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new Ts([])}unionWith(e){let t=new yn(or.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ts(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Xr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ft(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xr.EMPTY_BYTE_STRING=new Xr("");const YA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=YA.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vr(n.seconds),nanos:vr(n.nanos)}}function vr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Oc(n){return"string"==typeof n?Xr.fromBase64String(n):Xr.fromUint8Array(n)}function c0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function nh(n){const e=n.mapValue.fields.__previous_value__;return c0(e)?nh(e):e}function hp(n){const e=_l(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class d0{constructor(e,t,r,i,a,l,f,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=f,this.useFetchStreams=m}}class ei{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ei("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ei&&e.projectId===this.projectId&&e.database===this.database}}function fp(n){return null==n}function kc(n){return 0===n&&1/n==-1/0}function rh(n){return"number"==typeof n&&Number.isInteger(n)&&!kc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const yl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gm={nullValue:"NULL_VALUE"};function Fc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?c0(n)?4:h0(n)?9007199254740991:10:it()}function As(n,e){if(n===e)return!0;const t=Fc(n);if(t!==Fc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hp(n).isEqual(hp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=_l(r.timestampValue),l=_l(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Oc(n.bytesValue).isEqual(Oc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return vr(r.geoPointValue.latitude)===vr(i.geoPointValue.latitude)&&vr(r.geoPointValue.longitude)===vr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return vr(r.integerValue)===vr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=vr(r.doubleValue),l=vr(i.doubleValue);return a===l?kc(a)===kc(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Xd(n.arrayValue.values||[],e.arrayValue.values||[],As);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(SC(a)!==SC(l))return!1;for(const f in a)if(a.hasOwnProperty(f)&&(void 0===l[f]||!As(a[f],l[f])))return!1;return!0}(n,e);default:return it()}var i}function vl(n,e){return void 0!==(n.values||[]).find(t=>As(t,e))}function wl(n,e){if(n===e)return 0;const t=Fc(n),r=Fc(e);if(t!==r)return Ft(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ft(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=vr(i.integerValue||i.doubleValue),f=vr(a.integerValue||a.doubleValue);return l<f?-1:l>f?1:l===f?0:isNaN(l)?isNaN(f)?0:-1:1}(n,e);case 3:return MC(n.timestampValue,e.timestampValue);case 4:return MC(hp(n),hp(e));case 5:return Ft(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Oc(i),f=Oc(a);return l.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),f=a.split("/");for(let m=0;m<l.length&&m<f.length;m++){const v=Ft(l[m],f[m]);if(0!==v)return v}return Ft(l.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ft(vr(i.latitude),vr(a.latitude));return 0!==l?l:Ft(vr(i.longitude),vr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],f=a.values||[];for(let m=0;m<l.length&&m<f.length;++m){const v=wl(l[m],f[m]);if(v)return v}return Ft(l.length,f.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===yl.mapValue&&a===yl.mapValue)return 0;if(i===yl.mapValue)return 1;if(a===yl.mapValue)return-1;const l=i.fields||{},f=Object.keys(l),m=a.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const S=Ft(f[b],v[b]);if(0!==S)return S;const P=wl(l[f[b]],m[v[b]]);if(0!==P)return P}return Ft(f.length,v.length)}(n.mapValue,e.mapValue);default:throw it()}}function MC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ft(n,e);const t=_l(n),r=_l(e),i=Ft(t.seconds,r.seconds);return 0!==i?i:Ft(t.nanos,r.nanos)}function Lc(n){return Wm(n)}function Wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_l(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Oc(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Wm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const f of i)l?l=!1:a+=",",a+=`${f}:${Wm(r.fields[f])}`;return a+"}"}(n.mapValue):it();var e}function du(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zm(n){return!!n&&"integerValue"in n}function pp(n){return!!n&&"arrayValue"in n}function RC(n){return!!n&&"nullValue"in n}function QA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ih(n){return!!n&&"mapValue"in n}function Vc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Nc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function h0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function f0(n){return"nullValue"in n?Gm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?du(ei.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function p0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?du(ei.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?yl:it()}function NC(n,e){const t=wl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function PC(n,e){const t=wl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class fi{constructor(e){this.value=e}static empty(){return new fi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ih(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vc(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((l,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=f.popLast()}l?r[f.lastSegment()]=Vc(l):i.push(f.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());ih(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return As(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ih(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new fi(Vc(this.value))}}function OC(n){const e=[];return Nc(n.fields,(t,r)=>{const i=new or([t]);if(ih(r)){const a=OC(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Ts(e)}class kn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new kn(e,0,xt.min(),xt.min(),fi.empty(),0)}static newFoundDocument(e,t,r){return new kn(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new kn(e,2,t,xt.min(),fi.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,xt.min(),fi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class g0{constructor(e,t=null,r=[],i=[],a=null,l=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=f,this.ut=null}}function m0(n,e=null,t=[],r=[],i=null,a=null,l=null){return new g0(n,e,t,r,i,a,l)}function Uc(n){const e=rt(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Lc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),fp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Lc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Lc(r)).join(",")),e.ut=t}return e.ut}function sh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!eS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!As(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UC(n.startAt,e.startAt)&&UC(n.endAt,e.endAt)}function qm(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gp(n,e){return n.filters.filter(t=>t instanceof ti&&t.field.isEqual(e))}function _0(n,e,t){let r=Gm,i=!0;for(const a of gp(n,e)){let l=Gm,f=!0;switch(a.op){case"<":case"<=":l=f0(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,f=!1;break;case"!=":case"not-in":l=Gm}NC({value:r,inclusive:i},{value:l,inclusive:f})<0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];NC({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function FC(n,e,t){let r=yl,i=!0;for(const a of gp(n,e)){let l=yl,f=!0;switch(a.op){case">=":case">":l=p0(a.value),f=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,f=!1;break;case"!=":case"not-in":l=yl}PC({value:r,inclusive:i},{value:l,inclusive:f})>0&&(r=l,i=f)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];PC({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ti extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new JA(e,t,r):"array-contains"===t?new XA(e,r):"in"===t?new xN(e,r):"not-in"===t?new MN(e,r):"array-contains-any"===t?new VC(e,r):new ti(e,t,r)}static ct(e,t,r){return"in"===t?new Li(e,r):new oh(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(wl(t,this.value)):null!==t&&Fc(this.value)===Fc(t)&&this.at(wl(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JA extends ti{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.at(t)}}class Li extends ti{constructor(e,t){super(e,"in",t),this.keys=LC(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class oh extends ti{constructor(e,t){super(e,"not-in",t),this.keys=LC(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LC(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class XA extends ti{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pp(t)&&vl(t.arrayValue,this.value)}}class xN extends ti{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vl(this.value.arrayValue,t)}}class MN extends ti{constructor(e,t){super(e,"not-in",t)}matches(e){if(vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vl(this.value.arrayValue,t)}}class VC extends ti{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vl(this.value.arrayValue,r))}}class hu{constructor(e,t){this.position=e,this.inclusive=t}}class ma{constructor(e,t="asc"){this.field=e,this.dir=t}}function eS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Zm(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):wl(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function UC(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!As(n.position[t],e.position[t]))return!1;return!0}class _a{constructor(e,t=null,r=[],i=[],a=null,l="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=f,this.endAt=m,this.lt=null,this.ft=null}}function BC(n,e,t,r,i,a,l,f){return new _a(n,e,t,r,i,a,l,f)}function ah(n){return new _a(n)}function y0(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function mp(n){for(const e of n.filters)if(e.ht())return e.field;return null}function Km(n){return null!==n.collectionGroup}function Bc(n){const e=rt(n);if(null===e.lt){e.lt=[];const t=mp(e),r=y0(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new ma(t)),e.lt.push(new ma(or.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.lt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ma(or.keyField(),a))}}}return e.lt}function Vi(n){const e=rt(n);if(!e.ft)if("F"===e.limitType)e.ft=m0(e.path,e.collectionGroup,Bc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Bc(e))t.push(new ma(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new hu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new hu(e.startAt.position,e.startAt.inclusive):null;e.ft=m0(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function Ym(n,e,t){return new _a(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qm(n,e){return sh(Vi(n),Vi(e))&&n.limitType===e.limitType}function v0(n){return`${Uc(Vi(n))}|lt:${n.limitType}`}function w0(n){return`Query(target=${function kC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Lc(r.value)}`;var r}).join(", ")}]`),fp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Lc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Lc(t)).join(",")),`Target(${e})`}(Vi(n))}; limitType=${n.limitType})`}function Jm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const f=Zm(i,a,l);return i.inclusive?f<=0:f<0}(t.startAt,Bc(t),r)||t.endAt&&!function(i,a,l){const f=Zm(i,a,l);return i.inclusive?f>=0:f>0}(t.endAt,Bc(t),r)));var t,r}function jc(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jC(n){return(e,t)=>{let r=!1;for(const i of Bc(n)){const a=$C(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function $C(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const f=a.data.field(i),m=l.data.field(i);return null!==f&&null!==m?wl(f,m):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}function Xm(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(e)?"-0":e}}function tS(n){return{integerValue:""+n}}function HC(n,e){return rh(e)?tS(e):Xm(n,e)}class E0{constructor(){this._=void 0}}function nS(n,e,t){return n instanceof $c?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof El?WC(n,e):n instanceof Il?I0(n,e):function(r,i){const a=GC(r,i),l=zC(a)+zC(r._t);return zm(a)&&zm(r._t)?tS(l):Xm(r.wt,l)}(n,e)}function rS(n,e,t){return n instanceof El?WC(n,e):n instanceof Il?I0(n,e):t}function GC(n,e){return n instanceof lh?zm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $c extends E0{}class El extends E0{constructor(e){super(),this.elements=e}}function WC(n,e){const t=C0(e);for(const r of n.elements)t.some(i=>As(i,r))||t.push(r);return{arrayValue:{values:t}}}class Il extends E0{constructor(e){super(),this.elements=e}}function I0(n,e){let t=C0(e);for(const r of n.elements)t=t.filter(i=>!As(i,r));return{arrayValue:{values:t}}}class lh extends E0{constructor(e,t){super(),this.wt=e,this._t=t}}function zC(n){return vr(n.integerValue||n.doubleValue)}function C0(n){return pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class _p{constructor(e,t){this.field=e,this.transform=t}}class ZC{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yp(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class e_{}function KC(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new wp(n.key,Jn.none()):new vp(n.key,n.data,Jn.none());{const t=n.data,r=fi.empty();let i=new yn(or.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new Cl(n.key,r,new Ts(i.toArray()),Jn.none())}}function RN(n,e,t){n instanceof vp?function(r,i,a){const l=r.value.clone(),f=oS(r.fieldTransforms,i,a.transformResults);l.setAll(f),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Cl?function(r,i,a){if(!yp(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=oS(r.fieldTransforms,i,a.transformResults),f=i.data;f.setAll(sS(r)),f.setAll(l),i.convertToFoundDocument(a.version,f).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ch(n,e,t,r){return n instanceof vp?function(i,a,l,f){if(!yp(i.precondition,a))return l;const m=i.value.clone(),v=aS(i.fieldTransforms,f,a);return m.setAll(v),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cl?function(i,a,l,f){if(!yp(i.precondition,a))return l;const m=aS(i.fieldTransforms,f,a),v=a.data;return v.setAll(sS(i)),v.setAll(m),a.convertToFoundDocument(a.version,v).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(l=t,yp(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function NN(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=GC(r.transform,i||null);null!=a&&(null===t&&(t=fi.empty()),t.set(r.field,a))}return t||null}function iS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Xd(t,r,(i,a)=>function qC(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof El&&r instanceof El||t instanceof Il&&r instanceof Il?Xd(t.elements,r.elements,As):t instanceof lh&&r instanceof lh?As(t._t,r._t):t instanceof $c&&r instanceof $c);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vp extends e_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cl extends e_{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function sS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function oS(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,f=e.data.field(a.field);r.set(a.field,rS(l,f,t[i]))}return r}function aS(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,nS(a,l,e))}return r}class wp extends e_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dh extends e_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class PN{constructor(e){this.count=e}}var Ar,Yt;function D0(n){switch(n){default:return it();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function b0(n){if(void 0===n)return Pr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Ar.OK:return pe.OK;case Ar.CANCELLED:return pe.CANCELLED;case Ar.UNKNOWN:return pe.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return pe.INTERNAL;case Ar.UNAVAILABLE:return pe.UNAVAILABLE;case Ar.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Ar.NOT_FOUND:return pe.NOT_FOUND;case Ar.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Ar.ABORTED:return pe.ABORTED;case Ar.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Ar.DATA_LOSS:return pe.DATA_LOSS;default:return it()}}(Yt=Ar||(Ar={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Hc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return xC(this.inner)}size(){return this.innerSize}}const T0=new Un(Xe.comparator);function Ui(){return T0}const YC=new Un(Xe.comparator);function hh(...n){let e=YC;for(const t of n)e=e.insert(t.key,t);return e}function uS(n){let e=YC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fu(){return Ep()}function QC(){return Ep()}function Ep(){return new Hc(n=>n.toString(),(n,e)=>n.isEqual(e))}const t_=new Un(Xe.comparator),lS=new yn(Xe.comparator);function Gt(...n){let e=lS;for(const t of n)e=e.add(t);return e}const ON=new yn(Ft);function A0(){return ON}class Ip{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Cp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ip(xt.min(),r,A0(),Ui(),Gt())}}class Cp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Cp(Xr.EMPTY_BYTE_STRING,t,Gt(),Gt(),Gt())}}class n_{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class cS{constructor(e,t){this.targetId=e,this.It=t}}class JC{constructor(e,t,r=Xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class S0{constructor(){this.Tt=0,this.Et=eo(),this.At=Xr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=Gt(),t=Gt(),r=Gt();return this.Et.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:it()}}),new Cp(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=eo()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class XC{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Ui(),this.Bt=dS(),this.Lt=new yn(Ft)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const a=i.target;if(qm(a))if(0===r){const l=new Xe(a.path);this.Kt(t,l,kn.newNoDocument(l,xt.min()))}else Dt(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((a,l)=>{const f=this.Ht(l);if(f){if(a.current&&qm(f.target)){const m=new Xe(f.target.path);null!==this.$t.get(m)||this.Xt(l,m)||this.Kt(l,m,kn.newNoDocument(m,e))}a.vt&&(t.set(l,a.St()),a.Dt())}});let r=Gt();this.Bt.forEach((a,l)=>{let f=!0;l.forEachWhile(m=>{const v=this.Ht(m);return!v||2===v.purpose||(f=!1,!1)}),f&&(r=r.add(a))}),this.$t.forEach((a,l)=>l.setReadTime(e));const i=new Ip(e,t,this.Lt,this.$t,r);return this.$t=Ui(),this.Bt=dS(),this.Lt=new yn(Ft),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new S0,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new yn(Ft),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new S0),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function dS(){return new Un(Xe.comparator)}function eo(){return new Un(Xe.comparator)}const hS={asc:"ASCENDING",desc:"DESCENDING"},x0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class fS{constructor(e,t){this.databaseId=e,this.dt=t}}function pi(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eD(n,e){return n.dt?e.toBase64():e.toUint8Array()}function M0(n,e){return pi(n,e.toTimestamp())}function ni(n){return Dt(!!n),xt.fromTimestamp(function(e){const t=_l(e);return new Qn(t.seconds,t.nanos)}(n))}function R0(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function r_(n){const e=nn.fromString(n);return Dt(i_(e)),e}function fh(n,e){return R0(n.databaseId,e.path)}function Po(n,e){const t=r_(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(tD(t))}function N0(n,e){return R0(n.databaseId,e)}function P0(n){const e=r_(n);return 4===e.length?nn.emptyPath():tD(e)}function ph(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tD(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function O0(n,e,t){return{name:fh(n,e),fields:t.value.mapValue.fields}}function nD(n,e,t){const r=Po(n,e.name),i=ni(e.updateTime),a=new fi({mapValue:{fields:e.fields}}),l=kn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function gh(n,e){let t;if(e instanceof vp)t={update:O0(n,e.key,e.value)};else if(e instanceof wp)t={delete:fh(n,e.key)};else if(e instanceof Cl)t={update:O0(n,e.key,e.data),updateMask:kN(e.fieldMask)};else{if(!(e instanceof dh))return it();t={verify:fh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof $c)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof El)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Il)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lh)return{fieldPath:a.field.canonicalString(),increment:l._t};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:M0(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:it()),t;var i}function Dp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Jn.updateTime(ni(i.updateTime)):void 0!==i.exists?Jn.exists(i.exists):Jn.none():Jn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let f=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),f=new $c):"appendMissingElements"in l?f=new El(l.appendMissingElements.values||[]):"removeAllFromArray"in l?f=new Il(l.removeAllFromArray.values||[]):"increment"in l?f=new lh(a,l.increment):it();const m=or.fromServerFormat(l.fieldPath);return new _p(m,f)}(n,i)):[];var i;if(e.update){const i=Po(n,e.update.name),a=new fi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Ts((e.updateMask.fieldPaths||[]).map(v=>or.fromServerFormat(v)));return new Cl(i,a,l,t,r)}return new vp(i,a,t,r)}if(e.delete){const i=Po(n,e.delete);return new wp(i,t)}if(e.verify){const i=Po(n,e.verify);return new dh(i,t)}return it()}function rD(n,e){return{documents:[N0(n,e.path)]}}function pS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=N0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=N0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const v=m.map(b=>function(S){if("=="===S.op){if(QA(S.value))return{unaryFilter:{field:bp(S.field),op:"IS_NAN"}};if(RC(S.value))return{unaryFilter:{field:bp(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(QA(S.value))return{unaryFilter:{field:bp(S.field),op:"IS_NOT_NAN"}};if(RC(S.value))return{unaryFilter:{field:bp(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bp(S.field),op:oD(S.op),value:S.value}}}(b));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(v=>{return{field:bp((b=v).field),direction:mS(b.dir)};var b})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(v=e.limit,n.dt||fp(v)?v:{value:v});var v,f,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(f=e.startAt).inclusive,values:f.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function iD(n){let e=P0(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let a=[];t.where&&(a=sD(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(b=>{return new ma(Gc((S=b).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let f=null;t.limit&&(f=function(b){let S;return S="object"==typeof b?b.value:b,fp(S)?null:S}(t.limit));let m=null;var b;t.startAt&&(m=new hu((b=t.startAt).values||[],!!b.before));let v=null;return t.endAt&&(v=function(b){return new hu(b.values||[],!b.before)}(t.endAt)),BC(e,i,l,a,f,"F",m,v)}function sD(n){return n?void 0!==n.unaryFilter?[aD(n)]:void 0!==n.fieldFilter?[_S(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>sD(e)).reduce((e,t)=>e.concat(t)):it():[]}function mS(n){return hS[n]}function oD(n){return x0[n]}function bp(n){return{fieldPath:n.canonicalString()}}function Gc(n){return or.fromServerFormat(n.fieldPath)}function _S(n){return ti.create(Gc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function aD(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Gc(n.unaryFilter.field);return ti.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Gc(n.unaryFilter.field);return ti.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Gc(n.unaryFilter.field);return ti.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Gc(n.unaryFilter.field);return ti.create(i,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function kN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ii(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lD(e)),e=uD(n.get(t),e);return lD(e)}function uD(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function lD(n){return n+"\x01\x01"}function Oo(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const f=n.substring(a,l);let m;0===i.length?m=f:(i+=f,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:it()}a=l+2}return new nn(r)}const F0=["userId","batchId"];function Wc(n,e){return[n,Ii(e)]}function Tp(n,e,t){return[n,Ii(e),t]}const cD={},yS=["prefixPath","collectionGroup","readTime","documentId"],dD=["prefixPath","collectionGroup","documentId"],hD=["collectionGroup","readTime","prefixPath","documentId"],vS=["canonicalId","targetId"],wS=["targetId","path"],FN=["path","targetId"],LN=["collectionId","parent"],fD=["indexId","uid"],ES=["uid","sequenceNumber"],IS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],CS=["indexId","uid","orderedDocumentKey"],VN=["userId","collectionPath","documentId"],UN=["userId","collectionPath","largestBatchId"],BN=["userId","collectionGroup","largestBatchId"],DS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jN=[...DS,"documentOverlays"],pD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ap=pD,bS=[...Ap,"indexConfiguration","indexState","indexEntries"];class L0 extends a0{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function zr(n,e){const t=rt(n);return ga.N(t.ee,e)}class gu{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&RN(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ch(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=QC();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let f=this.applyToLocalView(l,a.mutatedFields);f=t.has(i.key)?null:f;const m=KC(l,f);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(xt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Gt())}isEqual(e){return this.batchId===e.batchId&&Xd(this.mutations,e.mutations,(t,r)=>iS(t,r))&&Xd(this.baseMutations,e.baseMutations,(t,r)=>iS(t,r))}}class s_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=t_;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new s_(e,t,r,i)}}class Sp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ya{constructor(e,t,r,i,a=xt.min(),l=xt.min(),f=Xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=f}withSequenceNumber(e){return new ya(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ya(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class gD{constructor(e){this.ne=e}}function o_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:zc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:fh(i=n.ne,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:pi(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:mh(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:mh(e.version)}}var i,a;return r}function zc(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _h(n){const e=new Qn(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function yh(n,e){const t=(e.baseMutations||[]).map(a=>Dp(n.ne,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Dp(n.ne,a)),i=Qn.fromMillis(e.localWriteTimeMs);return new gu(e.batchId,i,t,r)}function a_(n){const e=_h(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_h(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=Vi(ah(P0(i.documents[0])))):r=Vi(iD(n.query)),new ya(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Xr.fromBase64String(n.resumeToken))}function U0(n,e){const t=mh(e.snapshotVersion),r=mh(e.lastLimboFreeSnapshotVersion);let i;i=qm(e.target)?rD(n.ne,e.target):pS(n.ne,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Uc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function B0(n){const e=iD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ym(e,e.limit,"L"):e}function j0(n,e){return new Sp(e.largestBatchId,Dp(n.ne,e.overlayMutation))}function mD(n,e){const t=e.path.lastSegment();return[n,Ii(e.path.popLast()),t]}function _D(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:mh(r.readTime),documentKey:Ii(r.documentKey.path),largestBatchId:r.largestBatchId}}class yD{getBundleMetadata(e,t){return $0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:_h(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return $0(e).put({bundleId:(r=t).id,createTime:mh(ni(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return H0(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:B0(i.bundledQuery),readTime:_h(i.readTime)};var i})}saveNamedQuery(e,t){return H0(e).put({name:(r=t).name,readTime:mh(ni(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $0(n){return zr(n,"bundles")}function H0(n){return zr(n,"namedQueries")}class u_{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new u_(e,t.uid||"")}getOverlay(e,t){return xp(e).get(mD(this.userId,t)).next(r=>r?j0(this.wt,r):null)}getOverlays(e,t){const r=fu();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const f=new Sp(t,l);i.push(this.ie(e,f))}),de.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ii(l.getCollectionPath())));const a=[];return i.forEach(l=>{const f=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(xp(e).W("collectionPathOverlayIndex",f))}),de.waitFor(a)}getOverlaysForCollection(e,t,r){const i=fu(),a=Ii(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xp(e).K("collectionPathOverlayIndex",l).next(f=>{for(const m of f){const v=j0(this.wt,m);i.set(v.getKey(),v)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=fu();let l;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xp(e).J({index:"collectionGroupOverlayIndex",range:f},(m,v,b)=>{const S=j0(this.wt,v);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):b.done()}).next(()=>a)}ie(e,t){return xp(e).put(function(r,i,a){const[l,f,m]=mD(i,a.mutation.key);return{userId:i,collectionPath:f,documentId:m,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:gh(r.ne,a.mutation)}}(this.wt,this.userId,t))}}function xp(n){return zr(n,"documentOverlays")}class bl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(vr(e.integerValue));else if("doubleValue"in e){const r=vr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),kc(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Oc(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?h0(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):it()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),Xe.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function G0(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function TS(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=G0(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}bl.ye=new bl;class vD{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=TS(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=TS(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class W0{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class AS{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Mp{constructor(){this.Me=new vD,this.Fe=new W0(this.Me),this.$e=new AS(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class vh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vh(this.indexId,this.documentKey,this.arrayValue,r)}}function wh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=wD(n.arrayValue,e.arrayValue),0!==t?t:(t=wD(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function wD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class SS{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=up(e);if(void 0!==t&&!this.Qe(t))return!1;const r=gl(e);let i=0,a=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const l=r[i];if(!this.je(this.Ke,l)||!this.We(this.Ue[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ue.length||!this.We(this.Ue[a++],l))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class xS{constructor(){this.ze=new ED}addToCollectionParentIndex(e,t){return this.ze.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(bs.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(bs.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class ED{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new yn(nn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new yn(nn.comparator)).toArray()}}const z0=new Uint8Array(0);class $N{constructor(e,t){this.user=e,this.databaseId=t,this.He=new ED,this.Je=new Hc(r=>Uc(r),(r,i)=>sh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const a={collectionId:r,parent:Ii(i)};return MS(e).put(a)}return de.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[GA(t),""],!1,!0);return MS(e).K(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Oo(l.parent))}return r})}addFieldIndex(e,t){const r=c_(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(f=>[f.fieldPath.canonicalString(),f.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=d_(e);return a.next(f=>{l.put(_D(f,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=c_(e),i=d_(e),a=l_(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=l_(e);let i=!0;const a=new Map;return de.forEach(this.Ye(t),l=>this.Xe(e,l).next(f=>{i&&(i=!!f),a.set(l,f)})).next(()=>{if(i){let l=Gt();const f=[];return de.forEach(a,(m,v)=>{var b;Be("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${Uc(t)}`);const S=function(Lt,kt){const on=up(kt);if(void 0===on)return null;for(const vn of gp(Lt,on.fieldPath))switch(vn.op){case"array-contains-any":return vn.value.arrayValue.values||[];case"array-contains":return[vn.value]}return null}(v,m),P=function(Lt,kt){const on=new Map;for(const vn of gl(kt))for(const rs of gp(Lt,vn.fieldPath))switch(rs.op){case"==":case"in":on.set(vn.fieldPath.canonicalString(),rs.value);break;case"not-in":case"!=":return on.set(vn.fieldPath.canonicalString(),rs.value),Array.from(on.values())}return null}(v,m),U=function(Lt,kt){const on=[];let vn=!0;for(const rs of gl(kt)){const jw=0===rs.kind?_0(Lt,rs.fieldPath,Lt.startAt):FC(Lt,rs.fieldPath,Lt.startAt);on.push(jw.value),vn&&(vn=jw.inclusive)}return new hu(on,vn)}(v,m),Q=function(Lt,kt){const on=[];let vn=!0;for(const rs of gl(kt)){const jw=0===rs.kind?FC(Lt,rs.fieldPath,Lt.endAt):_0(Lt,rs.fieldPath,Lt.endAt);on.push(jw.value),vn&&(vn=jw.inclusive)}return new hu(on,vn)}(v,m),be=this.Ze(m,v,U),$e=this.Ze(m,v,Q),ct=this.tn(m,v,P),Ct=this.en(m.indexId,S,be,U.inclusive,$e,Q.inclusive,ct);return de.forEach(Ct,Lt=>r.j(Lt,t.limit).next(kt=>{kt.forEach(on=>{const vn=Xe.fromSegments(on.documentKey);l.has(vn)||(l=l.add(vn),f.push(vn))})}))}).next(()=>f)}return de.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,a,l,f){const m=(null!=t?t.length:1)*Math.max(r.length,a.length),v=m/(null!=t?t.length:1),b=[];for(let S=0;S<m;++S){const P=t?this.nn(t[S/v]):z0,U=this.sn(e,P,r[S%v],i),Q=this.rn(e,P,a[S%v],l),be=f.map($e=>this.sn(e,P,$e,!0));b.push(...this.createRange(U,Q,be))}return b}sn(e,t,r,i){const a=new vh(e,Xe.empty(),t,r);return i?a:a.Le()}rn(e,t,r,i){const a=new vh(e,Xe.empty(),t,r);return i?a.Le():a}Xe(e,t){const r=new SS(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const f of a)r.Ge(f)&&(!l||f.fields.length>l.fields.length)&&(l=f);return l})}getIndexType(e,t){let r=2;return de.forEach(this.Ye(t),i=>this.Xe(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let f=new yn(or.comparator),m=!1;for(const v of l.filters){const b=v;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?m=!0:f=f.add(b.field))}for(const v of l.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new Mp;for(const i of gl(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Be(i.kind);bl.ye.re(a,l)}return r.Oe()}nn(e){const t=new Mp;return bl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new Mp;return bl.ye.re(du(this.databaseId,t),r.Be(function(i){const a=gl(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new Mp);let a=0;for(const l of gl(e)){const f=r[a++];for(const m of i)if(this.cn(t,l.fieldPath)&&pp(f))i=this.an(i,l,f);else{const v=m.Be(l.kind);bl.ye.re(f,v)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const f of i){const m=new Mp;m.seed(f.Oe()),bl.ye.re(l,m.Be(t.kind)),a.push(m)}return a}cn(e,t){return!!e.filters.find(r=>r instanceof ti&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=c_(e),i=d_(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(a=>{const l=[];return de.forEach(a,f=>i.get([f.indexId,this.uid]).next(m=>{l.push(function(v,b){const S=b?new th(b.sequenceNumber,new bs(_h(b.readTime),new Xe(Oo(b.documentKey)),b.largestBatchId)):th.empty(),P=v.fields.map(([U,Q])=>new lp(or.fromServerFormat(U),Q));return new jm(v.indexId,v.collectionGroup,P,S)}(f,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Ft(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=c_(e),a=d_(e);return this.ln(e).next(l=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(f=>de.forEach(f,m=>a.put(_D(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return de.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?de.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(f=>(r.set(i.collectionGroup,f),de.forEach(f,m=>this.fn(e,i,m).next(v=>{const b=this.dn(a,m);return v.isEqual(b)?de.resolve():this._n(e,a,m,v,b)}))))})}wn(e,t,r,i){return l_(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return l_(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=l_(e);let a=new yn(wh);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(l,f)=>{a=a.add(new vh(r.indexId,t,f.arrayValue,f.directionalValue))}).next(()=>a)}dn(e,t){let r=new yn(wh);const i=this.on(t,e);if(null==i)return r;const a=up(t);if(null!=a){const l=e.data.field(a.fieldPath);if(pp(l))for(const f of l.arrayValue.values||[])r=r.add(new vh(t.indexId,e.key,this.nn(f),i))}else r=r.add(new vh(t.indexId,e.key,z0,i));return r}_n(e,t,r,i,a){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(f,m,v,b,S){const P=f.getIterator(),U=m.getIterator();let Q=Pc(P),be=Pc(U);for(;Q||be;){let $e=!1,ct=!1;if(Q&&be){const Ct=v(Q,be);Ct<0?ct=!0:Ct>0&&($e=!0)}else null!=Q?ct=!0:$e=!0;$e?(b(be),be=Pc(U)):ct?(S(Q),Q=Pc(P)):(Q=Pc(P),be=Pc(U))}}(i,a,wh,f=>{l.push(this.wn(e,t,r,f))},f=>{l.push(this.mn(e,t,r,f))}),de.waitFor(l)}ln(e){let t=1;return d_(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,f)=>wh(l,f)).filter((l,f,m)=>!f||0!==wh(l,m[f-1]));const i=[];i.push(e);for(const l of r){const f=wh(l,e),m=wh(l,t);if(0===f)i[0]=e.Le();else if(f>0&&m<0)i.push(l),i.push(l.Le());else if(m>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,z0,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,z0,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(RS)}getMinOffset(e,t){return de.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||it())).next(RS)}}function MS(n){return zr(n,"collectionParents")}function l_(n){return zr(n,"indexEntries")}function c_(n){return zr(n,"indexConfiguration")}function d_(n){return zr(n,"indexState")}function RS(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;o0(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new bs(e.readTime,e.documentKey,t)}const NS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function s(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let f=0;const m=r.J({range:l},(b,S,P)=>(f++,P.delete()));a.push(m.next(()=>{Dt(1===f)}));const v=[];for(const b of t.mutations){const S=Tp(e,b.key.path,t.batchId);a.push(i.delete(S)),v.push(b.key)}return de.waitFor(a).next(()=>v)}function o(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class u{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new u(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return h(e).J({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=p(e),l=h(e);return l.add({}).next(f=>{Dt("number"==typeof f);const m=new gu(f,t,r,i),v=function(P,U,Q){const be=Q.baseMutations.map(ct=>gh(P.ne,ct)),$e=Q.mutations.map(ct=>gh(P.ne,ct));return{userId:U,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:be,mutations:$e}}(this.wt,this.userId,m),b=[];let S=new yn((P,U)=>Ft(P.canonicalString(),U.canonicalString()));for(const P of i){const U=Tp(this.userId,P.key.path,f);S=S.add(P.key.path.popLast()),b.push(l.put(v)),b.push(a.put(U,cD))}return S.forEach(P=>{b.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.gn[f]=m.keys()}),de.waitFor(b).next(()=>m)})}lookupMutationBatch(e,t){return h(e).get(t).next(r=>r?(Dt(r.userId===this.userId),yh(this.wt,r)):null)}yn(e,t){return this.gn[t]?de.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return h(e).J({index:"userMutationsIndex",range:i},(l,f,m)=>{f.userId===this.userId&&(Dt(f.batchId>=r),a=yh(this.wt,f)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return h(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return h(e).K("userMutationsIndex",t).next(r=>r.map(i=>yh(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Wc(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return p(e).J({range:i},(l,f,m)=>{const[v,b,S]=l,P=Oo(b);if(v===this.userId&&t.path.isEqual(P))return h(e).get(S).next(U=>{if(!U)throw it();Dt(U.userId===this.userId),a.push(yh(this.wt,U))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Ft);const i=[];return t.forEach(a=>{const l=Wc(this.userId,a.path),f=IDBKeyRange.lowerBound(l),m=p(e).J({range:f},(v,b,S)=>{const[P,U,Q]=v,be=Oo(U);P===this.userId&&a.path.isEqual(be)?r=r.add(Q):S.done()});i.push(m)}),de.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Wc(this.userId,r),l=IDBKeyRange.lowerBound(a);let f=new yn(Ft);return p(e).J({range:l},(m,v,b)=>{const[S,P,U]=m,Q=Oo(P);S===this.userId&&r.isPrefixOf(Q)?Q.length===i&&(f=f.add(U)):b.done()}).next(()=>this.pn(e,f))}pn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(h(e).get(a).next(l=>{if(null===l)throw it();Dt(l.userId===this.userId),r.push(yh(this.wt,l))}))}),de.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return s(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),de.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return de.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return p(e).J({range:r},(a,l,f)=>{if(a[0]===this.userId){const m=Oo(a[1]);i.push(m)}else f.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return c(e,this.userId,t)}Tn(e){return y(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function c(n,e,t){const r=Wc(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return p(n).J({range:a,H:!0},(f,m,v)=>{const[b,S,P]=f;b===e&&S===i&&(l=!0),v.done()}).next(()=>l)}function h(n){return zr(n,"mutations")}function p(n){return zr(n,"documentMutations")}function y(n){return zr(n,"mutationQueues")}class E{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new E(0)}static Rn(){return new E(-1)}}class C{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new E(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>xt.fromTimestamp(new Qn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>A(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return A(e).J((l,f)=>{const m=a_(f);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>de.waitFor(a)).next(()=>i)}forEachTarget(e,t){return A(e).J((r,i)=>{const a=a_(i);t(a)})}bn(e){return R(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Pn(e,t){return R(e).put("targetGlobalKey",t)}vn(e,t){return A(e).put(U0(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Uc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return A(e).J({range:i,index:"queryTargetsIndex"},(l,f,m)=>{const v=a_(f);sh(t,v.target)&&(a=v,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=F(e);return t.forEach(l=>{const f=Ii(l.path);i.push(a.put({targetId:r,path:f})),i.push(this.referenceDelegate.addReference(e,r,l))}),de.waitFor(i)}removeMatchingKeys(e,t,r){const i=F(e);return de.forEach(t,a=>{const l=Ii(a.path);return de.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=F(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=F(e);let a=Gt();return i.J({range:r,H:!0},(l,f,m)=>{const v=Oo(l[1]),b=new Xe(v);a=a.add(b)}).next(()=>a)}containsKey(e,t){const r=Ii(t.path),i=IDBKeyRange.bound([r],[GA(r)],!1,!0);let a=0;return F(e).J({index:"documentTargetsIndex",H:!0,range:i},([l,f],m,v)=>{0!==l&&(a++,v.done())}).next(()=>a>0)}te(e,t){return A(e).get(t).next(r=>r?a_(r):null)}}function A(n){return zr(n,"targets")}function R(n){return zr(n,"targetGlobal")}function F(n){return zr(n,"targetDocuments")}function Y([n,e],[t,r]){const i=Ft(n,t);return 0===i?Ft(e,r):i}class re{constructor(e){this.Sn=e,this.buffer=new yn(Y),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Y(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ae{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ml(r)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Mc(r)}yield t.kn(3e5)}))}}class je{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return de.resolve(es.ot);const r=new re(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(NS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NS):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,a,l,f,m,v;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,f=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(v=Date.now(),Sc()<=ui.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-b}ms\n\tDetermined least recently used ${i} in `+(f-l)+`ms\n\tRemoved ${a} targets in `+(m-f)+`ms\n\tRemoved ${S} documents in `+(v-m)+`ms\nTotal Duration: ${v-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class et{constructor(e,t){this.db=e,this.garbageCollector=new je(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return st(e,r)}removeReference(e,t,r){return st(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return st(e,t)}Un(e,t){return function(r,i){let a=!1;return y(r).Y(l=>c(r,l,i).next(f=>(f&&(a=!0),de.resolve(!f)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ln(e,(l,f)=>{if(f<=t){const m=this.Un(e,l).next(v=>{if(!v)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,xt.min()),F(e).delete([0,Ii(l.path)])))});i.push(m)}}).next(()=>de.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return st(e,t)}Ln(e,t){const r=F(e);let i,a=es.ot;return r.J({index:"documentTargetsIndex"},([l,f],{path:m,sequenceNumber:v})=>{0===l?(a!==es.ot&&t(new Xe(Oo(i)),a),a=v,i=m):a=es.ot}).next(()=>{a!==es.ot&&t(new Xe(Oo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function st(n,e){return F(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ii(e.path),sequenceNumber:r}));var r}class bt{constructor(){this.changes=new Hc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Le{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return xs(e).put(r)}removeEntry(e,t,r){return xs(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],zc(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=kn.newInvalidDocument(t);return xs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qc(t))},(i,a)=>{r=this.Kn(t,a)}).next(()=>r)}Gn(e,t){let r={size:0,document:kn.newInvalidDocument(t)};return xs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(qc(t))},(i,a)=>{r={document:this.Kn(t,a),size:o(a)}}).next(()=>r)}getEntries(e,t){let r=Ui();return this.Qn(e,t,(i,a)=>{const l=this.Kn(i,a);r=r.insert(i,l)}).next(()=>r)}jn(e,t){let r=Ui(),i=new Un(Xe.comparator);return this.Qn(e,t,(a,l)=>{const f=this.Kn(a,l);r=r.insert(a,f),i=i.insert(a,o(l))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return de.resolve();let i=new yn(f_);t.forEach(m=>i=i.add(m));const a=IDBKeyRange.bound(qc(i.first()),qc(i.last())),l=i.getIterator();let f=l.getNext();return xs(e).J({index:"documentKeyIndex",range:a},(m,v,b)=>{const S=Xe.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;f&&f_(f,S)<0;)r(f,null),f=l.getNext();f&&f.isEqual(S)&&(r(f,v),f=l.hasNext()?l.getNext():null),f?b.q(qc(f)):b.done()}).next(()=>{for(;f;)r(f,null),f=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),zc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xs(e).K(IDBKeyRange.bound(i,a,!0)).next(l=>{let f=Ui();for(const m of l){const v=this.Kn(Xe.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);f=f.insert(v.key,v)}return f})}getAllFromCollectionGroup(e,t,r,i){let a=Ui();const l=h_(t,r),f=h_(t,bs.max());return xs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,f,!0)},(m,v,b)=>{const S=this.Kn(Xe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);a=a.insert(S.key,S),a.size===i&&b.done()}).next(()=>a)}newChangeBuffer(e){return new rn(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bn(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}qn(e,t){return Bn(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function V0(n,e){let t;if(e.document)t=nD(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=_h(e.noDocument.readTime);t=kn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Xe.fromSegments(e.unknownDocument.path),i=_h(e.unknownDocument.version);t=kn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Qn(r[0],r[1]);return xt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return kn.newInvalidDocument(e)}}function vt(n){return new Le(n)}class rn extends bt{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Hc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new yn((a,l)=>Ft(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const f=this.Hn.get(a);if(t.push(this.zn.removeEntry(e,a,f.readTime)),l.isValidDocument()){const m=o_(this.zn.wt,l);i=i.add(a.path.popLast()),r+=o(m)-f.size,t.push(this.zn.addEntry(e,a,m))}else if(r-=f.size,this.trackRemovals){const m=o_(this.zn.wt,l.convertToNoDocument(xt.min()));t.push(this.zn.addEntry(e,a,m))}}),i.forEach(a=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.zn.updateMetadata(e,r)),de.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((a,l)=>{this.Hn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Bn(n){return zr(n,"remoteDocumentGlobal")}function xs(n){return zr(n,"remoteDocumentsV14")}function qc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function h_(n,e){const t=e.documentKey.path.toArray();return[n,zc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function f_(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Ft(t[a],r[a]),i)return i;return i=Ft(t.length,r.length),i||(i=Ft(t[t.length-2],r[r.length-2]),i||Ft(t[t.length-1],r[r.length-1]))}class q0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class p_{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&ch(r.mutation,i,Ts.empty(),Qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Gt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Gt()){const i=fu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=hh();return a.forEach((f,m)=>{l=l.insert(f,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=fu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Gt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,f)=>{t.set(l,f)})})}computeViews(e,t,r,i){let a=Ui();const l=Ep(),f=Ep();return t.forEach((m,v)=>{const b=r.get(v.key);i.has(v.key)&&(void 0===b||b.mutation instanceof Cl)?a=a.insert(v.key,v):void 0!==b&&(l.set(v.key,b.mutation.getFieldMask()),ch(b.mutation,v,b.mutation.getFieldMask(),Qn.now()))}),this.recalculateAndSaveOverlays(e,a).next(m=>(m.forEach((v,b)=>l.set(v,b)),t.forEach((v,b)=>{var S;return f.set(v,new q0(b,null!==(S=l.get(v))&&void 0!==S?S:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Ep();let i=new Un((l,f)=>l-f),a=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const f of l)f.keys().forEach(m=>{const v=t.get(m);if(null===v)return;let b=r.get(m)||Ts.empty();b=f.applyToLocalView(v,b),r.set(m,b);const S=(i.get(f.batchId)||Gt()).add(m);i=i.insert(f.batchId,S)})}).next(()=>{const l=[],f=i.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),v=m.key,b=m.value,S=QC();b.forEach(P=>{if(!a.has(P)){const U=KC(t.get(P),r.get(P));null!==U&&S.set(P,U),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,v,S))}return de.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Km(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):de.resolve(fu());let f=-1,m=a;return l.next(v=>de.forEach(v,(b,S)=>(f<S.largestBatchId&&(f=S.largestBatchId),a.get(b)?de.resolve():this.getBaseDocument(e,b,S).next(P=>{m=m.insert(b,P)}))).next(()=>this.populateOverlays(e,v,a)).next(()=>this.computeViews(e,m,v,Gt())).next(b=>({batchId:f,changes:uS(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(r=>{let i=hh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=hh();return this.indexManager.getCollectionParents(e,i).next(l=>de.forEach(l,f=>{const m=(v=t,b=f.child(i),new _a(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,b;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(v=>{v.forEach((b,S)=>{a=a.insert(b,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((f,m)=>{const v=m.getKey();null===i.get(v)&&(i=i.insert(v,kn.newInvalidDocument(v)))});let l=hh();return i.forEach((f,m)=>{const v=a.get(f);void 0!==v&&ch(v.mutation,m,Ts.empty(),Qn.now()),Jm(t,m)&&(l=l.insert(f,m))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):de.resolve(kn.newInvalidDocument(t))}}class Z0{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return de.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:ni(r.createTime)}),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:B0(r.bundledQuery),readTime:ni(r.readTime)}),de.resolve();var r}}class K0{constructor(){this.overlays=new Un(Xe.comparator),this.Xn=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fu();return de.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ie(e,t,a)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Xn.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=fu(),a=t.length+1,l=new Xe(t.child("")),f=this.overlays.getIteratorFrom(l);for(;f.hasNext();){const m=f.getNext().value,v=m.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Un((v,b)=>v-b);const l=this.overlays.getIterator();for(;l.hasNext();){const v=l.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let b=a.get(v.largestBatchId);null===b&&(b=fu(),a=a.insert(v.largestBatchId,b)),b.set(v.getKey(),v)}}const f=fu(),m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((v,b)=>f.set(v,b)),!(f.size()>=i)););return de.resolve(f)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Sp(t,r));let a=this.Xn.get(t);void 0===a&&(a=Gt(),this.Xn.set(t,a)),this.Xn.set(t,a.add(r.key))}}class Rp{constructor(){this.Zn=new yn(Or.ts),this.es=new yn(Or.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Or(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Or(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new Xe(new nn([])),r=new Or(t,e),i=new Or(t,e+1),a=[];return this.es.forEachInRange([r,i],l=>{this.rs(l),a.push(l.key)}),a}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Xe(new nn([])),r=new Or(t,e),i=new Or(t,e+1);let a=Gt();return this.es.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new Or(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Or{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Xe.comparator(e.key,t.key)||Ft(e.ls,t.ls)}static ns(e,t){return Ft(e.ls,t.ls)||Xe.comparator(e.key,t.key)}}class DF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new yn(Or.ts)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.fs;this.fs++;const l=new gu(a,t,r,i);this.mutationQueue.push(l);for(const f of i)this.ds=this.ds.add(new Or(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return de.resolve(l)}lookupMutationBatch(e,t){return de.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),a=i<0?0:i;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Or(t,0),i=new Or(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],l=>{const f=this._s(l.ls);a.push(f)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new yn(Ft);return t.forEach(i=>{const a=new Or(i,0),l=new Or(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([a,l],f=>{r=r.add(f.ls)})}),de.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new Or(new Xe(a),0);let f=new yn(Ft);return this.ds.forEachWhile(m=>{const v=m.key.path;return!!r.isPrefixOf(v)&&(v.length===i&&(f=f.add(m.ls)),!0)},l),de.resolve(this.gs(f))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return de.forEach(t.mutations,i=>{const a=new Or(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Or(t,0),i=this.ds.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return de.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bF{constructor(e){this.ps=e,this.docs=new Un(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():kn.newInvalidDocument(i))}),de.resolve(r)}getAllFromCollection(e,t,r){let i=Ui();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:f,value:{document:m}}=l.getNext();if(!t.isPrefixOf(f.path))break;f.path.length>t.length+1||o0(bC(m),r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return de.resolve(i)}getAllFromCollectionGroup(e,t,r,i){it()}Is(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new TF(this)}getSize(e){return de.resolve(this.size)}}class TF extends bt{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class AF{constructor(e){this.persistence=e,this.Ts=new Hc(t=>Uc(t),sh),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.Es=0,this.As=new Rp,this.targetCount=0,this.Rs=E.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),de.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new E(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.vn(t),de.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Ts.forEach((l,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Ts.delete(l),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),i++)}),de.waitFor(a).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.As.containsKey(t))}}class HN{constructor(e,t){this.bs={},this.overlays={},this.Ps=new es(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new AF(this),this.indexManager=new xS,this.remoteDocumentCache=new bF(r=>this.referenceDelegate.Ss(r)),this.wt=new gD(t),this.Ds=new Z0(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new K0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new DF(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new SF(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(a=>this.referenceDelegate.xs(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ns(e,t){return de.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class SF extends a0{constructor(e){super(),this.currentSequenceNumber=e}}class ID{constructor(e){this.persistence=e,this.ks=new Rp,this.Os=null}static Ms(e){return new ID(e)}get Fs(){if(this.Os)return this.Os;throw it()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),de.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Fs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Fs,r=>{const i=Xe.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i,xt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return de.or([()=>de.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class xF{constructor(e){this.wt=e}O(e,t,r,i){const a=new Hm("createOrUpgrade",t);var f;r<1&&i>=1&&(e.createObjectStore("owner"),(f=e).createObjectStore("mutationQueues",{keyPath:"userId"}),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",F0,{unique:!0}),f.createObjectStore("documentMutations"),GN(e),function(f){f.createObjectStore("remoteDocuments")}(e));let l=de.resolve();return r<3&&i>=3&&(0!==r&&(function(f){f.deleteObjectStore("targetDocuments"),f.deleteObjectStore("targets"),f.deleteObjectStore("targetGlobal")}(e),GN(e)),l=l.next(()=>function(f){const m=f.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:xt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",v)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(f,m){return m.store("mutations").K().next(v=>{f.deleteObjectStore("mutations"),f.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",F0,{unique:!0});const b=m.store("mutations"),S=v.map(P=>b.put(P));return de.waitFor(S)})}(e,a))),l=l.next(()=>{!function(f){f.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Bs(a))),r<6&&i>=6&&(l=l.next(()=>(function(f){f.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(a)))),r<7&&i>=7&&(l=l.next(()=>this.Us(a))),r<8&&i>=8&&(l=l.next(()=>this.qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Ks(a))),r<11&&i>=11&&(l=l.next(()=>{(function(f){f.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(f){f.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(f){const m=f.createObjectStore("documentOverlays",{keyPath:VN});m.createIndex("collectionPathOverlayIndex",UN,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",BN,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(f){const m=f.createObjectStore("remoteDocumentsV14",{keyPath:yS});m.createIndex("documentKeyIndex",dD),m.createIndex("collectionGroupIndex",hD)}(e)).next(()=>this.Gs(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.Qs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(f){f.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),f.createObjectStore("indexState",{keyPath:fD}).createIndex("sequenceNumberIndex",ES,{unique:!1}),f.createObjectStore("indexEntries",{keyPath:IS}).createIndex("documentKeyIndex",CS,{unique:!1})}(e))),l}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=o(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>de.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",l).next(f=>de.forEach(f,m=>{Dt(m.userId===a.userId);const v=yh(this.wt,m);return s(e,a.userId,v).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.J((l,f)=>{const m=new nn(l),v=[0,Ii(m)];a.push(t.get(v).next(b=>b?de.resolve():t.put({targetId:0,path:Ii(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>de.waitFor(a))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:LN});const r=t.store("collectionParents"),i=new ED,a=l=>{if(i.add(l)){const f=l.lastSegment(),m=l.popLast();return r.put({collectionId:f,parent:Ii(m)})}};return t.store("remoteDocuments").J({H:!0},(l,f)=>{const m=new nn(l);return a(m.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([l,f,m],v)=>{const b=Oo(f);return a(b.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const a=a_(i),l=U0(this.wt,a);return t.put(l)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((a,l)=>{const f=t.store("remoteDocumentsV14"),m=(v=l,v.document?new Xe(nn.fromString(v.document.name).popFirst(5)):v.noDocument?Xe.fromSegments(v.noDocument.path):v.unknownDocument?Xe.fromSegments(v.unknownDocument.path):it()).path.toArray();var v;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(f.put(b))}).next(()=>de.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=vt(this.wt),a=new HN(ID.Ms,this.wt.ne);return r.K().next(l=>{const f=new Map;return l.forEach(m=>{var v;let b=null!==(v=f.get(m.userId))&&void 0!==v?v:Gt();yh(this.wt,m).keys().forEach(S=>b=b.add(S)),f.set(m.userId,b)}),de.forEach(f,(m,v)=>{const b=new Wr(v),S=u_.se(this.wt,b),P=a.getIndexManager(b),U=u.se(b,this.wt,P,a.referenceDelegate);return new p_(i,U,S,P).recalculateAndSaveOverlaysForDocumentKeys(new L0(t,es.ot),m).next()})})}}function GN(n){n.createObjectStore("targetDocuments",{keyPath:wS}).createIndex("documentTargetsIndex",FN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vS,{unique:!0}),n.createObjectStore("targetGlobal")}const PS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class OS{constructor(e,t,r,i,a,l,f,m,v,b,S=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=a,this.window=l,this.document=f,this.Ws=v,this.zs=b,this.Hs=S,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=P=>Promise.resolve(),!OS.V())throw new Ve(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new et(this,i),this.ei=t+"main",this.wt=new gD(m),this.ni=new ga(this.ei,this.Hs,new xF(this.wt)),this.Vs=new C(this.referenceDelegate,this.wt),this.remoteDocumentCache=vt(this.wt),this.Ds=new yD,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===b&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ve(pe.FAILED_PRECONDITION,PS);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new es(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ie.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>CD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(ml(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Y0(e).get("owner").next(t=>de.resolve(this.di(t)))}_i(e){return CD(e).delete(this.clientId)}wi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zr(r,"clientMetadata");return i.K().next(a=>{const l=e.gi(a,18e5),f=a.filter(m=>-1===l.indexOf(m));return de.forEach(f,m=>i.delete(m.clientId)).next(()=>f)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?de.resolve(!0):Y0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new Ve(pe.FAILED_PRECONDITION,PS);return!1}}return!(!this.networkEnabled||!this.inForeground)||CD(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,f=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&f)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new L0(t,es.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>CD(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return u.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $N(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return u_.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Hs)?bS:14===l?Ap:13===l?pD:12===l?jN:11===l?DS:void it();var l;let f;return this.ni.runTransaction(e,i,a,m=>(f=new L0(m,this.Ps?this.Ps.next():es.ot),"readwrite-primary"===t?this.ai(f).next(v=>!!v||this.hi(f)).next(v=>{if(!v)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new Ve(pe.FAILED_PRECONDITION,TC);return r(f)}).next(v=>this.fi(f).next(()=>v)):this.bi(f).next(()=>r(f)))).then(m=>(f.raiseOnCommittedEvent(),m))}bi(e){return Y0(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ve(pe.FAILED_PRECONDITION,PS)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Y0(e).put("owner",t)}static V(){return ga.V()}li(e){const t=Y0(e);return t.get("owner").next(r=>this.di(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):de.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Y0(n){return zr(n,"owner")}function CD(n){return zr(n,"clientMetadata")}function kS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class FS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=Gt(),i=Gt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new FS(e,t.fromCache,r,i)}}class WN{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(a=>a||this.xi(e,t,i,r)).next(a=>a||this.Ni(e,t))}Ci(e,t){return de.resolve(null)}xi(e,t,r,i){return function uh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(xt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(a=>{const l=this.ki(t,a);return this.Oi(t,l,r,i)?this.Ni(e,t):(Sc()<=ui.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),w0(t)),this.Mi(e,l,t,s0(i,-1)))})}ki(e,t){let r=new yn(jC(e));return t.forEach((i,a)=>{Jm(e,a)&&(r=r.add(a))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ni(e,t){return Sc()<=ui.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",w0(t)),this.Di.getDocumentsMatchingQuery(e,t,bs.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class MF{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Un(Ft),this.Bi=new Hc(a=>Uc(a),sh),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new p_(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function zN(n,e,t,r){return new MF(n,e,t,r)}function qN(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,Ie.Z)(function*(n,e){const t=rt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],f=[];let m=Gt();for(const v of i){l.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}for(const v of a){f.push(v.batchId);for(const b of v.mutations)m=m.add(b.key)}return t.localDocuments.getDocuments(r,m).next(v=>({Ki:v,removedBatchIds:l,addedBatchIds:f}))})})}),LS.apply(this,arguments)}function RF(n,e){const t=rt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Ui.newChangeBuffer({trackRemovals:!0});return function(l,f,m,v){const b=m.batch,S=b.keys();let P=de.resolve();return S.forEach(U=>{P=P.next(()=>v.getEntry(f,U)).next(Q=>{const be=m.docVersions.get(U);Dt(null!==be),Q.version.compareTo(be)<0&&(b.applyToRemoteDocument(Q,m),Q.isValidDocument()&&(Q.setReadTime(m.commitVersion),v.addEntry(Q)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(f,b))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let f=Gt();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(f=f.add(l.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ZN(n){const e=rt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function NF(n,e){const t=rt(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const f=[];e.targetChanges.forEach((b,S)=>{const P=i.get(S);if(!P)return;f.push(t.Vs.removeMatchingKeys(a,b.removedDocuments,S).next(()=>t.Vs.addMatchingKeys(a,b.addedDocuments,S)));let U=P.withSequenceNumber(a.currentSequenceNumber);var Q,be,$e;e.targetMismatches.has(S)?U=U.withResumeToken(Xr.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):b.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(b.resumeToken,r)),i=i.insert(S,U),be=U,$e=b,(0===(Q=P).resumeToken.approximateByteSize()||be.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&f.push(t.Vs.updateTargetData(a,U))});let m=Ui(),v=Gt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,b))}),f.push(KN(a,l,e.documentUpdates).next(b=>{m=b.Gi,v=b.Qi})),!r.isEqual(xt.min())){const b=t.Vs.getLastRemoteSnapshotVersion(a).next(S=>t.Vs.setTargetsMetadata(a,a.currentSequenceNumber,r));f.push(b)}return de.waitFor(f).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,m,v)).next(()=>m)}).then(a=>(t.$i=i,a))}function KN(n,e,t){let r=Gt(),i=Gt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ui();return t.forEach((f,m)=>{const v=a.get(f);m.isFoundDocument()!==v.isFoundDocument()&&(i=i.add(f)),m.isNoDocument()&&m.version.isEqual(xt.min())?(e.removeEntry(f,m.readTime),l=l.insert(f,m)):!v.isValidDocument()||m.version.compareTo(v.version)>0||0===m.version.compareTo(v.version)&&v.hasPendingWrites?(e.addEntry(m),l=l.insert(f,m)):Be("LocalStore","Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",m.version)}),{Gi:l,Qi:i}})}function PF(n,e){const t=rt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function g_(n,e){const t=rt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(a=>a?(i=a,de.resolve(i)):t.Vs.allocateTargetId(r).next(l=>(i=new ya(e,l,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function m_(n,e,t){return VS.apply(this,arguments)}function VS(){return VS=(0,Ie.Z)(function*(n,e,t){const r=rt(n),i=r.$i.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!ml(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),VS.apply(this,arguments)}function DD(n,e,t){const r=rt(n);let i=xt.min(),a=Gt();return r.persistence.runTransaction("Execute query","readonly",l=>function(f,m,v){const b=rt(f),S=b.Bi.get(v);return void 0!==S?de.resolve(b.$i.get(S)):b.Vs.getTargetData(m,v)}(r,l,Vi(e)).next(f=>{if(f)return i=f.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(l,f.targetId).next(m=>{a=m})}).next(()=>r.Fi.getDocumentsMatchingQuery(l,e,t?i:xt.min(),t?a:Gt())).next(f=>(JN(r,jc(e),f),{documents:f,ji:a})))}function YN(n,e){const t=rt(n),r=rt(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.te(a,e).next(l=>l?l.target:null))}function QN(n,e){const t=rt(n),r=t.Li.get(e)||xt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,s0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(JN(t,e,i),i))}function JN(n,e,t){let r=xt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Li.set(e,r)}function US(){return US=(0,Ie.Z)(function*(n,e,t,r){const i=rt(n);let a=Gt(),l=Ui();for(const v of t){const b=e.Wi(v.metadata.name);v.document&&(a=a.add(b));const S=e.zi(v);S.setReadTime(e.Hi(v.metadata.readTime)),l=l.insert(b,S)}const f=i.Ui.newChangeBuffer({trackRemovals:!0}),m=yield g_(i,(v=r,Vi(ah(nn.fromString(`__bundle__/docs/${v}`)))));var v;return i.persistence.runTransaction("Apply bundle documents","readwrite",v=>KN(v,f,l).next(b=>(f.apply(v),b)).next(b=>i.Vs.removeMatchingKeysForTargetId(v,m.targetId).next(()=>i.Vs.addMatchingKeys(v,a,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(v,b.Gi,b.Qi)).next(()=>b.Gi)))}),US.apply(this,arguments)}function kF(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,Ie.Z)(function*(n,e,t=Gt()){const r=yield g_(n,Vi(B0(e.bundledQuery))),i=rt(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=ni(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ds.saveNamedQuery(a,e);const f=r.withResumeToken(Xr.EMPTY_BYTE_STRING,l);return i.$i=i.$i.insert(f.targetId,f),i.Vs.updateTargetData(a,f).next(()=>i.Vs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Vs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(a,e))})}),BS.apply(this,arguments)}function XN(n,e){return`firestore_clients_${n}_${e}`}function eP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jS(n,e){return`firestore_targets_${n}_${e}`}class bD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Ve(i.error.code,i.error.message))),l?new bD(e,t,i.state,a):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Q0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Ve(r.error.code,r.error.message))),a?new Q0(e,r.state,i):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class TD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=A0();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=rh(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new TD(e,a):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $S{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $S(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HS{constructor(){this.activeTargetIds=A0()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GS{constructor(e,t,r,i,a){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Un(Ft),this.started=!1,this.ir=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=XN(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new HS),this.cr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(f){return`firestore_bundle_loaded_v2_${f}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const a=e.getItem(XN(e.persistenceKey,i));if(a){const l=TD.Ji(i,a);l&&(e.sr=e.sr.insert(l.clientId,l))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jS(this.persistenceKey,e));if(r){const i=Q0.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(a){let l=es.ot;if(null!=a)try{const f=JSON.parse(a);Dt("number"==typeof f),l=f}catch(f){Pr("SharedClientState","Failed to read sequence number from WebStorage",f)}return l}(r.newValue);i!==es.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Nr(a)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new bD(this.currentUser,e,t,r),a=eP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Yi())}pr(e){const t=eP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=jS(this.persistenceKey,e),a=new Q0(e,t,r);this.setItem(i,a.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return TD.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return bD.Ji(new Wr(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Q0.Ji(i,t)}wr(e){return $S.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),l=[],f=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||f.push(m)}),this.syncEngine.Mr(l,f).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=A0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class tP{constructor(){this.Fr=new HS,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new HS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class FF{Br(e){}shutdown(){}}class nP{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const LF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class VF{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class UF extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,a){const l=this.oo(e,t);Be("RestConnection","Sending: ",l,r);const f={};return this.uo(f,i,a),this.co(e,l,f,r).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw Jd("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}ao(e,t,r,i,a,l){return this.ro(e,t,r,i,a)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+op,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}oo(e,t){return`${this.so}/v1/${t}:${LF[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((a,l)=>{const f=new yC;f.listenOnce(Xv.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Vm.NO_ERROR:const v=f.getResponseJson();Be("Connection","XHR received:",JSON.stringify(v)),a(v);break;case Vm.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Ve(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Vm.HTTP_ERROR:const b=f.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',b,"response text:",f.getResponseText()),b>0){const S=f.getResponseJson().error;if(S&&S.status&&S.message){const P=function(U){const Q=U.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(Q)>=0?Q:pe.UNKNOWN}(S.status);l(new Ve(P,S.message))}else l(new Ve(pe.UNKNOWN,"Server responded with status "+f.getStatus()))}else l(new Ve(pe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);f.send(t,"POST",m,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qv(),l=Jv(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(f.xmlHttpFactory=new e0({})),this.uo(f.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(f.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Be("Connection","Creating WebChannel: "+m,f);const v=a.createWebChannel(m,f);let b=!1,S=!1;const P=new VF({jr:Q=>{S?Be("Connection","Not sending because WebChannel is closed:",Q):(b||(Be("Connection","Opening WebChannel transport."),v.open(),b=!0),Be("Connection","WebChannel sending:",Q),v.send(Q))},Wr:()=>v.close()}),U=(Q,be,$e)=>{Q.listen(be,ct=>{try{$e(ct)}catch(Ct){setTimeout(()=>{throw Ct},0)}})};return U(v,Um.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),U(v,Um.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),P.eo())}),U(v,Um.EventType.ERROR,Q=>{S||(S=!0,Jd("Connection","WebChannel transport errored:",Q),P.eo(new Ve(pe.UNAVAILABLE,"The operation could not be completed")))}),U(v,Um.EventType.MESSAGE,Q=>{var be;if(!S){const $e=Q.data[0];Dt(!!$e);const ct=$e,Ct=ct.error||(null===(be=ct[0])||void 0===be?void 0:be.error);if(Ct){Be("Connection","WebChannel received error:",Ct);const Lt=Ct.status;let kt=function(vn){const rs=Ar[vn];if(void 0!==rs)return b0(rs)}(Lt),on=Ct.message;void 0===kt&&(kt=pe.INTERNAL,on="Unknown error status: "+Lt+" with message "+Ct.message),S=!0,P.eo(new Ve(kt,on)),v.close()}else Be("Connection","WebChannel received:",$e),P.no($e)}}),U(l,BA.STAT_EVENT,Q=>{Q.stat===_C.PROXY?Be("Connection","Detected buffering proxy"):Q.stat===_C.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.Zr()},0),P}}function rP(){return typeof window<"u"?window:null}function AD(){return typeof document<"u"?document:null}function J0(n){return new fS(n,!0)}class WS{constructor(e,t,r=1e3,i=1.5,a=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class iP{constructor(e,t,r,i,a,l,f,m){this.js=e,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new WS(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ie.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new Ve(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Ie.Z)(function*(){e.state=0,e.start()}))}qo(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BF extends iP{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.wt=a}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function Dl(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:it(),i=e.targetChange.targetIds||[],a=function(m,v){return m.dt?(Dt(void 0===v||"string"==typeof v),Xr.fromBase64String(v||"")):(Dt(void 0===v||v instanceof Uint8Array),Xr.fromUint8Array(v||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,f=l&&function(m){const v=void 0===m.code?pe.UNKNOWN:b0(m.code);return new Ve(v,m.message||"")}(l);t=new JC(r,i,a,f||null)}else if("documentChange"in e){const r=e.documentChange,i=Po(n,r.document.name),a=ni(r.document.updateTime),l=new fi({mapValue:{fields:r.document.fields}}),f=kn.newFoundDocument(i,a,l);t=new n_(r.targetIds||[],r.removedTargetIds||[],f.key,f)}else if("documentDelete"in e){const r=e.documentDelete,i=Po(n,r.document),a=r.readTime?ni(r.readTime):xt.min(),l=kn.newNoDocument(i,a);t=new n_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Po(n,r.document);t=new n_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return it();{const r=e.filter,a=new PN(r.count||0);t=new cS(r.targetId,a)}}var m;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return xt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?xt.min():a.readTime?ni(a.readTime):xt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=ph(this.wt),t.addTarget=function(i,a){let l;const f=a.target;return l=qm(f)?{documents:rD(i,f)}:{query:pS(i,f)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=eD(i,a.resumeToken):a.snapshotVersion.compareTo(xt.min())>0&&(l.readTime=pi(i,a.snapshotVersion.toTimestamp())),l}(this.wt,e);const r=function gS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=ph(this.wt),t.removeTarget=e,this.Mo(t)}}class jF extends iP{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.wt=a,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function pu(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=ni(r.updateTime?r.updateTime:i);return a.isEqual(xt.min())&&(a=ni(i)),new ZC(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.Jo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=ph(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>gh(this.wt,r))};this.Mo(t)}}class $F extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new Ve(pe.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.bo.ro(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ve(pe.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.bo.ao(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(pe.UNKNOWN,a.toString())})}terminate(){this.Zo=!0}}class HF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Pr(t),this.su=!1):Be("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class GF{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br(f=>{r.enqueueAndForget((0,Ie.Z)(function*(){var m;Eh(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ie.Z)(function*(v){const b=rt(v);b.lu.add(4),yield __(b),b._u.set("Unknown"),b.lu.delete(4),yield X0(b)}),function(v){return m.apply(this,arguments)})(l))}))}),this._u=new HF(r,i)}}function X0(n){return zS.apply(this,arguments)}function zS(){return zS=(0,Ie.Z)(function*(n){if(Eh(n))for(const e of n.fu)yield e(!0)}),zS.apply(this,arguments)}function __(n){return qS.apply(this,arguments)}function qS(){return qS=(0,Ie.Z)(function*(n){for(const e of n.fu)yield e(!1)}),qS.apply(this,arguments)}function SD(n,e){const t=rt(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),YS(t)?KS(t):v_(t).Co()&&ZS(t,e))}function ew(n,e){const t=rt(n),r=v_(t);t.hu.delete(e),r.Co()&&sP(t,e),0===t.hu.size&&(r.Co()?r.ko():Eh(t)&&t._u.set("Unknown"))}function ZS(n,e){n.wu.Nt(e.targetId),v_(n).Qo(e)}function sP(n,e){n.wu.Nt(e),v_(n).jo(e)}function KS(n){n.wu=new XC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),v_(n).start(),n._u.iu()}function YS(n){return Eh(n)&&!v_(n).Do()&&n.hu.size>0}function Eh(n){return 0===rt(n).lu.size}function oP(n){n.wu=void 0}function WF(n){return QS.apply(this,arguments)}function QS(){return QS=(0,Ie.Z)(function*(n){n.hu.forEach((e,t)=>{ZS(n,e)})}),QS.apply(this,arguments)}function zF(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,Ie.Z)(function*(n,e){oP(n),YS(n)?(n._u.uu(e),KS(n)):n._u.set("Unknown")}),JS.apply(this,arguments)}function qF(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,Ie.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof JC&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(i,a){const l=a.cause;for(const f of a.targetIds)i.hu.has(f)&&(yield i.remoteSyncer.rejectListen(f,l),i.hu.delete(f),i.wu.removeTarget(f))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xD(n,r)}else if(e instanceof n_?n.wu.Ut(e):e instanceof cS?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(xt.min()))try{const r=yield ZN(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.wu.Yt(a);return l.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=i.hu.get(m);v&&i.hu.set(m,v.withResumeToken(f.resumeToken,a))}}),l.targetMismatches.forEach(f=>{const m=i.hu.get(f);if(!m)return;i.hu.set(f,m.withResumeToken(Xr.EMPTY_BYTE_STRING,m.snapshotVersion)),sP(i,f);const v=new ya(m.target,f,1,m.sequenceNumber);ZS(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield xD(n,r)}var r}),XS.apply(this,arguments)}function xD(n,e,t){return ex.apply(this,arguments)}function ex(){return ex=(0,Ie.Z)(function*(n,e,t){if(!ml(e))throw e;n.lu.add(1),yield __(n),n._u.set("Offline"),t||(t=()=>ZN(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield X0(n)}))}),ex.apply(this,arguments)}function aP(n,e){return e().catch(t=>xD(n,t,e))}function y_(n){return tx.apply(this,arguments)}function tx(){return tx=(0,Ie.Z)(function*(n){const e=rt(n),t=Ih(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;ZF(e);)try{const i=yield PF(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,KF(e,i)}catch(i){yield xD(e,i)}uP(e)&&lP(e)}),tx.apply(this,arguments)}function ZF(n){return Eh(n)&&n.au.length<10}function KF(n,e){n.au.push(e);const t=Ih(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function uP(n){return Eh(n)&&!Ih(n).Do()&&n.au.length>0}function lP(n){Ih(n).start()}function YF(n){return nx.apply(this,arguments)}function nx(){return nx=(0,Ie.Z)(function*(n){Ih(n).Xo()}),nx.apply(this,arguments)}function QF(n){return rx.apply(this,arguments)}function rx(){return rx=(0,Ie.Z)(function*(n){const e=Ih(n);for(const t of n.au)e.Ho(t.mutations)}),rx.apply(this,arguments)}function JF(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,Ie.Z)(function*(n,e,t){const r=n.au.shift(),i=s_.from(r,e,t);yield aP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield y_(n)}),ix.apply(this,arguments)}function XF(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,Ie.Z)(function*(n,e){var t;e&&Ih(n).zo&&(yield(t=(0,Ie.Z)(function*(r,i){if(D0(a=i.code)&&a!==pe.ABORTED){const l=r.au.shift();Ih(r).No(),yield aP(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield y_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),uP(n)&&lP(n)}),sx.apply(this,arguments)}function cP(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,Ie.Z)(function*(n,e){const t=rt(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Eh(t);t.lu.add(3),yield __(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield X0(t)}),ox.apply(this,arguments)}function ax(n,e){return ux.apply(this,arguments)}function ux(){return ux=(0,Ie.Z)(function*(n,e){const t=rt(n);e?(t.lu.delete(2),yield X0(t)):e||(t.lu.add(2),yield __(t),t._u.set("Unknown"))}),ux.apply(this,arguments)}function v_(n){return n.mu||(n.mu=function(e,t,r){const i=rt(e);return i.tu(),new BF(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:WF.bind(null,n),Jr:zF.bind(null,n),Go:qF.bind(null,n)}),n.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.mu.No(),YS(n)?KS(n):n._u.set("Unknown")):(yield n.mu.stop(),oP(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function Ih(n){return n.gu||(n.gu=function(e,t,r){const i=rt(e);return i.tu(),new jF(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:YF.bind(null,n),Jr:XF.bind(null,n),Yo:QF.bind(null,n),Jo:JF.bind(null,n)}),n.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.gu.No(),yield y_(n)):(yield n.gu.stop(),n.au.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class lx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,f=new lx(e,t,l,i,a);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ve(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function w_(n,e){if(Pr("AsyncQueue",`${e}: ${n}`),ml(n))return new Ve(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class E_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=hh(),this.sortedSet=new Un(this.comparator)}static emptySet(e){return new E_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof E_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new E_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class dP{constructor(){this.yu=new Un(Xe.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):it():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class I_{constructor(e,t,r,i,a,l,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=f,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new I_(e,t,E_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class eL{constructor(){this.Iu=void 0,this.listeners=[]}}class tL{constructor(){this.queries=new Hc(e=>v0(e),Qm),this.onlineState="Unknown",this.Tu=new Set}}function cx(n,e){return dx.apply(this,arguments)}function dx(){return dx=(0,Ie.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new eL),i)try{a.Iu=yield t.onListen(r)}catch(l){const f=w_(l,`Initialization of query '${w0(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,a),a.listeners.push(e),e.Eu(t.onlineState),a.Iu&&e.Au(a.Iu)&&px(t)}),dx.apply(this,arguments)}function hx(n,e){return fx.apply(this,arguments)}function fx(){return fx=(0,Ie.Z)(function*(n,e){const t=rt(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),fx.apply(this,arguments)}function nL(n,e){const t=rt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const f of l.listeners)f.Au(i)&&(r=!0);l.Iu=i}}r&&px(t)}function rL(n,e,t){const r=rt(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function px(n){n.Tu.forEach(e=>{e.next()})}class gx{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new I_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=I_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class iL{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class hP{constructor(e){this.wt=e}Wi(e){return Po(this.wt,e)}zi(e){return e.metadata.exists?nD(this.wt,e.document,!1):kn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return ni(e)}}class sL{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fP(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=nn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new hP(this.wt);for(const i of e)if(i.metadata.queries){const a=r.Wi(i.metadata.name);for(const l of i.metadata.queries){const f=(t.get(l)||Gt()).add(a);t.set(l,f)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function OF(n,e,t,r){return US.apply(this,arguments)}(e.localStore,new hP(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield kF(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function fP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class pP{constructor(e){this.key=e}}class gP{constructor(e){this.key=e}}class mP{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=Gt(),this.mutatedKeys=Gt(),this.Lu=jC(e),this.Uu=new E_(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new dP,i=t?t.Uu:this.Uu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,f=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,v="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,S)=>{const P=i.get(b),U=Jm(this.query,S)?S:null,Q=!!P&&this.mutatedKeys.has(P.key),be=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let $e=!1;P&&U?P.data.isEqual(U.data)?Q!==be&&(r.track({type:3,doc:U}),$e=!0):this.Qu(P,U)||(r.track({type:2,doc:U}),$e=!0,(m&&this.Lu(U,m)>0||v&&this.Lu(U,v)<0)&&(f=!0)):!P&&U?(r.track({type:0,doc:U}),$e=!0):P&&!U&&(r.track({type:1,doc:P}),$e=!0,(m||v)&&(f=!0)),$e&&(U?(l=l.add(U),a=be?a.add(b):a.delete(b)):(l=l.delete(b),a=a.delete(b)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const b="F"===this.query.limitType?l.last():l.first();l=l.delete(b.key),a=a.delete(b.key),r.track({type:1,doc:b})}return{Uu:l,Gu:r,Oi:f,mutatedKeys:a}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const a=e.Gu.pu();a.sort((v,b)=>function(S,P){const U=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return U(S)-U(P)}(v.type,b.type)||this.Lu(v.doc,b.doc)),this.ju(r);const l=t?this.Wu():[],f=0===this.Bu.size&&this.current?1:0,m=f!==this.$u;return this.$u=f,0!==a.length||m?{snapshot:new I_(this.query,e.Uu,i,a,e.mutatedKeys,0===f,m,!1),zu:l}:{zu:l}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new dP,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Gt(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new gP(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new pP(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=Gt();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return I_.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class oL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class aL{constructor(e){this.key=e,this.Xu=!1}}class uL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Zu={},this.tc=new Hc(f=>v0(f),Qm),this.ec=new Map,this.nc=new Set,this.sc=new Un(Xe.comparator),this.ic=new Map,this.rc=new Rp,this.oc={},this.uc=new Map,this.cc=E.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function lL(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,Ie.Z)(function*(n,e){const t=Ux(n);let r,i;const a=t.tc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Yu();else{const l=yield g_(t.localStore,Vi(e));t.isPrimaryClient&&SD(t.remoteStore,l);const f=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield _x(t,e,r,"current"===f)}return i}),mx.apply(this,arguments)}function _x(n,e,t,r){return yx.apply(this,arguments)}function yx(){return yx=(0,Ie.Z)(function*(n,e,t,r){n.hc=(b,S,P)=>{return(U=(0,Ie.Z)(function*(Q,be,$e,ct){let Ct=be.view.Ku($e);Ct.Oi&&(Ct=yield DD(Q.localStore,be.query,!1).then(({documents:on})=>be.view.Ku(on,Ct)));const Lt=ct&&ct.targetChanges.get(be.targetId),kt=be.view.applyChanges(Ct,Q.isPrimaryClient,Lt);return Sx(Q,be.targetId,kt.zu),kt.snapshot}),function(Q,be,$e,ct){return U.apply(this,arguments)})(n,b,S,P);var U};const i=yield DD(n.localStore,e,!0),a=new mP(e,i.ji),l=a.Ku(i.documents),f=Cp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,f);Sx(n,t,m.zu);const v=new oL(e,t,a);return n.tc.set(e,v),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),m.snapshot}),yx.apply(this,arguments)}function cL(n,e){return vx.apply(this,arguments)}function vx(){return vx=(0,Ie.Z)(function*(n,e){const t=rt(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(a=>!Qm(a,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield m_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),ew(t.remoteStore,r.targetId),C_(t,r.targetId)}).catch(Mc))):(C_(t,r.targetId),yield m_(t.localStore,r.targetId,!0))}),vx.apply(this,arguments)}function wx(){return wx=(0,Ie.Z)(function*(n,e,t){const r=Bx(n);try{const i=yield function(a,l){const f=rt(a),m=Qn.now(),v=l.reduce((P,U)=>P.add(U.key),Gt());let b,S;return f.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=Ui(),Q=Gt();return f.Ui.getEntries(P,v).next(be=>{U=be,U.forEach(($e,ct)=>{ct.isValidDocument()||(Q=Q.add($e))})}).next(()=>f.localDocuments.getOverlayedDocuments(P,U)).next(be=>{b=be;const $e=[];for(const ct of l){const Ct=NN(ct,b.get(ct.key).overlayedDocument);null!=Ct&&$e.push(new Cl(ct.key,Ct,OC(Ct.value.mapValue),Jn.exists(!0)))}return f.mutationQueue.addMutationBatch(P,m,$e,l)}).next(be=>{S=be;const $e=be.applyToLocalDocumentSet(b,Q);return f.documentOverlayCache.saveOverlays(P,be.batchId,$e)})}).then(()=>({batchId:S.batchId,changes:uS(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,f){let m=a.oc[a.currentUser.toKey()];m||(m=new Un(Ft)),m=m.insert(l,f),a.oc[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Zc(r,i.changes),yield y_(r.remoteStore)}catch(i){const a=w_(i,"Failed to persist write");t.reject(a)}}),wx.apply(this,arguments)}function _P(n,e){return Ex.apply(this,arguments)}function Ex(){return Ex=(0,Ie.Z)(function*(n,e){const t=rt(n);try{const r=yield NF(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.ic.get(a);l&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Xu=!0:i.modifiedDocuments.size>0?Dt(l.Xu):i.removedDocuments.size>0&&(Dt(l.Xu),l.Xu=!1))}),yield Zc(t,r,e)}catch(r){yield Mc(r)}}),Ex.apply(this,arguments)}function yP(n,e,t){const r=rt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((a,l)=>{const f=l.view.Eu(e);f.snapshot&&i.push(f.snapshot)}),function(a,l){const f=rt(a);f.onlineState=l;let m=!1;f.queries.forEach((v,b)=>{for(const S of b.listeners)S.Eu(l)&&(m=!0)}),m&&px(f)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hL(n,e,t){return Ix.apply(this,arguments)}function Ix(){return Ix=(0,Ie.Z)(function*(n,e,t){const r=rt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),a=i&&i.key;if(a){let l=new Un(Xe.comparator);l=l.insert(a,kn.newNoDocument(a,xt.min()));const f=Gt().add(a),m=new Ip(xt.min(),new Map,new yn(Ft),l,f);yield _P(r,m),r.sc=r.sc.remove(a),r.ic.delete(e),xx(r)}else yield m_(r.localStore,e,!1).then(()=>C_(r,e,t)).catch(Mc)}),Ix.apply(this,arguments)}function fL(n,e){return Cx.apply(this,arguments)}function Cx(){return Cx=(0,Ie.Z)(function*(n,e){const t=rt(n),r=e.batch.batchId;try{const i=yield RF(t.localStore,e);Ax(t,r,null),Tx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Zc(t,i)}catch(i){yield Mc(i)}}),Cx.apply(this,arguments)}function pL(n,e,t){return Dx.apply(this,arguments)}function Dx(){return Dx=(0,Ie.Z)(function*(n,e,t){const r=rt(n);try{const i=yield function(a,l){const f=rt(a);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return f.mutationQueue.lookupMutationBatch(m,l).next(b=>(Dt(null!==b),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,l)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>f.localDocuments.getDocuments(m,v))})}(r.localStore,e);Ax(r,e,t),Tx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Zc(r,i)}catch(i){yield Mc(i)}}),Dx.apply(this,arguments)}function bx(){return bx=(0,Ie.Z)(function*(n,e){const t=rt(n);Eh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=rt(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>l.mutationQueue.getHighestUnacknowledgedBatchId(f))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=w_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),bx.apply(this,arguments)}function Tx(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function Ax(n,e,t){const r=rt(n);let i=r.oc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function C_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||vP(n,r)})}function vP(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(ew(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),xx(n))}function Sx(n,e,t){for(const r of t)r instanceof pP?(n.rc.addReference(r.key,e),mL(n,r)):r instanceof gP?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||vP(n,r.key)):it()}function mL(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.nc.add(r),xx(n))}function xx(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new Xe(nn.fromString(e)),r=n.cc.next();n.ic.set(r,new aL(t)),n.sc=n.sc.insert(t,r),SD(n.remoteStore,new ya(Vi(ah(t.path)),r,2,es.ot))}}function Zc(n,e,t){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,Ie.Z)(function*(n,e,t){const r=rt(n),i=[],a=[],l=[];var f;r.tc.isEmpty()||(r.tc.forEach((f,m)=>{l.push(r.hc(m,e,t).then(v=>{if(v){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,v.fromCache?"not-current":"current"),i.push(v);const b=FS.Vi(m.targetId,v);a.push(b)}}))}),yield Promise.all(l),r.Zu.Go(i),yield(f=(0,Ie.Z)(function*(m,v){const b=rt(m);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>de.forEach(v,P=>de.forEach(P.Pi,U=>b.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>de.forEach(P.vi,U=>b.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!ml(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const P=S.targetId;if(!S.fromCache){const U=b.$i.get(P),be=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);b.$i=b.$i.insert(P,be)}}}),function(m,v){return f.apply(this,arguments)})(r.localStore,a))}),Mx.apply(this,arguments)}function _L(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,Ie.Z)(function*(n,e){const t=rt(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield qN(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(l=>{l.forEach(f=>{f.reject(new Ve(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Zc(t,r.Ki)}var i}),Rx.apply(this,arguments)}function yL(n,e){const t=rt(n),r=t.ic.get(e);if(r&&r.Xu)return Gt().add(r.key);{let i=Gt();const a=t.ec.get(e);if(!a)return i;for(const l of a){const f=t.tc.get(l);i=i.unionWith(f.view.qu)}return i}}function vL(n,e){return Nx.apply(this,arguments)}function Nx(){return Nx=(0,Ie.Z)(function*(n,e){const t=rt(n),r=yield DD(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&Sx(t,e.targetId,i.zu),i}),Nx.apply(this,arguments)}function wL(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,Ie.Z)(function*(n,e){const t=rt(n);return QN(t.localStore,e).then(r=>Zc(t,r))}),Px.apply(this,arguments)}function EL(n,e,t,r){return Ox.apply(this,arguments)}function Ox(){return Ox=(0,Ie.Z)(function*(n,e,t,r){const i=rt(n),a=yield function(l,f){const m=rt(l),v=rt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",b=>v.yn(b,f).next(S=>S?m.localDocuments.getDocuments(b,S):de.resolve(null)))}(i.localStore,e);var f;null!==a?("pending"===t?yield y_(i.remoteStore):"acknowledged"===t||"rejected"===t?(Ax(i,e,r||null),Tx(i,e),f=e,rt(rt(i.localStore).mutationQueue).In(f)):it(),yield Zc(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ox.apply(this,arguments)}function kx(){return kx=(0,Ie.Z)(function*(n,e){const t=rt(n);if(Ux(t),Bx(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield wP(t,r.toArray());t.ac=!0,yield ax(t.remoteStore,!0);for(const a of i)SD(t.remoteStore,a)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(C_(t,l),m_(t.localStore,l,!0))),ew(t.remoteStore,l)}),yield i,yield wP(t,r),function(a){const l=rt(a);l.ic.forEach((f,m)=>{ew(l.remoteStore,m)}),l.rc.cs(),l.ic=new Map,l.sc=new Un(Xe.comparator)}(t),t.ac=!1,yield ax(t.remoteStore,!1)}}),kx.apply(this,arguments)}function wP(n,e,t){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,Ie.Z)(function*(n,e,t){const r=rt(n),i=[],a=[];for(const l of e){let f;const m=r.ec.get(l);if(m&&0!==m.length){f=yield g_(r.localStore,Vi(m[0]));for(const v of m){const b=r.tc.get(v),S=yield vL(r,b);S.snapshot&&a.push(S.snapshot)}}else{const v=yield YN(r.localStore,l);f=yield g_(r.localStore,v),yield _x(r,EP(v),l,!1)}i.push(f)}return r.Zu.Go(a),i}),Fx.apply(this,arguments)}function EP(n){return BC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CL(n){const e=rt(n);return rt(rt(e.localStore).persistence).Ri()}function DL(n,e,t,r){return Lx.apply(this,arguments)}function Lx(){return Lx=(0,Ie.Z)(function*(n,e,t,r){const i=rt(n);if(i.ac)return void Be("SyncEngine","Ignoring unexpected query state notification.");const a=i.ec.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield QN(i.localStore,jc(a[0])),f=Ip.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Zc(i,l,f);break}case"rejected":yield m_(i.localStore,e,!0),C_(i,e,r);break;default:it()}}),Lx.apply(this,arguments)}function bL(n,e,t){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,Ie.Z)(function*(n,e,t){const r=Ux(n);if(r.ac){for(const i of e){if(r.ec.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield YN(r.localStore,i),l=yield g_(r.localStore,a);yield _x(r,EP(a),l.targetId,!1),SD(r.remoteStore,l)}for(const i of t)r.ec.has(i)&&(yield m_(r.localStore,i,!1).then(()=>{ew(r.remoteStore,i),C_(r,i)}).catch(Mc))}}),Vx.apply(this,arguments)}function Ux(n){const e=rt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_P.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hL.bind(null,e),e.Zu.Go=nL.bind(null,e.eventManager),e.Zu.lc=rL.bind(null,e.eventManager),e}function Bx(n){const e=rt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pL.bind(null,e),e}class IP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.wt=J0(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return zN(this.persistence,new WN,e.initialUser,this.wt)}_c(e){return new HN(ID.Ms,this.wt)}dc(e){return new tP}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class CP extends IP{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield Bx(r.yc.syncEngine),yield y_(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return zN(this.persistence,new WN,e.initialUser,this.wt)}mc(e,t){return new Ae(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new ZA(t,this.persistence);return new qA(e.asyncQueue,r)}_c(e){const t=kS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new OS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,rP(),AD(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new tP}}class AL extends CP{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof GS&&(r.sharedClientState.syncEngine={kr:EL.bind(null,i),Or:DL.bind(null,i),Mr:bL.bind(null,i),Ri:CL.bind(null,i),Nr:wL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var a=(0,Ie.Z)(function*(l){yield function IL(n,e){return kx.apply(this,arguments)}(r.yc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}dc(e){const t=rP();if(!GS.V(t))throw new Ve(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=kS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new GS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class jx{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>yP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=_L.bind(null,r.syncEngine),yield ax(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new tL}createDatastore(e){const t=J0(e.databaseInfo.databaseId),r=new UF(e.databaseInfo);return new $F(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=f=>yP(this.syncEngine,f,0),l=nP.V()?new nP:new FF,new GF(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,f,m,v){const b=new uL(r,i,a,l,f,m);return v&&(b.ac=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=rt(t);Be("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield __(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function DP(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class MD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class SL{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Qr,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const a=yield e.vc(i);return new iL(JSON.parse(a),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class xL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ve(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ie.Z)(function*(a,l){const f=rt(a),m=ph(f.wt)+"/documents",v={documents:l.map(U=>fh(f.wt,U))},b=yield f.ao("BatchGetDocuments",m,v,l.length),S=new Map;b.forEach(U=>{const Q=function k0(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Po(t,r.found.name),a=ni(r.found.updateTime),l=new fi({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Po(t,r.missing),a=ni(r.readTime);return kn.newNoDocument(i,a)}(n,e):it()}(f.wt,U);S.set(Q.key.toString(),Q)});const P=[];return l.forEach(U=>{const Q=S.get(U.toString());Dt(!!Q),P.push(Q)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new dh(a,e.precondition(a)))}),yield(r=(0,Ie.Z)(function*(i,a){const l=rt(i),f=ph(l.wt)+"/documents",m={writes:a.map(v=>gh(l.wt,v))};yield l.ro("Commit",f,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ve(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Jn.updateTime(t):Jn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Ve(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jn.updateTime(t)}return Jn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class ML{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new WS(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ie.Z)(function*(){const t=new xL(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Nc(a)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!fp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!D0(t)}return!1}}class RL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=DC.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ie.Z)(function*(f){Be("FirestoreClient","Received user=",f.uid),yield a.authCredentialListener(f),a.user=f});return function(f){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ve(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=w_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function bP(n,e){return $x.apply(this,arguments)}function $x(){return $x=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ie.Z)(function*(a){r.isEqual(a)||(yield qN(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),$x.apply(this,arguments)}function TP(n,e){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Gx(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>cP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>cP(e.remoteStore,a)),n.onlineComponents=e}),Hx.apply(this,arguments)}function Gx(n){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,Ie.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield bP(n,new IP)),n.offlineComponents}),Wx.apply(this,arguments)}function RD(n){return zx.apply(this,arguments)}function zx(){return zx=(0,Ie.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield TP(n,new jx)),n.onlineComponents}),zx.apply(this,arguments)}function AP(n){return Gx(n).then(e=>e.persistence)}function qx(n){return Gx(n).then(e=>e.localStore)}function SP(n){return RD(n).then(e=>e.remoteStore)}function Zx(n){return RD(n).then(e=>e.syncEngine)}function D_(n){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,Ie.Z)(function*(n){const e=yield RD(n),t=e.eventManager;return t.onListen=lL.bind(null,e.syncEngine),t.onUnlisten=cL.bind(null,e.syncEngine),t}),Kx.apply(this,arguments)}function xP(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,f,m){const v=new MD({next:S=>{a.enqueueAndForget(()=>hx(i,b));const P=S.docs.has(l);!P&&S.fromCache?m.reject(new Ve(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&f&&"server"===f.source?m.reject(new Ve(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new gx(ah(l.path),v,{includeMetadataChanges:!0,Du:!0});return cx(i,b)}(yield D_(n),n.asyncQueue,e,t,r)})),r.promise}function MP(n,e,t={}){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(i,a,l,f,m){const v=new MD({next:S=>{a.enqueueAndForget(()=>hx(i,b)),S.fromCache&&"server"===f.source?m.reject(new Ve(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),b=new gx(l,v,{includeMetadataChanges:!0,Du:!0});return cx(i,b)}(yield D_(n),n.asyncQueue,e,t,r)})),r.promise}const RP=new Map;function Yx(n,e,t){if(!t)throw new Ve(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NP(n,e,t,r){if(!0===e&&!0===r)throw new Ve(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function PP(n){if(!Xe.isDocumentKey(n))throw new Ve(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function OP(n){if(Xe.isDocumentKey(n))throw new Ve(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ND(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function dn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ND(n);throw new Ve(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function kP(n,e){if(e<=0)throw new Ve(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class FP{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ve(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ve(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,NP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tw{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FP({}),this._settingsFrozen=!1,e instanceof ei?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ve(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ei(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ve(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ve(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FP(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new EC;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new ap(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ve(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=RP.get(e);t&&(Be("ComponentProvider","Removing Datastore"),RP.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Tl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class ts{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ts(this.firestore,e,this._query)}}class Tl extends ts{constructor(e,t,r){super(e,t,ah(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new Xe(e))}withConverter(e){return new Tl(this.firestore,e,this._path)}}function LP(n,e,...t){if(n=(0,O.m9)(n),Yx("collection","path",e),n instanceof tw){const r=nn.fromString(e,...t);return OP(r),new Tl(n,null,r)}{if(!(n instanceof ar||n instanceof Tl))throw new Ve(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return OP(r),new Tl(n.firestore,null,r)}}function PD(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=DC.I()),Yx("doc","path",e),n instanceof tw){const r=nn.fromString(e,...t);return PP(r),new ar(n,null,new Xe(r))}{if(!(n instanceof ar||n instanceof Tl))throw new Ve(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return PP(r),new ar(n.firestore,n instanceof Tl?n.converter:null,new Xe(r))}}function VP(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof ar||n instanceof Tl)&&(e instanceof ar||e instanceof Tl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function UP(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof ts&&e instanceof ts&&n.firestore===e.firestore&&Qm(n._query,e._query)&&n.converter===e.converter}class $L{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new WS(this,"async_queue_retry"),this.Kc=()=>{const t=AD();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=AD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=AD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Qr;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!ml(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=lx.createAndSchedule(this,e,t,r,a=>this.Wc(a));return this.$c.push(i),i}Gc(){this.Bc&&it()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Qx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class HL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wr extends tw{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new $L,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||BP(this),this._firestoreClient.terminate()}}function WL(n=(0,Sn.getApp)()){return(0,Sn._getProvider)(n,"firestore").getImmediate()}function ri(n){return n._firestoreClient||BP(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function BP(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new d0(n._databaseId,a,n._persistenceKey,(f=t).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,f.useFetchStreams));var a,f;n._firestoreClient=new RL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function jP(n,e,t){const r=new Qr;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield bP(n,t),yield TP(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===pe.FAILED_PRECONDITION||l.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function $P(n){if(n._initialized||n._terminated)throw new Ve(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Kc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ve(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Al(Xr.fromBase64String(e))}catch(t){throw new Ve(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Al(Xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Np{constructor(e){this._methodName=e}}class OD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ft(this._lat,e._lat)||Ft(this._long,e._long)}}const eV=/^__.*__$/;class tV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms):new vp(e,this.data,t,this.fieldTransforms)}}class HP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function GP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class kD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new kD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return VD(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(GP(this.Zc)&&eV.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class nV{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||J0(e)}aa(e,t,r,i=!1){return new kD({Zc:e,methodName:t,ca:r,path:or.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function Pp(n){const e=n._freezeSettings(),t=J0(n._databaseId);return new nV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FD(n,e,t,r,i,a={}){const l=n.aa(a.merge||a.mergeFields?2:0,e,t,i);tM("Data must be an object, but it was:",l,r);const f=qP(r,l);let m,v;if(a.merge)m=new Ts(l.fieldMask),v=l.fieldTransforms;else if(a.mergeFields){const b=[];for(const S of a.mergeFields){const P=nM(e,S,t);if(!l.contains(P))throw new Ve(pe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);KP(b,P)||b.push(P)}m=new Ts(b),v=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,v=l.fieldTransforms;return new tV(new fi(f),m,v)}class nw extends Np{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nw}}function WP(n,e,t){return new kD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Jx extends Np{_toFieldTransform(e){return new _p(e.path,new $c)}isEqual(e){return e instanceof Jx}}class rV extends Np{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=WP(this,e,!0),r=this.ha.map(a=>Op(a,t)),i=new El(r);return new _p(e.path,i)}isEqual(e){return this===e}}class iV extends Np{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=WP(this,e,!0),r=this.ha.map(a=>Op(a,t)),i=new Il(r);return new _p(e.path,i)}isEqual(e){return this===e}}class sV extends Np{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new lh(e.wt,HC(e.wt,this.la));return new _p(e.path,t)}isEqual(e){return this===e}}function Xx(n,e,t,r){const i=n.aa(1,e,t);tM("Data must be an object, but it was:",i,r);const a=[],l=fi.empty();Nc(r,(m,v)=>{const b=LD(e,m,t);v=(0,O.m9)(v);const S=i.ia(b);if(v instanceof nw)a.push(b);else{const P=Op(v,S);null!=P&&(a.push(b),l.set(b,P))}});const f=new Ts(a);return new HP(l,f,i.fieldTransforms)}function eM(n,e,t,r,i,a){const l=n.aa(1,e,t),f=[nM(e,r,t)],m=[i];if(a.length%2!=0)throw new Ve(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)f.push(nM(e,a[P])),m.push(a[P+1]);const v=[],b=fi.empty();for(let P=f.length-1;P>=0;--P)if(!KP(v,f[P])){const U=f[P];let Q=m[P];Q=(0,O.m9)(Q);const be=l.ia(U);if(Q instanceof nw)v.push(U);else{const $e=Op(Q,be);null!=$e&&(v.push(U),b.set(U,$e))}}const S=new Ts(v);return new HP(b,S,l.fieldTransforms)}function zP(n,e,t,r=!1){return Op(t,n.aa(r?4:3,e))}function Op(n,e){if(ZP(n=(0,O.m9)(n)))return tM("Unsupported field value:",e,n),qP(n,e);if(n instanceof Np)return function(t,r){if(!GP(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let f=Op(l,r.ra(a));null==f&&(f={nullValue:"NULL_VALUE"}),i.push(f),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return HC(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Qn.fromDate(t);return{timestampValue:pi(r.wt,i)}}if(t instanceof Qn){const i=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:pi(r.wt,i)}}if(t instanceof OD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Al)return{bytesValue:eD(r.wt,t._byteString)};if(t instanceof ar){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.oa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:R0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${ND(t)}`)}(n,e)}function qP(n,e){const t={};return xC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nc(n,(r,i)=>{const a=Op(i,e.ea(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function ZP(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof OD||n instanceof Al||n instanceof ar||n instanceof Np)}function tM(n,e,t){if(!ZP(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=ND(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function nM(n,e,t){if((e=(0,O.m9)(e))instanceof Kc)return e._internalPath;if("string"==typeof e)return LD(n,e);throw VD("Field path arguments must be of type string or ",n,!1,void 0,t)}const oV=new RegExp("[~\\*/\\[\\]]");function LD(n,e,t){if(e.search(oV)>=0)throw VD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Kc(...e.split("."))._internalPath}catch{throw VD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function VD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Ve(pe.INVALID_ARGUMENT,f+n+m)}function KP(n,e){return n.some(t=>t.isEqual(e))}class rw{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new aV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class aV extends rw{data(){return super.data()}}function UD(n,e){return"string"==typeof e?LD(n,e):e instanceof Kc?e._internalPath:e._delegate._internalPath}class kp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yc extends rw{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new iw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(UD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class iw extends Yc{data(e={}){return super.data(e)}}class Ch{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new kp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new iw(this._firestore,this._userDataWriter,r.key,r,new kp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new iw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const f=new iw(r._firestore,r._userDataWriter,l.doc.key,l.doc,new kp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),v=a.indexOf(l.doc.key)),{type:uV(l.type),doc:f,oldIndex:m,newIndex:v}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function YP(n,e){return n instanceof Yc&&e instanceof Yc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Ch&&e instanceof Ch&&n._firestore===e._firestore&&UP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function QP(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ve(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sw{}function Dh(n,...e){for(const t of e)n=t._apply(n);return n}class lV extends sw{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=Pp(e.firestore),r=function(i,a,l,f,m,v,b){let S;if(m.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new Ve(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){rO(b,v);const U=[];for(const Q of b)U.push(nO(f,i,Q));S={arrayValue:{values:U}}}else S=nO(f,i,b)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||rO(b,v),S=zP(l,"where",b,"in"===v||"not-in"===v);const P=ti.create(m,v,S);return function(U,Q){if(Q.ht()){const $e=mp(U);if(null!==$e&&!$e.isEqual(Q.field))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${$e.toString()}' and '${Q.field.toString()}'`);const ct=y0(U);null!==ct&&iO(0,Q.field,ct)}const be=function($e,ct){for(const Ct of $e.filters)if(ct.indexOf(Ct.op)>=0)return Ct.op;return null}(U,function($e){switch($e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Q.op));if(null!==be)throw new Ve(pe.INVALID_ARGUMENT,be===Q.op?`Invalid query. You cannot use more than one '${Q.op.toString()}' filter.`:`Invalid query. You cannot use '${Q.op.toString()}' filters with '${be.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ts(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new _a(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class dV extends sw{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Ve(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ve(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ma(i,a);return function(f,m){if(null===y0(f)){const v=mp(f);null!==v&&iO(0,v,m.field)}}(r,l),l}(e._query,this.fa,this.wa);return new ts(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new _a(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class JP extends sw{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new ts(e.firestore,e.converter,Ym(e._query,this.ma,this.ga))}}class XP extends sw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=tO(e,this.type,this.ya,this.pa);return new ts(e.firestore,e.converter,(i=t,new _a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class eO extends sw{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=tO(e,this.type,this.ya,this.pa);return new ts(e.firestore,e.converter,(i=t,new _a((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function tO(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof rw)return function(i,a,l,f,m){if(!f)throw new Ve(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const v=[];for(const b of Bc(i))if(b.field.isKeyField())v.push(du(a,f.key));else{const S=f.data.field(b.field);if(c0(S))throw new Ve(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=b.field.canonicalString();throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}v.push(S)}return new hu(v,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Pp(n.firestore);return function(a,l,f,m,v,b){const S=a.explicitOrderBy;if(v.length>S.length)throw new Ve(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<v.length;U++){const Q=v[U];if(S[U].field.isKeyField()){if("string"!=typeof Q)throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof Q}`);if(!Km(a)&&-1!==Q.indexOf("/"))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${Q}' contains a slash.`);const be=a.path.child(nn.fromString(Q));if(!Xe.isDocumentKey(be))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${be}' is not because it contains an odd number of segments.`);const $e=new Xe(be);P.push(du(l,$e))}else{const be=zP(f,m,Q);P.push(be)}}return new hu(P,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function nO(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new Ve(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Km(e)&&-1!==t.indexOf("/"))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!Xe.isDocumentKey(r))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return du(n,new Xe(r))}if(t instanceof ar)return du(n,t._key);throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ND(t)}.`)}function rO(n,e){if(!Array.isArray(n)||0===n.length)throw new Ve(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ve(pe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function iO(n,e,t){if(!t.isEqual(e))throw new Ve(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const vV={maxAttempts:5};class rM{convertValue(e,t="none"){switch(Fc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Oc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const r={};return Nc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new OD(vr(e.latitude),vr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=nh(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hp(e));default:return null}}convertTimestamp(e){const t=_l(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);Dt(i_(r));const i=new ei(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||Pr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function BD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class wV extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class sO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Pp(e)}set(e,t,r){this._verifyNotCommitted();const i=bh(e,this._firestore),a=BD(i.converter,t,r),l=FD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Jn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=bh(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof Kc?eM(this._dataReader,"WriteBatch.update",a._key,t,r,i):Xx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Jn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bh(e,this._firestore);return this._mutations=this._mutations.concat(new wp(t._key,Jn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bh(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new Ve(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Fp extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function oO(n,e,t){n=dn(n,ar);const r=dn(n.firestore,wr),i=BD(n.converter,e,t);return b_(r,[FD(Pp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Jn.none())])}function aO(n,e,t,...r){n=dn(n,ar);const i=dn(n.firestore,wr),a=Pp(i);let l;return l="string"==typeof(e=(0,O.m9)(e))||e instanceof Kc?eM(a,"updateDoc",n._key,e,t,r):Xx(a,"updateDoc",n._key,e),b_(i,[l.toMutation(n._key,Jn.exists(!0))])}function uO(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Qx(e[l])||(a=e[l],l++);const f={includeMetadataChanges:a.includeMetadataChanges};if(Qx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,v,b;if(n instanceof ar)v=dn(n.firestore,wr),b=ah(n._key.path),m={next:S=>{e[l]&&e[l](iM(v,n,S))},error:e[l+1],complete:e[l+2]};else{const S=dn(n,ts);v=dn(S.firestore,wr),b=S._query;const P=new Fp(v);m={next:U=>{e[l]&&e[l](new Ch(v,P,S,U))},error:e[l+1],complete:e[l+2]},QP(n._query)}return function(S,P,U,Q){const be=new MD(Q),$e=new gx(P,be,U);return S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return cx(yield D_(S),$e)})),()=>{be.Tc(),S.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return hx(yield D_(S),$e)}))}}(ri(v),b,f,m)}function b_(n,e){return function(t,r){const i=new Qr;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function dL(n,e,t){return wx.apply(this,arguments)}(yield Zx(t),r,i)})),i.promise}(ri(n),e)}function iM(n,e,t){const r=t.docs.get(e._key),i=new Fp(n);return new Yc(n,i,e._key,r,new kp(t.hasPendingWrites,t.fromCache),e.converter)}class MV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pp(e)}get(e){const t=bh(e,this._firestore),r=new wV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return it();const a=i[0];if(a.isFoundDocument())return new rw(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new rw(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const i=bh(e,this._firestore),a=BD(i.converter,t,r),l=FD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=bh(e,this._firestore);let l;return l="string"==typeof(t=(0,O.m9)(t))||t instanceof Kc?eM(this._dataReader,"Transaction.update",a._key,t,r,i):Xx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=bh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bh(e,this._firestore),r=new Fp(this._firestore);return super.get(e).then(i=>new Yc(this._firestore,r,t._key,i._document,new kp(!1,!1),t.converter))}}function sM(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ve("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function cO(){if(typeof Uint8Array>"u")throw new Ve("unimplemented","Uint8Arrays are not available in this environment.")}function dO(){if(!function KA(){return typeof atob<"u"}())throw new Ve("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){op=Sn.SDK_VERSION,(0,Sn._registerComponent)(new Qs.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new wr(i,new n0(t.getProvider("auth-internal")),new r0(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Sn.registerVersion)(vC,"3.4.13",n),(0,Sn.registerVersion)(vC,"3.4.13","esm2017")}();class ow{constructor(e){this._delegate=e}static fromBase64String(e){return dO(),new ow(Al.fromBase64String(e))}static fromUint8Array(e){return cO(),new ow(Al.fromUint8Array(e))}toBase64(){return dO(),this._delegate.toBase64()}toUint8Array(){return cO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oM(n){return function UV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class BV{enableIndexedDbPersistence(e,t){return function zL(n,e){$P(n=dn(n,wr));const t=ri(n),r=n._freezeSettings(),i=new jx;return jP(t,i,new CP(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function qL(n){$P(n=dn(n,wr));const e=ri(n),t=n._freezeSettings(),r=new jx;return jP(e,r,new AL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function ZL(n){if(n._initialized&&!n._terminated)throw new Ve(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Qr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!ga.V())return Promise.resolve();const i=r+"main";yield ga.delete(i)}),function(r){return t.apply(this,arguments)})(kS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class hO{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ei||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Jd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function BL(n,e,t,r={}){var i;const a=(n=dn(n,tw))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Jd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,f;if("string"==typeof r.mockUserToken)l=r.mockUserToken,f=Wr.MOCK_USER;else{l=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Ve(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Wr(m)}n._authCredentials=new IC(new wC(l,f))}}(this._delegate,e,t,r)}enableNetwork(){return function YL(n){return function NL(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield AP(n),t=yield SP(n);return e.setNetworkEnabled(!0),function(r){const i=rt(r);return i.lu.delete(0),X0(i)}(t)}))}(ri(n=dn(n,wr)))}(this._delegate)}disableNetwork(){return function QL(n){return function PL(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield AP(n),t=yield SP(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(i){const a=rt(i);a.lu.add(0),yield __(a),a._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ri(n=dn(n,wr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,NP("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function KL(n){return function(e){const t=new Qr;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function gL(n,e){return bx.apply(this,arguments)}(yield Zx(e),t)})),t.promise}(ri(n=dn(n,wr)))}(this._delegate)}onSnapshotsInSync(e){return function xV(n,e){return function FL(n,e){const t=new MD(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield D_(n),i=t,rt(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield D_(n),i=t,void rt(r).Tu.delete(i);var r,i}))}}(ri(n=dn(n,wr)),Qx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ve("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new T_(this,LP(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new va(this,PD(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rs(this,function jL(n,e){if(n=dn(n,tw),Yx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ve(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ts(n,null,(t=e,new _a(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function RV(n,e,t){n=dn(n,wr);const r=Object.assign(Object.assign({},vV),t);return function(i){if(i.maxAttempts<1)throw new Ve(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function LL(n,e,t){const r=new Qr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const i=yield(a=n,RD(a).then(l=>l.datastore));var a;new ML(n.asyncQueue,i,t,e,r).run()})),r.promise}(ri(n),i=>e(new MV(n,i)),r)}(this._delegate,t=>e(new fO(this,t)))}batch(){return ri(this._delegate),new pO(new sO(this._delegate,e=>b_(this._delegate,e)))}loadBundle(e){return function JL(n,e){const t=ri(n=dn(n,wr)),r=new HL;return function VL(n,e,t,r){const i=function(a,l){let f;return f="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,v){if(m instanceof Uint8Array)return DP(m,v);if(m instanceof ArrayBuffer)return DP(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(f),new SL(m,l);var m}(t,J0(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function TL(n,e,t){const r=rt(n);var i;(i=(0,Ie.Z)(function*(a,l,f){try{const m=yield l.getMetadata();if(yield function(P,U){const Q=rt(P),be=ni(U.createTime);return Q.persistence.runTransaction("hasNewerBundle","readonly",$e=>Q.Ds.getBundleMetadata($e,U.id)).then($e=>!!$e&&$e.createTime.compareTo(be)>=0)}(a.localStore,m))return yield l.close(),f._completeWith({taskState:"Success",documentsLoaded:(P=m).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);f._updateProgress(fP(m));const v=new sL(m,a.localStore,l.wt);let b=yield l.fc();for(;b;){const P=yield v.Nu(b);P&&f._updateProgress(P),b=yield l.fc()}const S=yield v.complete();return yield Zc(a,S.Mu,void 0),yield function(P,U){const Q=rt(P);return Q.persistence.runTransaction("Save bundle","readwrite",be=>Q.Ds.saveBundleMetadata(be,U))}(a.localStore,m),f._completeWith(S.progress),Promise.resolve(S.Ou)}catch(m){return Jd("SyncEngine",`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}var P}),function(a,l,f){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Zx(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function XL(n,e){return function UL(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const i=rt(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ds.getNamedQuery(a,r))}(yield qx(n),e)}))}(ri(n=dn(n,wr)),e).then(t=>t?new ts(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Rs(this,t):null)}}class jD extends rM{constructor(e){super(),this.firestore=e}convertBytes(e){return new ow(new Al(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return va.forKey(t,this.firestore,null)}}class fO{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}get(e){const t=Vp(e);return this._delegate.get(t).then(r=>new aw(this._firestore,new Yc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Vp(e);return r?(sM("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Vp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}}class pO{constructor(e){this._delegate=e}set(e,t,r){const i=Vp(e);return r?(sM("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Vp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Vp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new iw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new uw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Lp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Lp(e,new jD(e),t),i.set(t,a)),a}}Lp.INSTANCES=new WeakMap;class va{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ve("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new va(t,new ar(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new va(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new T_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new T_(this.firestore,LP(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof ar&&VP(this._delegate,e)}set(e,t){t=sM("DocumentReference.set",t);try{return t?oO(this._delegate,e,t):oO(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?aO(this._delegate,e):aO(this._delegate,e,t,...r)}catch(i){throw Ms(i,"updateDoc()","DocumentReference.update()")}}delete(){return function AV(n){return b_(dn(n.firestore,wr),[new wp(n._key,Jn.none())])}(this._delegate)}onSnapshot(...e){const t=gO(e),r=mO(e,i=>new aw(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return uO(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function IV(n){n=dn(n,ar);const e=dn(n.firestore,wr),t=ri(e),r=new Fp(e);return function OL(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const f=yield function(m,v){const b=rt(m);return b.persistence.runTransaction("read document","readonly",S=>b.localDocuments.getDocument(S,v))}(i,a);f.isFoundDocument()?l.resolve(f):f.isNoDocument()?l.resolve(null):l.reject(new Ve(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=w_(f,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield qx(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Yc(e,r,n._key,i,new kp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function CV(n){n=dn(n,ar);const e=dn(n.firestore,wr);return xP(ri(e),n._key,{source:"server"}).then(t=>iM(e,n,t))}(this._delegate):function EV(n){n=dn(n,ar);const e=dn(n.firestore,wr);return xP(ri(e),n._key).then(t=>iM(e,n,t))}(this._delegate),t.then(r=>new aw(this.firestore,new Yc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new va(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function gO(n){for(const e of n)if("object"==typeof e&&!oM(e))return e;return{}}function mO(n,e){var t,r;let i;return i=oM(n[0])?n[0]:oM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class aw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new va(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return YP(this._delegate,e._delegate)}}class uw extends aw{data(e){const t=this._delegate.data(e);return function jA(n,e){n||it()}(void 0!==t),t}}class Rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jD(e)}where(e,t,r){try{return new Rs(this.firestore,Dh(this._delegate,function cV(n,e,t){const r=e,i=UD("where",n);return new lV(i,r,t)}(e,t,r)))}catch(i){throw Ms(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rs(this.firestore,Dh(this._delegate,function hV(n,e="asc"){const t=e,r=UD("orderBy",n);return new dV(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rs(this.firestore,Dh(this._delegate,function fV(n){return kP("limit",n),new JP("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rs(this.firestore,Dh(this._delegate,function pV(n){return kP("limitToLast",n),new JP("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rs(this.firestore,Dh(this._delegate,function gV(...n){return new XP("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rs(this.firestore,Dh(this._delegate,function mV(...n){return new XP("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rs(this.firestore,Dh(this._delegate,function _V(...n){return new eO("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rs(this.firestore,Dh(this._delegate,function yV(...n){return new eO("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return UP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function bV(n){n=dn(n,ts);const e=dn(n.firestore,wr),t=ri(e),r=new Fp(e);return function kL(n,e){const t=new Qr;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(i,a,l){try{const f=yield DD(i,a,!0),m=new mP(a,f.ji),v=m.Ku(f.documents),b=m.applyChanges(v,!1);l.resolve(b.snapshot)}catch(f){const m=w_(f,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield qx(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Ch(e,r,n,i))}(this._delegate):"server"===e?.source?function TV(n){n=dn(n,ts);const e=dn(n.firestore,wr),t=ri(e),r=new Fp(e);return MP(t,n._query,{source:"server"}).then(i=>new Ch(e,r,n,i))}(this._delegate):function DV(n){n=dn(n,ts);const e=dn(n.firestore,wr),t=ri(e),r=new Fp(e);return QP(n._query),MP(t,n._query).then(i=>new Ch(e,r,n,i))}(this._delegate),t.then(r=>new aM(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=gO(e),r=mO(e,i=>new aM(this.firestore,new Ch(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return uO(this._delegate,t,r)}withConverter(e){return new Rs(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}class $V{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new uw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aM{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new uw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $V(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new uw(this._firestore,r))})}isEqual(e){return YP(this._delegate,e._delegate)}}class T_ extends Rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new va(this.firestore,e):null}doc(e){try{return new va(this.firestore,void 0===e?PD(this._delegate):PD(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function SV(n,e){const t=dn(n.firestore,wr),r=PD(n),i=BD(n.converter,e);return b_(t,[FD(Pp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Jn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new va(this.firestore,t))}isEqual(e){return VP(this._delegate,e._delegate)}withConverter(e){return new T_(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Vp(n){return dn(n,ar)}class uM{constructor(...e){this._delegate=new Kc(...e)}static documentId(){return new uM(or.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Kc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Up{constructor(e){this._delegate=e}static serverTimestamp(){const e=function PV(){return new Jx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Up(e)}static delete(){const e=function NV(){return new nw("deleteField")}();return e._methodName="FieldValue.delete",new Up(e)}static arrayUnion(...e){const t=function OV(...n){return new rV("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Up(t)}static arrayRemove(...e){const t=function kV(...n){return new iV("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Up(t)}static increment(e){const t=function FV(n){return new sV("increment",n)}(e);return t._methodName="FieldValue.increment",new Up(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const HV={Firestore:hO,GeoPoint:OD,Timestamp:Qn,Blob:ow,Transaction:fO,WriteBatch:pO,DocumentReference:va,DocumentSnapshot:aw,Query:Rs,QueryDocumentSnapshot:uw,QuerySnapshot:aM,CollectionReference:T_,FieldPath:uM,FieldValue:Up,setLogLevel:function jV(n){!function xc(n){pl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function WV(n){(function GV(n,e){n.INTERNAL.registerComponent(new Qs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},HV)))})(n,(e,t)=>new hO(e,t,new BV)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(mc.Z);var lM=L(6451),$D=L(5363),zV=L(6063);class qV extends sa.x{constructor(e=1/0,t=1/0,r=zV.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let f=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)f=m;f&&r.splice(0,f+1)}}}var _O=L(3099);function yO(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,_O.B)({connector:()=>new qV(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function vO(n,e){return(0,bg.m)(e)?Hr(()=>n,e):Hr(()=>n)}var cM=L(9468),Bp=L(5867);class A_{constructor(e){return e}}class wO{constructor(){return(0,Bp.C6)()}}const dM=new d.OlP("angularfire2._apps"),KV={provide:A_,useFactory:function ZV(n){return n&&1===n.length?n[0]:new A_((0,Bp.Mq)())},deps:[[new d.FiY,dM]]},YV={provide:wO,deps:[[new d.FiY,dM]]};function QV(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new A_(r)}}let JV=(()=>{class n{constructor(t){(0,Bp.KN)("angularfire",tn.q4.full,"core"),(0,Bp.KN)("angularfire",tn.q4.full,"app"),(0,Bp.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[KV,YV]}),n})();function XV(n,...e){return{ngModule:JV,providers:[{provide:dM,useFactory:QV(n),multi:!0,deps:[d.R0b,d.zs3,tn.HU,...e]}]}}const eU=(0,tn.u3)(Bp.ZF,!0),EO=new Map,tU={activated:!1,tokenObservers:[]},nU={initialized:!1,enabled:!1};function Ci(n){return EO.get(n)||tU}function mu(n,e){EO.set(n,e)}function HD(){return nU}class aU{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function uU(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ns=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function CO(n){if(!Ci(n).activated)throw Ns.create("use-before-activation",{appName:n.name})}function pM(n,e){return gM.apply(this,arguments)}function gM(){return gM=(0,Ie.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const U=yield l.getHeartbeatsHeader();U&&(a["X-Firebase-Client"]=U)}const f={method:"POST",body:JSON.stringify(e),headers:a};let m,v;try{m=yield fetch(n,f)}catch(U){throw Ns.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==m.status)throw Ns.create("fetch-status-error",{httpStatus:m.status});try{v=yield m.json()}catch(U){throw Ns.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const b=v.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${v.ttl}`});const S=1e3*Number(b[1]),P=Date.now();return{token:v.token,expireTimeMillis:P+S,issuedAtTimeMillis:P}}),gM.apply(this,arguments)}function hU(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const lw="firebase-app-check-store";let zD=null;function bO(){return zD||(zD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(Ns.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(lw,{keyPath:"compositeKey"})}}catch(r){e(Ns.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),zD)}function mM(){return mM=(0,Ie.Z)(function*(n,e){const r=(yield bO()).transaction(lw,"readwrite"),a=r.objectStore(lw).put({compositeKey:n,value:e});return new Promise((l,f)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var v;f(Ns.create("storage-set",{originalErrorMessage:null===(v=m.target.error)||void 0===v?void 0:v.message}))}})}),mM.apply(this,arguments)}const cw=new ui.Yd("@firebase/app-check");function xO(n,e){return(0,O.hl)()?function mU(n,e){return function TO(n,e){return mM.apply(this,arguments)}(function SO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{cw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MO(){return HD().enabled}function RO(){return wM.apply(this,arguments)}function wM(){return wM=(0,Ie.Z)(function*(){const n=HD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),wM.apply(this,arguments)}const IU={error:"UNKNOWN_ERROR"};function CU(n){return O.US.encodeString(JSON.stringify(n),!1)}function qD(n){return EM.apply(this,arguments)}function EM(){return EM=(0,Ie.Z)(function*(n,e=!1){const t=n.app;CO(t);const r=Ci(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&ZD(m)&&(i=m)}if(!e&&i&&ZD(i))return{token:i.token};let f,l=!1;if(MO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=pM(hU(t,yield RO()),n.heartbeatServiceProvider).then(v=>(r.exchangeTokenPromise=void 0,v)),l=!0);const m=yield r.exchangeTokenPromise;return yield xO(t,m),mu(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?cw.warn(m.message):cw.error(m),a=m}return i?(f={token:i.token},mu(t,Object.assign(Object.assign({},r),{token:i})),yield xO(t,i)):f=bU(a),l&&PO(t,f),f}),EM.apply(this,arguments)}function CM(n,e){const t=Ci(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),mu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function NO(n){const{app:e}=n,t=Ci(e);let r=t.tokenRefresher;r||(r=function DU(n){const{app:e}=n;return new aU((0,Ie.Z)(function*(){let r;if(r=Ci(e).token?yield qD(n,!0):yield qD(n),r.error)throw r.error}),()=>!0,()=>{const t=Ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),mu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function PO(n,e){const t=Ci(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function ZD(n){return n.expireTimeMillis-Date.now()>0}function bU(n){return{token:CU(IU),error:n}}class TU{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ci(this.app);for(const t of e)CM(this.app,t.next);return Promise.resolve()}}const jO="app-check-internal";!function BU(){(0,Sn._registerComponent)(new Qs.wA("app-check",n=>function AU(n,e){return new TU(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jO).initialize()})),(0,Sn._registerComponent)(new Qs.wA(jO,n=>function SU(n){return{getToken:e=>qD(n,e),addTokenListener:e=>function IM(n,e,t,r){const{app:i}=n,a=Ci(i),l={next:t,error:r,type:e};if(mu(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&ZD(a.token)){const f=a.token;Promise.resolve().then(()=>{t({token:f.token}),NO(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>NO(n))}(n,"INTERNAL",e),removeTokenListener:e=>CM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Sn.registerVersion)("@firebase/app-check","0.5.12")}();class dw{constructor(){return(0,tn.vb)("app-check")}}typeof window<"u"&&window,L(127);const SM=new d.OlP("angularfire2.auth.use-emulator"),xM=new d.OlP("angularfire2.auth.settings"),MM=new d.OlP("angularfire2.auth.tenant-id"),RM=new d.OlP("angularfire2.auth.langugage-code"),NM=new d.OlP("angularfire2.auth.use-device-language"),PM=new d.OlP("angularfire.auth.persistence"),OM=(n,e,t,r,i,a,l,f)=>(0,Nr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[v,b]of Object.entries(l))m.settings[v]=b;return f&&m.setPersistence(f),m},[t,r,i,a,l,f]);let YD=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,S,P,U){const Q=new sa.x,be=At(void 0).pipe((0,$D.Q)(l.outsideAngular),Hr(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,5881)))),(0,dt.U)(()=>(0,Nr.on)(t,a,r)),(0,dt.U)($e=>OM($e,a,f,v,b,S,m,P)),yO({bufferSize:1,refCount:!1}));if(Bh(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=At(null);else{be.pipe(tu()).subscribe();const ct=be.pipe(Hr(kt=>kt.getRedirectResult().then(on=>on,()=>null)),tn.iC,yO({bufferSize:1,refCount:!1})),Ct=be.pipe(Hr(kt=>new un.y(on=>({unsubscribe:a.runOutsideAngular(()=>kt.onAuthStateChanged(vn=>on.next(vn),vn=>on.error(vn),()=>on.complete()))})))),Lt=be.pipe(Hr(kt=>new un.y(on=>({unsubscribe:a.runOutsideAngular(()=>kt.onIdTokenChanged(vn=>on.next(vn),vn=>on.error(vn),()=>on.complete()))}))));this.authState=ct.pipe(vO(Ct),(0,cM.R)(l.outsideAngular),(0,$D.Q)(l.insideAngular)),this.user=ct.pipe(vO(Lt),(0,cM.R)(l.outsideAngular),(0,$D.Q)(l.insideAngular)),this.idToken=this.user.pipe(Hr(kt=>kt?(0,Tn.D)(kt.getIdToken()):At(null))),this.idTokenResult=this.user.pipe(Hr(kt=>kt?(0,Tn.D)(kt.getIdTokenResult()):At(null))),this.credential=(0,lM.T)(ct,Q,this.authState.pipe(Vn(kt=>!kt))).pipe((0,dt.U)(kt=>kt?.user?kt:null),(0,cM.R)(l.outsideAngular),(0,$D.Q)(l.insideAngular))}return(0,Nr.pX)(this,be,a,{spy:{apply:($e,ct,Ct)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&Ct.then(Lt=>Q.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nr.Dh),d.LFG(Nr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(tn.HU),d.LFG(SM,8),d.LFG(xM,8),d.LFG(MM,8),d.LFG(RM,8),d.LFG(NM,8),d.LFG(PM,8),d.LFG(dw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function HO(n,e){return function zU(n,e=Ds.z){return new un.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function kM(n,e){return HO(n,e).pipe((0,dt.U)(t=>({payload:t,type:"query"})))}function QD(n,e){return kM(n,e).pipe(yf(void 0),cl(),(0,dt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,f)=>{const m=i.find(b=>b.doc.ref.isEqual(l.ref)),v=t?.payload.docs.find(b=>b.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&v&&JSON.stringify(v.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:f,newIndex:f,type:"modified",doc:l}})}),a}))}function GO(n,e,t){return QD(n,t).pipe(rl((r,i)=>function ZU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function KU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return FM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return FM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),gc(),(0,dt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function FM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function WO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class zO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=QD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,dt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(yf(void 0),cl(),Vn(([r,i])=>i.length>0||!r),(0,dt.U)(([r,i])=>i),tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(rl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WO(e);return GO(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return kM(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),tn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(tn.iC)}add(e){return this.ref.add(e)}doc(e){return new qO(this.ref.doc(e),this.afs)}}class qO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=ZO(r,t);return new zO(i,a,this.afs)}snapshotChanges(){return function qU(n,e){return HO(n,e).pipe(yf(void 0),cl(),(0,dt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,dt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Tn.D)(this.ref.get(e)).pipe(tn.iC)}}class YU{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?QD(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Vn(t=>t.length>0),tn.iC):QD(this.query,this.afs.schedulers.outsideAngular).pipe(tn.iC)}auditTrail(e){return this.stateChanges(e).pipe(rl((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=WO(e);return GO(this.query,t,this.afs.schedulers.outsideAngular).pipe(tn.iC)}valueChanges(e={}){return kM(this.query,this.afs.schedulers.outsideAngular).pipe((0,dt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),tn.iC)}get(e){return(0,Tn.D)(this.query.get(e)).pipe(tn.iC)}}const QU=new d.OlP("angularfire2.enableFirestorePersistence"),JU=new d.OlP("angularfire2.firestore.persistenceSettings"),XU=new d.OlP("angularfire2.firestore.settings"),e2=new d.OlP("angularfire2.firestore.use-emulator");function ZO(n,e=(t=>t)){return{query:e(n),ref:n}}let JD=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,S,P,U,Q,be,$e,ct,Ct){this.schedulers=m;const Lt=(0,Nr.on)(t,f,r),kt=b;S&&OM(Lt,f,P,Q,be,$e,U,ct),[this.firestore,this.persistenceEnabled$]=(0,Nr.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const on=f.runOutsideAngular(()=>Lt.firestore());if(a&&on.settings(a),kt&&on.useEmulator(...kt),i&&!Bh(l)){const vn=()=>{try{return(0,Tn.D)(on.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch(rs){return typeof console<"u"&&console.warn(rs),At(!1)}};return[on,f.runOutsideAngular(vn)]}return[on,At(!1)]},[a,kt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=ZO(i,r),f=this.schedulers.ngZone.run(()=>a);return new zO(f,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new YU(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new qO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nr.Dh),d.LFG(Nr.xv,8),d.LFG(QU,8),d.LFG(XU,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(tn.HU),d.LFG(JU,8),d.LFG(e2,8),d.LFG(YD,8),d.LFG(SM,8),d.LFG(xM,8),d.LFG(MM,8),d.LFG(RM,8),d.LFG(NM,8),d.LFG(PM,8),d.LFG(dw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XD=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["manager-panel"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail()}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}GoogleAuth(){return this.AuthLogin(new ha.Q).then(t=>{t&&this.router.navigate(["manager-panel"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.ngZone.run(()=>{this.router.navigate(["manager-panel"])})}).catch(r=>{window.alert(r)})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["manager-login"])})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(JD),d.LFG(YD),d.LFG(Rr),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KO=(()=>{class n{constructor(t){this.userService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XD))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-manager-login"]],decls:20,vars:0,consts:[["dir","rtl","lang","he",1,"container"],[1,"row"],[1,"col-md-6"],[1,"card"],[1,"mb-3"],["for","exampleInputNickname"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],[1,"form-group"],["for","exampleInputPassword1"],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","\u05d4\u05ea\u05d7\u05d1\u05e8",1,"btn","btn-primary",3,"click"]],template:function(t,r){if(1&t){const i=d.EpF();d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"h1"),d._uU(6,"\u05d4\u05ea\u05d7\u05d1\u05e8 \u05dc\u05de\u05e1\u05e2\u05d3\u05d4 "),d.qZA(),d._UZ(7,"hr"),d.TgZ(8,"div",4)(9,"label",5),d._uU(10,"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),d.qZA(),d._UZ(11,"input",6,7),d.qZA(),d.TgZ(13,"div",8)(14,"label",9),d._uU(15,"\u05e1\u05d9\u05e1\u05de\u05d4"),d.qZA(),d._uU(16,"\xa0 "),d._UZ(17,"input",10,11),d.qZA(),d.TgZ(19,"input",12),d.NdJ("click",function(){d.CHM(i);const l=d.MAs(12),f=d.MAs(18);return d.KtG(r.userService.SignIn(l.value,f.value))}),d.qZA()()()()()()}},styles:[".card[_ngcontent-%COMP%]{margin-top:15%;border:1px solid black;width:550px;padding:45px;position:absolute;top:2%;left:33%}"]}),n})();var t2=L(5032);const YO="@firebase/database";let LM="";function JO(n){LM=n}class i2{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class s2{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const XO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new i2(e)}}catch{}return new s2},jp=XO("localStorage"),VM=XO("sessionStorage"),S_=new ui.Yd("@firebase/database"),e1=function(){let n=1;return function(){return n++}}(),t1=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},hw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=hw.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let $p=null,n1=!0;const r1=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(S_.logLevel=ui.in.VERBOSE,$p=S_.log.bind(S_),e&&VM.set("logging_enabled",!0)):"function"==typeof n?$p=n:($p=null,VM.remove("logging_enabled"))},Di=function(...n){if(!0===n1&&(n1=!1,null===$p&&!0===VM.get("logging_enabled")&&r1(!0)),$p){const e=hw.apply(null,n);$p(e)}},fw=function(n){return function(...e){Di(n,...e)}},UM=function(...n){const e="FIREBASE INTERNAL ERROR: "+hw(...n);S_.error(e)},Sl=function(...n){const e=`FIREBASE FATAL ERROR: ${hw(...n)}`;throw S_.error(e),new Error(e)},ns=function(...n){const e="FIREBASE WARNING: "+hw(...n);S_.warn(e)},eb=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Qc="[MIN_NAME]",xl="[MAX_NAME]",Hp=function(n,e){if(n===e)return 0;if(n===Qc||e===xl)return-1;if(e===Qc||n===xl)return 1;{const t=tb(n),r=tb(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},u2=function(n,e){return n===e?0:n<e?-1:1},pw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},BM=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=BM(n[e[r]]);return t+="}",t},i1=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function bi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const s1=function(n){(0,O.hu)(!eb(n),"Invalid JSON number");const r=1023;let i,a,l,f,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(f=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=f+r,l=Math.round(n*Math.pow(2,52-f)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const v=[];for(m=52;m;m-=1)v.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)v.push(a%2?1:0),a=Math.floor(a/2);v.push(i?1:0),v.reverse();const b=v.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(b.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},h2=new RegExp("^-?(0*)\\d{1,10}$"),o1=-2147483648,jM=2147483647,tb=function(n){if(h2.test(n)){const e=Number(n);if(e>=o1&&e<=jM)return e}return null},x_=function(n){try{n()}catch(e){setTimeout(()=>{throw ns("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},gw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class p2{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ns(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class g2{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Di("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ns(e)}}let mw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const d1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,p1="websocket",g1="long_polling";class HM{constructor(e,t,r,i,a=!1,l="",f=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=f,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=jp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&jp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function m1(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===p1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==g1)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function m2(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return bi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class _2{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const GM={},WM={};function zM(n){const e=n.toString();return GM[e]||(GM[e]=new _2),GM[e]}class v2{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&x_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Th{constructor(e,t,r,i,a,l,f){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=f,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=fw(e),this.stats_=zM(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),m1(t,g1,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new v2(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new qM((...a)=>{const[l,f,m,v,b]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=f,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);f?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(f,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,f]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,f)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&d1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Th.forceAllow_=!0}static forceDisallow(){Th.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!Th.forceAllow_&&(Th.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=i1(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class qM{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=e1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=qM.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(f){Di("frame writing exception"),f.stack&&Di(f.stack),Di(f)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Di("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Di("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let rb=null;typeof MozWebSocket<"u"?rb=MozWebSocket:typeof WebSocket<"u"&&(rb=WebSocket);let M_=(()=>{class n{constructor(t,r,i,a,l,f,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=fw(this.connId),this.stats_=zM(r),this.connURL=n.connectionURL_(r,f,m,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const f={v:"5"};return!(0,O.Yr)()&&typeof location<"u"&&location.hostname&&d1.test(location.hostname)&&(f.r="f"),r&&(f.s=r),i&&(f.ls=i),a&&(f.ac=a),l&&(f.p=l),m1(t,p1,f)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,jp.set("previous_websocket_failure",!0);try{let i;if((0,O.Yr)()){i={headers:{"User-Agent":`Firebase/5/${LM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,f=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;f&&(i.proxy={origin:f})}this.mySock=new rb(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==rb&&!n.forceDisallow_}static previouslyFailed(){return jp.isInMemoryStorage||!0===jp.get("previous_websocket_failure")}markConnectionHealthy(){jp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=i1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),C1=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Th,M_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=M_&&M_.isAvailable();let i=r&&!M_.previouslyFailed();if(t.webSocketOnly&&(r||ns("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[M_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class M1{constructor(e,t,r,i,a,l,f,m,v,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=f,this.onDisconnect_=m,this.onKill_=v,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=fw("c:"+this.id+":"),this.transportManager_=new C1(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=gw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=pw("t",e),r=pw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=pw("t",e),r=pw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=pw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?UM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ns("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),gw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(jp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class R1{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class N1{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ib extends N1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ib}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function gn(){return new Mn("")}function Qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ah(n){return n.pieces_.length-n.pieceNum_}function Zn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Mn(n.pieces_,e)}function KM(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function _w(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function k1(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Mn(e,0)}function Er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Mn(t,0)}function Jt(n){return n.pieceNum_>=n.pieces_.length}function Ps(n,e){const t=Qt(n),r=Qt(e);if(null===t)return e;if(t===r)return Ps(Zn(n),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function j2(n,e){const t=_w(n,0),r=_w(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Hp(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function YM(n,e){if(Ah(n)!==Ah(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function wa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ah(n)>Ah(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class $2{constructor(e,t){this.errorPrefix_=t,this.parts_=_w(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);F1(this)}}function F1(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Gp(n))}function Gp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class QM extends N1{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new QM}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const yw=1e3;let ob,Wp=(()=>{class n extends R1{constructor(t,r,i,a,l,f,m,v){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=f,this.appCheckTokenProvider_=m,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=fw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");QM.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ib.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,O.Pz)(l)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:f=>{const m=f.d;"ok"===f.s?r.resolve(m):r.reject(m)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,f=t._path.toString();this.log_("Listen called for "+f+" "+l),this.listens.has(f)||this.listens.set(f,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(f).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(f).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const v=m.d,b=m.s;n.warnOnListenWarnings_(v,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(i,a),t.onComplete&&t.onComplete(b,v))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ns(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,f=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,f))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,f=>{a&&setTimeout(()=>{a(f.s,f.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const f={p:r,d:i};void 0!==l&&(f.h=l),this.outstandingPuts_.push({action:t,request:f,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):UM("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=yw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=yw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ie.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,f=t.lastSessionId;let m=!1,v=null;const b=function(){v?v.close():(m=!0,a())};t.realtime_={close:b,sendRequest:function(U){(0,O.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,Q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?Di("getToken() completed but was canceled"):(Di("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=Q&&Q.token,v=new M1(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,be=>{ns(be+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},f))}catch(U){t.log_("Failed to get token: "+U),m||(t.repoInfo_.nodeAdmin&&ns(U),b())}}})()}interrupt(t){Di("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Di("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=yw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>BM(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Mn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Di("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Di("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+LM.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ib.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class sn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new sn(e,t)}}class sb{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new sn(Qc,e),i=new sn(Qc,t);return 0!==this.compare(r,i)}minPost(){return sn.MIN}}class U1 extends sb{static get __EMPTY_NODE(){return ob}static set __EMPTY_NODE(e){ob=e}compare(e,t){return Hp(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return sn.MIN}maxPost(){return new sn(xl,ob)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new sn(e,ob)}toString(){return".key"}}const Ml=new U1;class ab{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let XM,_u=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??to.EMPTY_NODE,this.right=l??to.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return to.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return to.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class to{constructor(e,t=to.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new to(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,_u.BLACK,null,null))}remove(e){return new to(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,_u.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ab(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ab(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ab(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ab(this.root_,null,this.comparator_,!0,e)}}function Y2(n,e){return Hp(n.name,e.name)}function JM(n,e){return Hp(n,e)}to.EMPTY_NODE=new class K2{copy(e,t,r,i,a){return this}insert(e,t,r){return new _u(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const B1=function(n){return"number"==typeof n?"number:"+s1(n):"string:"+n},j1=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===XM||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===XM||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let $1,H1,G1,R_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),j1(this.priorityNode_)}static set __childrenNodeConstructor(t){$1=t}static get __childrenNodeConstructor(){return $1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Jt(t)?this:".priority"===Qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===Ah(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+B1(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?s1(this.value_):this.value_,this.lazyHash_=t1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class eB extends sb{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Hp(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return sn.MIN}maxPost(){return new sn(xl,new R_("[PRIORITY-POST]",G1))}makePost(e,t){const r=H1(e);return new sn(t,new R_("[PRIORITY-POST]",r))}toString(){return".priority"}},tB=Math.log(2);class nB{constructor(e){this.count=parseInt(Math.log(e+1)/tB,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ub=function(n,e,t,r){n.sort(e);const i=function(m,v){const b=v-m;let S,P;if(0===b)return null;if(1===b)return S=n[m],P=t?t(S):S,new _u(P,S.node,_u.BLACK,null,null);{const U=parseInt(b/2,10)+m,Q=i(m,U),be=i(U+1,v);return S=n[U],P=t?t(S):S,new _u(P,S.node,_u.BLACK,Q,be)}},f=function(m){let v=null,b=null,S=n.length;const P=function(Q,be){const $e=S-Q,ct=S;S-=Q;const Ct=i($e+1,ct),Lt=n[$e],kt=t?t(Lt):Lt;U(new _u(kt,Lt.node,be,null,Ct))},U=function(Q){v?(v.left=Q,v=Q):(b=Q,v=Q)};for(let Q=0;Q<m.count;++Q){const be=m.nextBitIsOne(),$e=Math.pow(2,m.count-(Q+1));be?P($e,_u.BLACK):(P($e,_u.BLACK),P($e,_u.RED))}return b}(new nB(n.length));return new to(r||e,f)};let eR;const N_={};class Jc{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(N_&&Xn,"ChildrenNode.ts has not been loaded"),eR=eR||new Jc({".priority":N_},{".priority":Xn}),eR}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof to?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==Ml,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(sn.Wrap);let f,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();f=i?ub(r,e.getCompare()):N_;const m=e.toString(),v=Object.assign({},this.indexSet_);v[m]=e;const b=Object.assign({},this.indexes_);return b[m]=f,new Jc(b,v)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const l=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(l,"Missing index implementation for "+a),i===N_){if(l.isDefinedOn(e.node)){const f=[],m=t.getIterator(sn.Wrap);let v=m.getNext();for(;v;)v.name!==e.name&&f.push(v),v=m.getNext();return f.push(e),ub(f,l.getCompare())}return N_}{const f=t.get(e.name);let m=i;return f&&(m=m.remove(new sn(e.name,f))),m.insert(e,e.node)}});return new Jc(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===N_)return i;{const a=t.get(e.name);return a?i.remove(new sn(e.name,a)):i}});return new Jc(r,this.indexSet_)}}let vw,$t=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&j1(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vw||(vw=new n(new to(JM),null,Jc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?vw:r}}getChild(t){const r=Qt(t);return null===r?this:this.getImmediateChild(r).getChild(Zn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new sn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const f=a.isEmpty()?vw:this.priorityNode_;return new n(a,f,l)}}updateChild(t,r){const i=Qt(t);if(null===i)return r;{(0,O.hu)(".priority"!==Qt(t)||1===Ah(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Zn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Xn,(f,m)=>{r[f]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(f)?a=Math.max(a,Number(f)):l=!1}),!t&&l&&a<2*i){const f=[];for(const m in r)f[m]=r[m];return f}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+B1(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":t1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new sn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new sn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new sn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,sn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,sn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ww?-1:0}withIndex(t){if(t===Ml||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ml||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),a=r.getIterator(Xn);let l=i.getNext(),f=a.getNext();for(;l&&f;){if(l.name!==f.name||!l.node.equals(f.node))return!1;l=i.getNext(),f=a.getNext()}return null===l&&null===f}return!1}return!1}}resolveIndex_(t){return t===Ml?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const ww=new class rB extends $t{constructor(){super(new to(JM),$t.EMPTY_NODE,Jc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return $t.EMPTY_NODE}isEmpty(){return!1}};function Sr(n,e=null){if(null===n)return $t.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new R_(n,Sr(e));if(n instanceof Array){let t=$t.EMPTY_NODE;return bi(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=Sr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Sr(e))}{const t=[];let r=!1;if(bi(n,(l,f)=>{if("."!==l.substring(0,1)){const m=Sr(f);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new sn(l,m)))}}),0===t.length)return $t.EMPTY_NODE;const a=ub(t,Y2,l=>l.name,JM);if(r){const l=ub(t,Xn.getCompare());return new $t(a,Sr(e),new Jc({".priority":l},{".priority":Xn}))}return new $t(a,Sr(e),Jc.Default)}}Object.defineProperties(sn,{MIN:{value:new sn(Qc,$t.EMPTY_NODE)},MAX:{value:new sn(xl,ww)}}),U1.__EMPTY_NODE=$t.EMPTY_NODE,R_.__childrenNodeConstructor=$t,function Q2(n){XM=n}(ww),function X2(n){G1=n}(ww),function J2(n){H1=n}(Sr);class tR extends sb{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Jt(e)&&".priority"!==Qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Hp(e.name,t.name):a}makePost(e,t){const r=Sr(e),i=$t.EMPTY_NODE.updateChild(this.indexPath_,r);return new sn(t,i)}maxPost(){const e=$t.EMPTY_NODE.updateChild(this.indexPath_,ww);return new sn(xl,e)}toString(){return _w(this.indexPath_,0).join("/")}}const nR=new class sB extends sb{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Hp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return sn.MIN}maxPost(){return sn.MAX}makePost(e,t){const r=Sr(e);return new sn(t,r)}toString(){return".value"}},P_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oB=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=P_.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=P_.charAt(e[i]);return(0,O.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),q1=function(n){if(n===""+jM)return"-";const e=tb(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return xl;const a=P_.charAt(P_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Z1=function(n){if(n===""+o1)return Qc;const e=tb(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+jM:(delete t[t.length-1],t.join("")):(t[t.length-1]=P_.charAt(P_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function K1(n){return{type:"value",snapshotNode:n}}function O_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ew(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Iw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class iR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const f=e.getImmediateChild(t);return f.getChild(i).equals(r.getChild(i))&&f.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Ew(t,f)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):f.isEmpty()?l.trackChildChange(O_(t,r)):l.trackChildChange(Iw(t,r,f))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Xn,(i,a)=>{t.hasChild(i)||r.trackChildChange(Ew(i,a))}),t.isLeafNode()||t.forEachChild(Xn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(Iw(i,a,l))}else r.trackChildChange(O_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?$t.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Cw{constructor(e){this.indexedFilter_=new iR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Cw.getStartPost_(e),this.endPost_=Cw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new sn(t,r))||(r=$t.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=$t.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority($t.EMPTY_NODE);const a=this;return t.forEachChild(Xn,(l,f)=>{a.matches(new sn(l,f))||(i=i.updateImmediateChild(l,$t.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class uB{constructor(e){this.rangedFilter_=new Cw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new sn(t,r))||(r=$t.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=$t.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=$t.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const f=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),f)<=0:this.index_.compare(f,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(f.name,f.node),l++}}else{let a,l,f,m;if(i=t.withIndex(this.index_),i=i.updatePriority($t.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();f=(P,U)=>S(U,P)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),f=this.index_.getCompare();let v=0,b=!1;for(;m.hasNext();){const S=m.getNext();!b&&f(a,S)<=0&&(b=!0),b&&v<this.limit_&&f(S,l)<=0?v++:i=i.updateImmediateChild(S.name,$t.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,U)=>S(U,P)}else l=this.index_.getCompare();const f=e;(0,O.hu)(f.numChildren()===this.limit_,"");const m=new sn(t,r),v=this.reverse_?f.getFirstChild(this.index_):f.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(f.hasChild(t)){const S=f.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=P&&(P.name===t||f.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,m);if(b&&!r.isEmpty()&&U>=0)return a?.trackChildChange(Iw(t,r,S)),f.updateImmediateChild(t,r);{a?.trackChildChange(Ew(t,S));const be=f.updateImmediateChild(t,$t.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(O_(P.name,P.node)),be.updateImmediateChild(P.name,P.node)):be}}return r.isEmpty()?e:b&&l(v,m)>=0?(null!=a&&(a.trackChildChange(Ew(v.name,v.node)),a.trackChildChange(O_(t,r))),f.updateImmediateChild(t,r).updateImmediateChild(v.name,$t.EMPTY_NODE)):e}}class lb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new lb;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function sR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function oR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function cb(n,e){const t=n.copy();return t.index_=e,t}function Y1(n){const e={};if(n.isDefault())return e;let t;return n.index_===Xn?t="$priority":n.index_===nR?t="$value":n.index_===Ml?t="$key":((0,O.hu)(n.index_ instanceof tR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Q1(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xn&&(e.i=n.index_.toString()),e}class db extends R1{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=fw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=db.getListenId_(e,r),f={};this.listens_[l]=f;const m=Y1(e._queryParams);this.restRequest_(a+".json",m,(v,b)=>{let S=b;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(a,S,!1,r),(0,O.DV)(this.listens_,l)===f){let P;P=v?401===v?"permission_denied":"rest_error:"+v:"ok",i(P,null)}})}unlisten(e,t){const r=db.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Y1(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,l)=>{let f=l;404===a&&(f=null,a=null),null===a?(this.onDataUpdate_(r,f,!1,null),i.resolve(f)):i.reject(new Error(f))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+l);const f=new XMLHttpRequest;f.onreadystatechange=()=>{if(r&&4===f.readyState){this.log_("REST Response for "+l+" received. status:",f.status,"response:",f.responseText);let m=null;if(f.status>=200&&f.status<300){try{m=(0,O.cI)(f.responseText)}catch{ns("Failed to parse JSON response for "+l+": "+f.responseText)}r(null,m)}else 401!==f.status&&404!==f.status&&ns("Got unsuccessful REST response for "+l+" Status: "+f.status),r(f.status);r=null}},f.open("GET",l,!0),f.send()})}}class pB{constructor(){this.rootNode_=$t.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function hb(){return{value:null,children:new Map}}function k_(n,e,t){if(Jt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Qt(e);n.children.has(r)||n.children.set(r,hb()),k_(n.children.get(r),e=Zn(e),t)}}function aR(n,e){if(Jt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Xn,(r,i)=>{k_(n,new Mn(r),i)}),aR(n,e)}}if(n.children.size>0){const t=Qt(e);return e=Zn(e),n.children.has(t)&&aR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function uR(n,e,t){null!==n.value?t(e,n.value):function gB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{uR(i,new Mn(e.toString()+"/"+r),t)})}class mB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&bi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class vB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new mB(e);const r=1e4+2e4*Math.random();gw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;bi(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),gw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ea=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ea||(Ea={})),Ea))();function dR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class fb{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ea.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Jt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Mn(e));return new fb(gn(),t,this.revert)}}return(0,O.hu)(Qt(this.path)===e,"operationForChild called for unrelated child."),new fb(Zn(this.path),this.affectedTree,this.revert)}}class Dw{constructor(e,t){this.source=e,this.path=t,this.type=Ea.LISTEN_COMPLETE}operationForChild(e){return Jt(this.path)?new Dw(this.source,gn()):new Dw(this.source,Zn(this.path))}}class zp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ea.OVERWRITE}operationForChild(e){return Jt(this.path)?new zp(this.source,gn(),this.snap.getImmediateChild(e)):new zp(this.source,Zn(this.path),this.snap)}}class F_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ea.MERGE}operationForChild(e){if(Jt(this.path)){const t=this.children.subtree(new Mn(e));return t.isEmpty()?null:t.value?new zp(this.source,gn(),t.value):new F_(this.source,gn(),t)}return(0,O.hu)(Qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new F_(this.source,Zn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Sh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Jt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class wB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function bw(n,e,t,r,i,a){const l=r.filter(f=>f.type===t);l.sort((f,m)=>function CB(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new sn(e.childName,e.snapshotNode),i=new sn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,f,m)),l.forEach(f=>{const m=function IB(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,f,a);i.forEach(v=>{v.respondsTo(f.type)&&e.push(v.createEvent(m,n.query_))})})}function pb(n,e){return{eventCache:n,serverCache:e}}function Tw(n,e,t,r){return pb(new Sh(e,t,r),n.serverCache)}function X1(n,e,t,r){return pb(n.eventCache,new Sh(e,t,r))}function gb(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function qp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let hR;class er{constructor(e,t=(()=>(hR||(hR=new to(u2)),hR))()){this.value=e,this.children=t}static fromObject(e){let t=new er(null);return bi(e,(r,i)=>{t=t.set(new Mn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:gn(),value:this.value};if(Jt(e))return null;{const r=Qt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Zn(e),t);return null!=a?{path:Er(new Mn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Jt(e))return this;{const t=Qt(e),r=this.children.get(t);return null!==r?r.subtree(Zn(e)):new er(null)}}set(e,t){if(Jt(e))return new er(t,this.children);{const r=Qt(e),a=(this.children.get(r)||new er(null)).set(Zn(e),t),l=this.children.insert(r,a);return new er(this.value,l)}}remove(e){if(Jt(e))return this.children.isEmpty()?new er(null):new er(null,this.children);{const t=Qt(e),r=this.children.get(t);if(r){const i=r.remove(Zn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new er(null):new er(this.value,a)}return this}}get(e){if(Jt(e))return this.value;{const t=Qt(e),r=this.children.get(t);return r?r.get(Zn(e)):null}}setTree(e,t){if(Jt(e))return t;{const r=Qt(e),a=(this.children.get(r)||new er(null)).setTree(Zn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new er(this.value,l)}}fold(e){return this.fold_(gn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,gn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Jt(e))return null;{const a=Qt(e),l=this.children.get(a);return l?l.findOnPath_(Zn(e),Er(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,gn(),t)}foreachOnPath_(e,t,r){if(Jt(e))return this;{this.value&&r(t,this.value);const i=Qt(e),a=this.children.get(i);return a?a.foreachOnPath_(Zn(e),Er(t,i),r):new er(null)}}foreach(e){this.foreach_(gn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class yu{constructor(e){this.writeTree_=e}static empty(){return new yu(new er(null))}}function Aw(n,e,t){if(Jt(e))return new yu(new er(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ps(i,e);return a=a.updateChild(l,t),new yu(n.writeTree_.set(i,a))}{const i=new er(t),a=n.writeTree_.setTree(e,i);return new yu(a)}}}function fR(n,e,t){let r=n;return bi(t,(i,a)=>{r=Aw(r,Er(e,i),a)}),r}function ek(n,e){if(Jt(e))return yu.empty();{const t=n.writeTree_.setTree(e,new er(null));return new yu(t)}}function pR(n,e){return null!=Zp(n,e)}function Zp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ps(t.path,e)):null}function tk(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xn,(r,i)=>{e.push(new sn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new sn(r,i.value))}),e}function xh(n,e){if(Jt(e))return n;{const t=Zp(n,e);return new yu(null!=t?new er(t):n.writeTree_.subtree(e))}}function gR(n){return n.writeTree_.isEmpty()}function L_(n,e){return nk(gn(),n.writeTree_,e)}function nk(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=nk(Er(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Er(n,".priority"),r)),t}}function mb(n,e){return ak(e,n)}function xB(n,e){if(n.snap)return wa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&wa(Er(n.path,t),e))return!0;return!1}function RB(n){return n.visible}function rk(n,e,t){let r=yu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let f;if(a.snap)wa(t,l)?(f=Ps(t,l),r=Aw(r,f,a.snap)):wa(l,t)&&(f=Ps(l,t),r=Aw(r,gn(),a.snap.getChild(f)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(wa(t,l))f=Ps(t,l),r=fR(r,f,a.children);else if(wa(l,t))if(f=Ps(l,t),Jt(f))r=fR(r,gn(),a.children);else{const m=(0,O.DV)(a.children,Qt(f));if(m){const v=m.getChild(Zn(f));r=Aw(r,gn(),v)}}}}}return r}function ik(n,e,t,r,i){if(r||i){const a=xh(n.visibleWrites,e);return!i&&gR(a)?t:i||null!=t||pR(a,gn())?L_(rk(n.allWrites,function(v){return(v.visible||i)&&(!r||!~r.indexOf(v.writeId))&&(wa(v.path,e)||wa(e,v.path))},e),t||$t.EMPTY_NODE):null}{const a=Zp(n.visibleWrites,e);if(null!=a)return a;{const l=xh(n.visibleWrites,e);return gR(l)?t:null!=t||pR(l,gn())?L_(l,t||$t.EMPTY_NODE):null}}}function _b(n,e,t,r){return ik(n.writeTree,n.treePath,e,t,r)}function mR(n,e){return function NB(n,e,t){let r=$t.EMPTY_NODE;const i=Zp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=xh(n.visibleWrites,e);return t.forEachChild(Xn,(l,f)=>{const m=L_(xh(a,new Mn(l)),f);r=r.updateImmediateChild(l,m)}),tk(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return tk(xh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function sk(n,e,t,r){return function PB(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Er(e,t);if(pR(n.visibleWrites,a))return null;{const l=xh(n.visibleWrites,a);return gR(l)?i.getChild(t):L_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function yb(n,e){return function kB(n,e){return Zp(n.visibleWrites,e)}(n.writeTree,Er(n.treePath,e))}function _R(n,e,t){return function OB(n,e,t,r){const i=Er(e,t),a=Zp(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?L_(xh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function ok(n,e){return ak(Er(n.treePath,e),n.writeTree)}function ak(n,e){return{treePath:n,writeTree:e}}class UB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,Iw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,Ew(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,O_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Iw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const uk=new class BB{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class yR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Sh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _R(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:qp(this.viewCache_),a=function VB(n,e,t,r,i,a){return function FB(n,e,t,r,i,a,l){let f;const m=xh(n.visibleWrites,e),v=Zp(m,gn());if(null!=v)f=v;else{if(null==t)return[];f=L_(m,t)}if(f=f.withIndex(l),f.isEmpty()||f.isLeafNode())return[];{const b=[],S=l.getCompare(),P=a?f.getReverseIteratorFrom(r,l):f.getIteratorFrom(r,l);let U=P.getNext();for(;U&&b.length<i;)0!==S(U,r)&&b.push(U),U=P.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function lk(n,e,t,r,i,a){const l=e.eventCache;if(null!=yb(r,t))return e;{let f,m;if(Jt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const v=qp(e),S=mR(r,v instanceof $t?v:$t.EMPTY_NODE);f=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const v=_b(r,qp(e));f=n.filter.updateFullNode(e.eventCache.getNode(),v,a)}else{const v=Qt(t);if(".priority"===v){(0,O.hu)(1===Ah(t),"Can't have a priority with additional path components");const b=l.getNode();m=e.serverCache.getNode();const S=sk(r,t,b,m);f=null!=S?n.filter.updatePriority(b,S):l.getNode()}else{const b=Zn(t);let S;if(l.isCompleteForChild(v)){m=e.serverCache.getNode();const P=sk(r,t,l.getNode(),m);S=null!=P?l.getNode().getImmediateChild(v).updateChild(b,P):l.getNode().getImmediateChild(v)}else S=_R(r,v,e.serverCache);f=null!=S?n.filter.updateChild(l.getNode(),v,S,b,i,a):l.getNode()}}return Tw(e,f,l.isFullyInitialized()||Jt(t),n.filter.filtersNodes())}}function vb(n,e,t,r,i,a,l,f){const m=e.serverCache;let v;const b=l?n.filter:n.filter.getIndexedFilter();if(Jt(t))v=b.updateFullNode(m.getNode(),r,null);else if(b.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(t,r);v=b.updateFullNode(m.getNode(),U,null)}else{const U=Qt(t);if(!m.isCompleteForPath(t)&&Ah(t)>1)return e;const Q=Zn(t),$e=m.getNode().getImmediateChild(U).updateChild(Q,r);v=".priority"===U?b.updatePriority(m.getNode(),$e):b.updateChild(m.getNode(),U,$e,Q,uk,null)}const S=X1(e,v,m.isFullyInitialized()||Jt(t),b.filtersNodes());return lk(n,S,t,i,new yR(i,S,a),f)}function vR(n,e,t,r,i,a,l){const f=e.eventCache;let m,v;const b=new yR(i,e,a);if(Jt(t))v=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=Tw(e,v,!0,n.filter.filtersNodes());else{const S=Qt(t);if(".priority"===S)v=n.filter.updatePriority(e.eventCache.getNode(),r),m=Tw(e,v,f.isFullyInitialized(),f.isFiltered());else{const P=Zn(t),U=f.getNode().getImmediateChild(S);let Q;if(Jt(P))Q=r;else{const be=b.getCompleteChild(S);Q=null!=be?".priority"===KM(P)&&be.getChild(k1(P)).isEmpty()?be:be.updateChild(P,r):$t.EMPTY_NODE}m=U.equals(Q)?e:Tw(e,n.filter.updateChild(f.getNode(),S,Q,P,b,l),f.isFullyInitialized(),n.filter.filtersNodes())}}return m}function ck(n,e){return n.eventCache.isCompleteForChild(e)}function dk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function wR(n,e,t,r,i,a,l,f){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let v,m=e;v=Jt(t)?r:new er(null).setTree(t,r);const b=e.serverCache.getNode();return v.children.inorderTraversal((S,P)=>{if(b.hasChild(S)){const Q=dk(0,e.serverCache.getNode().getImmediateChild(S),P);m=vb(n,m,new Mn(S),Q,i,a,l,f)}}),v.children.inorderTraversal((S,P)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!b.hasChild(S)&&!U){const be=dk(0,e.serverCache.getNode().getImmediateChild(S),P);m=vb(n,m,new Mn(S),be,i,a,l,f)}}),m}class KB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new iR(r.getIndex()),a=function lB(n){return n.loadsAllData()?new iR(n.getIndex()):n.hasLimit()?new uB(n):new Cw(n)}(r);this.processor_=function jB(n){return{filter:n}}(a);const l=t.serverCache,f=t.eventCache,m=i.updateFullNode($t.EMPTY_NODE,l.getNode(),null),v=a.updateFullNode($t.EMPTY_NODE,f.getNode(),null),b=new Sh(m,l.isFullyInitialized(),i.filtersNodes()),S=new Sh(v,f.isFullyInitialized(),a.filtersNodes());this.viewCache_=pb(S,b),this.eventGenerator_=new wB(this.query_)}get query(){return this.query_}}function JB(n,e){const t=qp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Jt(e)&&!t.getImmediateChild(Qt(e)).isEmpty())?t.getChild(e):null}function hk(n){return 0===n.eventRegistrations_.length}function fk(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function pk(n,e,t,r){e.type===Ea.MERGE&&null!==e.source.queryId&&((0,O.hu)(qp(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(gb(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function HB(n,e,t,r,i){const a=new UB;let l,f;if(t.type===Ea.OVERWRITE){const v=t;v.source.fromUser?l=vR(n,e,v.path,v.snap,r,i,a):((0,O.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered()&&!Jt(v.path),l=vb(n,e,v.path,v.snap,r,i,f,a))}else if(t.type===Ea.MERGE){const v=t;v.source.fromUser?l=function WB(n,e,t,r,i,a,l){let f=e;return r.foreach((m,v)=>{const b=Er(t,m);ck(e,Qt(b))&&(f=vR(n,f,b,v,i,a,l))}),r.foreach((m,v)=>{const b=Er(t,m);ck(e,Qt(b))||(f=vR(n,f,b,v,i,a,l))}),f}(n,e,v.path,v.children,r,i,a):((0,O.hu)(v.source.fromServer,"Unknown source."),f=v.source.tagged||e.serverCache.isFiltered(),l=wR(n,e,v.path,v.children,r,i,f,a))}else if(t.type===Ea.ACK_USER_WRITE){const v=t;l=v.revert?function ZB(n,e,t,r,i,a){let l;if(null!=yb(r,t))return e;{const f=new yR(r,e,i),m=e.eventCache.getNode();let v;if(Jt(t)||".priority"===Qt(t)){let b;if(e.serverCache.isFullyInitialized())b=_b(r,qp(e));else{const S=e.serverCache.getNode();(0,O.hu)(S instanceof $t,"serverChildren would be complete if leaf node"),b=mR(r,S)}v=n.filter.updateFullNode(m,b,a)}else{const b=Qt(t);let S=_R(r,b,e.serverCache);null==S&&e.serverCache.isCompleteForChild(b)&&(S=m.getImmediateChild(b)),v=null!=S?n.filter.updateChild(m,b,S,Zn(t),f,a):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(m,b,$t.EMPTY_NODE,Zn(t),f,a):m,v.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=_b(r,qp(e)),l.isLeafNode()&&(v=n.filter.updateFullNode(v,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=yb(r,gn()),Tw(e,v,l,n.filter.filtersNodes())}}(n,e,v.path,r,i,a):function zB(n,e,t,r,i,a,l){if(null!=yb(i,t))return e;const f=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Jt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return vb(n,e,t,m.getNode().getChild(t),i,a,f,l);if(Jt(t)){let v=new er(null);return m.getNode().forEachChild(Ml,(b,S)=>{v=v.set(new Mn(b),S)}),wR(n,e,t,v,i,a,f,l)}return e}{let v=new er(null);return r.foreach((b,S)=>{const P=Er(t,b);m.isCompleteForPath(P)&&(v=v.set(b,m.getNode().getChild(P)))}),wR(n,e,t,v,i,a,f,l)}}(n,e,v.path,v.affectedTree,r,i,a)}else{if(t.type!==Ea.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);l=function qB(n,e,t,r,i){const a=e.serverCache;return lk(n,X1(e,a.getNode(),a.isFullyInitialized()||Jt(t),a.isFiltered()),t,r,uk,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function GB(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=gb(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(K1(gb(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function $B(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,gk(n,a.changes,a.viewCache.eventCache.getNode(),null)}function gk(n,e,t,r){return function EB(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function aB(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),bw(n,i,"child_removed",e,r,t),bw(n,i,"child_added",e,r,t),bw(n,i,"child_moved",a,r,t),bw(n,i,"child_changed",e,r,t),bw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let wb,Ib;class mk{constructor(){this.views=new Map}}function ER(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),pk(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(pk(l,e,t,r));return a}}function IR(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let f=_b(t,i?r:null),m=!1;f?m=!0:r instanceof $t?(f=mR(t,r),m=!1):(f=$t.EMPTY_NODE,m=!1);const v=pb(new Sh(f,m,!1),new Sh(r,i,!1));return new KB(e,v)}return l}function _k(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Mh(n,e){let t=null;for(const r of n.views.values())t=t||JB(r,e);return t}function yk(n,e){return e._queryParams.loadsAllData()?Eb(n):n.views.get(e._queryIdentifier)}function vk(n,e){return null!=yk(n,e)}function Rh(n){return null!=Eb(n)}function Eb(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let uj=1;class wk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new er(null),this.pendingWriteTree_=function LB(){return{visibleWrites:yu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function CR(n,e,t,r,i){return function bB(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Aw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?V_(n,new zp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Nh(n,e,t=!1){const r=function AB(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function SB(n,e){const t=n.allWrites.findIndex(f=>f.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const f=n.allWrites[l];f.visible&&(l>=t&&xB(f,r.path)?i=!1:wa(r.path,f.path)&&(a=!0)),l--}return!!i&&(a?(function MB(n){n.visibleWrites=rk(n.allWrites,RB,gn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=ek(n.visibleWrites,r.path):bi(r.children,m=>{n.visibleWrites=ek(n.visibleWrites,Er(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new er(null);return null!=r.snap?a=a.set(gn(),!0):bi(r.children,l=>{a=a.set(new Mn(l),!0)}),V_(n,new fb(r.path,a,t))}return[]}function Sw(n,e,t){return V_(n,new zp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Cb(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||vk(a,e))){const f=function sj(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const f=Rh(n);if("default"===i)for(const[m,v]of n.views.entries())l=l.concat(fk(v,t,r)),hk(v)&&(n.views.delete(m),v.query._queryParams.loadsAllData()||a.push(v.query));else{const m=n.views.get(i);m&&(l=l.concat(fk(m,t,r)),hk(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return f&&!Rh(n)&&a.push(new(function nj(){return(0,O.hu)(wb,"Reference.ts has not been loaded"),wb}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function rj(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=f.removed;l=f.events;const v=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),b=n.syncPointTree_.findOnPath(i,(S,P)=>Rh(P));if(v&&!b){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function mj(n){return n.fold((e,t,r)=>{if(t&&Rh(t))return[Eb(t)];{let i=[];return t&&(i=_k(t)),bi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let U=0;U<P.length;++U){const Q=P[U],be=Q.query,$e=Tk(n,Q);n.listenProvider_.startListening(Mw(be),xw(n,be),$e.hashFn,$e.onComplete)}}}!b&&m.length>0&&!r&&(v?n.listenProvider_.stopListening(Mw(e),null):m.forEach(S=>{const P=n.queryToTagMap.get(bb(S));n.listenProvider_.stopListening(Mw(S),P)})),function _j(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=bb(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return l}function Ek(n,e,t,r){const i=DR(n,r);if(null!=i){const a=bR(i),l=a.path,f=a.queryId,m=Ps(l,e);return TR(n,l,new zp(dR(f),m,t))}return[]}function Ik(n,e){const t=n._path;let r=null,i=!1;e.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=Ps(v,t);r=r||Mh(b,S),i=i||Rh(b)});let l,a=e.syncPointTree_.get(t);a?(i=i||Rh(a),r=r||Mh(a,gn())):(a=new mk,e.syncPointTree_=e.syncPointTree_.set(t,a)),null!=r?l=!0:(l=!1,r=$t.EMPTY_NODE,e.syncPointTree_.subtree(t).foreachChild((b,S)=>{const P=Mh(S,gn());P&&(r=r.updateImmediateChild(b,P))}));const f=vk(a,n);if(!f&&!n._queryParams.loadsAllData()){const v=bb(n);(0,O.hu)(!e.queryToTagMap.has(v),"View does not exist, but we have a tag");const b=function yj(){return uj++}();e.queryToTagMap.set(v,b),e.tagToQueryMap.set(b,v)}return{syncPoint:a,writesCache:mb(e.pendingWriteTree_,t),serverCache:r,serverCacheComplete:l,foundAncestorDefaultView:i,viewAlreadyExists:f}}function Ck(n,e,t){const{syncPoint:r,serverCache:i,writesCache:a,serverCacheComplete:l,viewAlreadyExists:f,foundAncestorDefaultView:m}=Ik(e,n);let v=function ij(n,e,t,r,i,a){const l=IR(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function XB(n,e){n.eventRegistrations_.push(e)}(l,t),function ej(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Xn,(a,l)=>{r.push(O_(a,l))}),t.isFullyInitialized()&&r.push(K1(t.getNode())),gk(n,r,t.getNode(),e)}(l,t)}(r,e,t,a,i,l);if(!f&&!m){const b=yk(r,e);v=v.concat(function vj(n,e,t){const r=e._path,i=xw(n,e),a=Tk(n,t),l=n.listenProvider_.startListening(Mw(e),i,a.hashFn,a.onComplete),f=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Rh(f.value),"If we're adding a query, it shouldn't be shadowed");else{const m=f.fold((v,b,S)=>{if(!Jt(v)&&b&&Rh(b))return[Eb(b).query];{let P=[];return b&&(P=P.concat(_k(b).map(U=>U.query))),bi(S,(U,Q)=>{P=P.concat(Q)}),P}});for(let v=0;v<m.length;++v){const b=m[v];n.listenProvider_.stopListening(Mw(b),xw(n,b))}}return l}(n,e,b))}return v}function Db(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,f)=>{const v=Mh(f,Ps(l,e));if(v)return v});return ik(i,e,a,t,!0)}function V_(n,e){return Dk(e,n.syncPointTree_,null,mb(n.pendingWriteTree_,gn()))}function Dk(n,e,t,r){if(Jt(n.path))return bk(n,e,t,r);{const i=e.get(gn());null==t&&null!=i&&(t=Mh(i,gn()));let a=[];const l=Qt(n.path),f=n.operationForChild(l),m=e.children.get(l);if(m&&f){const v=t?t.getImmediateChild(l):null,b=ok(r,l);a=a.concat(Dk(f,m,v,b))}return i&&(a=a.concat(ER(i,n,r,t))),a}}function bk(n,e,t,r){const i=e.get(gn());null==t&&null!=i&&(t=Mh(i,gn()));let a=[];return e.children.inorderTraversal((l,f)=>{const m=t?t.getImmediateChild(l):null,v=ok(r,l),b=n.operationForChild(l);b&&(a=a.concat(bk(b,f,m,v)))}),i&&(a=a.concat(ER(i,n,r,t))),a}function Tk(n,e){const t=e.query,r=xw(n,t);return{hashFn:()=>(function YB(n){return n.viewCache_.serverCache.getNode()}(e)||$t.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function hj(n,e,t){const r=DR(n,t);if(r){const i=bR(r),a=i.path,l=i.queryId,f=Ps(a,e);return TR(n,a,new Dw(dR(l),f))}return[]}(n,t._path,r):function dj(n,e){return V_(n,new Dw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function d2(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Cb(n,t,null,a)}}}}function xw(n,e){const t=bb(e);return n.queryToTagMap.get(t)}function bb(n){return n._path.toString()+"$"+n._queryIdentifier}function DR(n,e){return n.tagToQueryMap.get(e)}function bR(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Mn(n.substr(0,e))}}function TR(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),ER(r,t,mb(n.pendingWriteTree_,e),null)}function Mw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function aj(){return(0,O.hu)(Ib,"Reference.ts has not been loaded"),Ib}())(n._repo,n._path):n}class AR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new AR(t)}node(){return this.node_}}class SR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Er(this.path_,e);return new SR(this.syncTree_,t)}node(){return Db(this.syncTree_,this.path_)}}const Ak=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ej(n[".sv"],e,t):"object"==typeof n[".sv"]?Ij(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ej=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},Ij=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},Sk=function(n,e,t,r){return MR(e,new SR(t,n),r)},xR=function(n,e,t){return MR(n,new AR(e),t)};function MR(n,e,t){const r=n.getPriority().val(),i=Ak(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,f=Ak(l.getValue(),e,t);return f!==l.getValue()||i!==l.getPriority().val()?new R_(f,Sr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new R_(i))),l.forEachChild(Xn,(f,m)=>{const v=MR(m,e.getImmediateChild(f),t);v!==m&&(a=a.updateImmediateChild(f,v))}),a}}class RR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Tb(n,e){let t=e instanceof Mn?e:new Mn(e),r=n,i=Qt(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new RR(i,r,a),t=Zn(t),i=Qt(t)}return r}function Kp(n){return n.node.value}function NR(n,e){n.node.value=e,PR(n)}function xk(n){return n.node.childCount>0}function Ab(n,e){bi(n.node.children,(t,r)=>{e(new RR(t,n,r))})}function Mk(n,e,t,r){t&&!r&&e(n),Ab(n,i=>{Mk(i,e,!0,r)}),t&&r&&e(n)}function Rw(n){return new Mn(null===n.parent?n.name:Rw(n.parent)+"/"+n.name)}function PR(n){null!==n.parent&&function bj(n,e,t){const r=function Cj(n){return void 0===Kp(n)&&!xk(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,PR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,PR(n))}(n.parent,n.name,n)}const Tj=/[\[\].#$\/\u0000-\u001F\u007F]/,Aj=/[\[\].#$\u0000-\u001F\u007F]/,OR=10485760,Sb=function(n){return"string"==typeof n&&0!==n.length&&!Tj.test(n)},Rk=function(n){return"string"==typeof n&&0!==n.length&&!Aj.test(n)},Nw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!eb(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},Rl=function(n,e,t,r){r&&void 0===e||Pw((0,O.gK)(n,"value"),e,t)},Pw=function(n,e,t){const r=t instanceof Mn?new $2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Gp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Gp(r)+" with contents = "+e.toString());if(eb(e))throw new Error(n+"contains "+e.toString()+" "+Gp(r));if("string"==typeof e&&e.length>OR/3&&(0,O.ug)(e)>OR)throw new Error(n+"contains a string greater than "+OR+" utf8 bytes "+Gp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(bi(e,(l,f)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!Sb(l)))throw new Error(n+" contains an invalid key ("+l+") "+Gp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function H2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),F1(n)})(r,l),Pw(n,f,r),function G2(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Gp(r)+" in addition to actual children.")}},Nk=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];bi(e,(l,f)=>{const m=new Mn(l);if(Pw(i,f,Er(t,m)),".priority"===KM(m)&&!Nw(f))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=_w(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!Sb(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(j2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&wa(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},kR=function(n,e,t){if(!t||void 0!==e){if(eb(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nw(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ow=function(n,e,t,r){if(!(r&&void 0===t||Sb(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},kw=function(n,e,t,r){if(!(r&&void 0===t||Rk(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ia=function(n,e){if(".info"===Qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},Pk=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Sb(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Rk(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Rj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function xb(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!YM(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ok(n,e,t){xb(n,t),kk(n,r=>YM(r,e))}function Ca(n,e,t){xb(n,t),kk(n,r=>wa(r,e)||wa(e,r))}function kk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Nj(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Nj(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();$p&&Di("event: "+t.toString()),x_(r)}}}const Fk="repo_interrupt";class Oj{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Rj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hb(),this.transactionQueueTree_=new RR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Lk(n){const t=n.infoData_.getNode(new Mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Fw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Lk(n)})}function Vk(n,e,t,r,i){n.dataUpdateCount++;const a=new Mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,O.UI)(t,v=>Sr(v));l=function pj(n,e,t,r){const i=DR(n,r);if(i){const a=bR(i),l=a.path,f=a.queryId,m=Ps(l,e),v=er.fromObject(t);return TR(n,l,new F_(dR(f),m,v))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Sr(t);l=Ek(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,O.UI)(t,v=>Sr(v));l=function cj(n,e,t){const r=er.fromObject(t);return V_(n,new F_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Sr(t);l=Sw(n.serverSyncTree_,a,m)}let f=a;l.length>0&&(f=U_(n,a)),Ca(n.eventQueue_,f,l)}function Uk(n,e){FR(n,"connected",e),!1===e&&function Uj(n){Yp(n,"onDisconnectEvents");const e=Fw(n),t=hb();uR(n.onDisconnect_,gn(),(i,a)=>{const l=Sk(i,a,n.serverSyncTree_,e);k_(t,i,l)});let r=[];uR(t,gn(),(i,a)=>{r=r.concat(Sw(n.serverSyncTree_,i,a));const l=BR(n,i);U_(n,l)}),n.onDisconnect_=hb(),Ca(n.eventQueue_,gn(),r)}(n)}function FR(n,e,t){const r=new Mn("/.info/"+e),i=Sr(t);n.infoData_.updateSnapshot(r,i);const a=Sw(n.infoSyncTree_,r,i);Ca(n.eventQueue_,r,a)}function Mb(n){return n.nextWriteId_++}function Lj(n,e){const t=function gj(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(v,b)=>{const S=Ps(v,t);r=r||Mh(b,S)});let i=n.syncPointTree_.get(t);i?r=r||Mh(i,gn()):(i=new mk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Sh(r,!0,!1):null;return function QB(n){return gb(n.viewCache_)}(IR(i,e,mb(n.pendingWriteTree_,e._path),a?l.getNode():$t.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Sr(r).withIndex(e._queryParams.getIndex());if(e._queryParams.loadsAllData())Sw(n.serverSyncTree_,e._path,i);else{const l=function fj(n,e){const{syncPoint:t,serverCache:r,writesCache:i,serverCacheComplete:a}=Ik(e,n),l=IR(t,e,i,r,a);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,l),e._queryParams.loadsAllData()?null:xw(n,e)}(n.serverSyncTree_,e);Ek(n.serverSyncTree_,e._path,i,l)}return Cb(n.serverSyncTree_,e,null).length>0&&Yp(n,"unexpected cancel events in repoGetValue"),i},r=>(Yp(n,"get for query "+(0,O.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}function LR(n,e,t,r,i){Yp(n,"set",{path:e.toString(),value:t,priority:r});const a=Fw(n),l=Sr(t,r),f=Db(n.serverSyncTree_,e),m=xR(l,f,a),v=Mb(n),b=CR(n.serverSyncTree_,e,m,v,!0);xb(n.eventQueue_,b),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const Q="ok"===P;Q||ns("set at "+e+" failed: "+P);const be=Nh(n.serverSyncTree_,v,!Q);Ca(n.eventQueue_,e,be),Ph(0,i,P,U)});const S=BR(n,e);U_(n,S),Ca(n.eventQueue_,S,[])}function Bj(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&aR(n.onDisconnect_,e),Ph(0,t,r,i)})}function Bk(n,e,t,r){const i=Sr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&k_(n.onDisconnect_,e,i),Ph(0,r,a,l)})}function VR(n,e,t){let r;r=".info"===Qt(e._path)?Cb(n.infoSyncTree_,e,t):Cb(n.serverSyncTree_,e,t),Ok(n.eventQueue_,e._path,r)}function jk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Fk)}function Yp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Di(t,...e)}function Ph(n,e,t,r){e&&x_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function UR(n,e,t){return Db(n.serverSyncTree_,e,t)||$t.EMPTY_NODE}function Rb(n,e=n.transactionQueueTree_){if(e||Nb(n,e),Kp(e)){const t=Hk(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function zj(n,e,t){const r=t.map(v=>v.currentWriteId),i=UR(n,e,r);let a=i;const l=i.hash();for(let v=0;v<t.length;v++){const b=t[v];(0,O.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const S=Ps(e,b.path);a=a.updateChild(S,b.currentOutputSnapshotRaw)}const f=a.val(!0),m=e;n.server_.put(m.toString(),f,v=>{Yp(n,"transaction put response",{path:m.toString(),status:v});let b=[];if("ok"===v){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,b=b.concat(Nh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();Nb(n,Tb(n.transactionQueueTree_,e)),Rb(n,n.transactionQueueTree_),Ca(n.eventQueue_,e,b);for(let P=0;P<S.length;P++)x_(S[P])}else{if("datastale"===v)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ns("transaction at "+m.toString()+" failed: "+v);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=v}U_(n,e)}},l)}(n,Rw(e),t)}else xk(e)&&Ab(e,t=>{Rb(n,t)})}function U_(n,e){const t=$k(n,e),r=Rw(t);return function qj(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(f=>0===f.status).map(f=>f.currentWriteId);for(let f=0;f<e.length;f++){const m=e[f],v=Ps(t,m.path);let S,b=!1;if((0,O.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,S=m.abortReason,i=i.concat(Nh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)b=!0,S="maxretry",i=i.concat(Nh(n.serverSyncTree_,m.currentWriteId,!0));else{const P=UR(n,m.path,l);m.currentInputSnapshot=P;const U=e[f].update(P.val());if(void 0!==U){Pw("transaction failed: Data returned ",U,m.path);let Q=Sr(U);"object"==typeof U&&null!=U&&(0,O.r3)(U,".priority")||(Q=Q.updatePriority(P.getPriority()));const $e=m.currentWriteId,ct=Fw(n),Ct=xR(Q,P,ct);m.currentOutputSnapshotRaw=Q,m.currentOutputSnapshotResolved=Ct,m.currentWriteId=Mb(n),l.splice(l.indexOf($e),1),i=i.concat(CR(n.serverSyncTree_,m.path,Ct,m.currentWriteId,m.applyLocally)),i=i.concat(Nh(n.serverSyncTree_,$e,!0))}else b=!0,S="nodata",i=i.concat(Nh(n.serverSyncTree_,m.currentWriteId,!0))}Ca(n.eventQueue_,t,i),i=[],b&&(e[f].status=2,setTimeout(e[f].unwatcher,Math.floor(0)),e[f].onComplete&&r.push("nodata"===S?()=>e[f].onComplete(null,!1,e[f].currentInputSnapshot):()=>e[f].onComplete(new Error(S),!1,null)))}Nb(n,n.transactionQueueTree_);for(let f=0;f<r.length;f++)x_(r[f]);Rb(n,n.transactionQueueTree_)}(n,Hk(n,t),r),r}function $k(n,e){let t,r=n.transactionQueueTree_;for(t=Qt(e);null!==t&&void 0===Kp(r);)r=Tb(r,t),t=Qt(e=Zn(e));return r}function Hk(n,e){const t=[];return Gk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Gk(n,e,t){const r=Kp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ab(e,i=>{Gk(n,i,t)})}function Nb(n,e){const t=Kp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,NR(e,t.length>0?t:void 0)}Ab(e,r=>{Nb(n,r)})}function BR(n,e){const t=Rw($k(n,e)),r=Tb(n.transactionQueueTree_,e);return function Dj(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{jR(n,i)}),jR(n,r),Mk(r,i=>{jR(n,i)}),t}function jR(n,e){const t=Kp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,O.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,O.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Nh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?NR(e,void 0):t.length=a+1,Ca(n.eventQueue_,Rw(e),i);for(let l=0;l<r.length;l++)x_(r[l])}}const $R=function(n,e){const t=Yj(n),r=t.namespace;return"firebase.com"===t.domain&&Sl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Sl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ns("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new HM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Mn(t.pathString)}},Yj=function(n){let e="",t="",r="",i="",a="",l=!0,f="https",m=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(f=n.substring(0,v-1),n=n.substring(v+2));let b=n.indexOf("/");-1===b&&(b=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(b,S)),b<S&&(i=function Zj(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,S)));const P=function Kj(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ns(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));v=e.indexOf(":"),v>=0?(l="https"===f||"wss"===f,m=parseInt(e.substring(v+1),10)):v=e.length;const U=e.slice(0,v);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const Q=e.indexOf(".");r=e.substring(0,Q).toLowerCase(),t=e.substring(Q+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:f,pathString:i,namespace:a}};class Wk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class zk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class qk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Zk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return Bj(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Ia("OnDisconnect.remove",this._path);const e=new O.BH;return Bk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Ia("OnDisconnect.set",this._path),Rl("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return Bk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Ia("OnDisconnect.setWithPriority",this._path),Rl("OnDisconnect.setWithPriority",e,this._path,!1),kR("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function jj(n,e,t,r,i){const a=Sr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,f)=>{"ok"===l&&k_(n.onDisconnect_,e,a),Ph(0,i,l,f)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Ia("OnDisconnect.update",this._path),Nk("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function $j(n,e,t,r){if((0,O.xb)(t))return Di("onDisconnect().update() called with empty data.  Don't do anything."),void Ph(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&bi(t,(l,f)=>{const m=Sr(f);k_(n.onDisconnect_,Er(e,l),m)}),Ph(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class no{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Jt(this._path)?null:KM(this._path)}get ref(){return new Da(this._repo,this._path)}get _queryIdentifier(){const e=Q1(this._queryParams),t=BM(e);return"{}"===t?"default":t}get _queryObject(){return Q1(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof no))return!1;const t=this._repo===e._repo,r=YM(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function B2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Pb(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Oh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ml){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Qc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==xl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Xn){if(null!=e&&!Nw(e)||null!=t&&!Nw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof tR||n.getIndex()===nR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ob(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Da extends no{constructor(e,t){super(e,t,new lb,!1)}get parent(){const e=k1(this._path);return null===e?null:new Da(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Qp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Mn(e),r=Jp(this.ref,e);return new Qp(this._node.getChild(t),r,Xn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Qp(i,Jp(this.ref,r),Xn)))}hasChild(e){const t=new Mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Kk(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?Jp(n._root,e):n._root}function Yk(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=$R(e,n._repo.repoInfo_.nodeAdmin);Pk("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Sl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),Kk(n,t.path.toString())}function Jp(n,e){return null===Qt((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),kw("child","path",t,!1)):kw("child","path",e,!1),new Da(n._repo,Er(n._path,e));var t}function HR(n,e){n=(0,O.m9)(n),Ia("set",n._path),Rl("set",e,n._path,!1);const t=new O.BH;return LR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function t$(n,e){Nk("update",e,n._path,!1);const t=new O.BH;return function Vj(n,e,t,r){Yp(n,"update",{path:e.toString(),value:t});let i=!0;const a=Fw(n),l={};if(bi(t,(f,m)=>{i=!1,l[f]=Sk(Er(e,f),Sr(m),n.serverSyncTree_,a)}),i)Di("update() called with empty data.  Don't do anything."),Ph(0,r,"ok",void 0);else{const f=Mb(n),m=function lj(n,e,t,r){!function TB(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=fR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=er.fromObject(t);return V_(n,new F_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,f);xb(n.eventQueue_,m),n.server_.merge(e.toString(),t,(v,b)=>{const S="ok"===v;S||ns("update at "+e+" failed: "+v);const P=Nh(n.serverSyncTree_,f,!S),U=P.length>0?U_(n,e):e;Ca(n.eventQueue_,U,P),Ph(0,r,v,b)}),bi(t,v=>{const b=BR(n,Er(e,v));U_(n,b)}),Ca(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}class kb{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Wk("value",this,new Qp(e.snapshotNode,new Da(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zk(this,e,t):null}matches(e){return e instanceof kb&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Fb{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new zk(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=Jp(new Da(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Wk(e.type,this,new Qp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Fb&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Lw(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,v=(b,S)=>{VR(n._repo,n,f),m(b,S)};v.userCallback=t.userCallback,v.context=t.context,t=v}const l=new qk(t,a||void 0),f="value"===e?new kb(l):new Fb(e,l);return function Hj(n,e,t){let r;r=".info"===Qt(e._path)?Ck(n.infoSyncTree_,e,t):Ck(n.serverSyncTree_,e,t),Ok(n.eventQueue_,e._path,r)}(n._repo,n,f),()=>VR(n._repo,n,f)}function GR(n,e,t,r){return Lw(n,"value",e,t,r)}function Qk(n,e,t,r){return Lw(n,"child_added",e,t,r)}function Jk(n,e,t,r){return Lw(n,"child_changed",e,t,r)}function Xk(n,e,t,r){return Lw(n,"child_moved",e,t,r)}function eF(n,e,t,r){return Lw(n,"child_removed",e,t,r)}function tF(n,e,t){let r=null;const i=t?new qk(t):null;"value"===e?r=new kb(i):e&&(r=new Fb(e,i)),VR(n._repo,n,r)}class vu{}class nF extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("endAt",this._value,e._path,!0);const t=oR(e._queryParams,this._value,this._key);if(Ob(t),Oh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class i$ extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("endBefore",this._value,e._path,!1);const t=function fB(n,e,t){let r,i;return n.index_===Ml?("string"==typeof e&&(e=Z1(e)),i=oR(n,e,t)):(r=null==t?Qc:Z1(t),i=oR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Ob(t),Oh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class rF extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("startAt",this._value,e._path,!0);const t=sR(e._queryParams,this._value,this._key);if(Ob(t),Oh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class a$ extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Rl("startAfter",this._value,e._path,!1);const t=function hB(n,e,t){let r;if(n.index_===Ml)"string"==typeof e&&(e=q1(e)),r=sR(n,e,t);else{let i;i=null==t?xl:q1(t),r=sR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Ob(t),Oh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new no(e._repo,e._path,t,e._orderByCalled)}}class l$ extends vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function cB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class d$ extends vu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new no(e._repo,e._path,function dB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class f$ extends vu{constructor(e){super(),this._path=e}_apply(e){Pb(e,"orderByChild");const t=new Mn(this._path);if(Jt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new tR(t),i=cb(e._queryParams,r);return Oh(i),new no(e._repo,e._path,i,!0)}}class g$ extends vu{_apply(e){Pb(e,"orderByKey");const t=cb(e._queryParams,Ml);return Oh(t),new no(e._repo,e._path,t,!0)}}class _$ extends vu{_apply(e){Pb(e,"orderByPriority");const t=cb(e._queryParams,Xn);return Oh(t),new no(e._repo,e._path,t,!0)}}class v$ extends vu{_apply(e){Pb(e,"orderByValue");const t=cb(e._queryParams,nR);return Oh(t),new no(e._repo,e._path,t,!0)}}class E$ extends vu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Rl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new nF(this._value,this._key)._apply(new rF(this._value,this._key)._apply(e))}}function wu(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function tj(n){(0,O.hu)(!wb,"__referenceConstructor has already been defined"),wb=n})(Da),function oj(n){(0,O.hu)(!Ib,"__referenceConstructor has already been defined"),Ib=n}(Da);const WR={};function sF(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Sl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Di("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,v,l=$R(a,i),f=l.repoInfo;typeof process<"u"&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(m=!0,a=`http://${v}?ns=${f.namespace}`,l=$R(a,i),f=l.repoInfo):m=!l.repoInfo.secure;const b=i&&m?new mw(mw.OWNER):new g2(n.name,n.options,e);Pk("Invalid Firebase Database URL",l),Jt(l.path)||Sl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function T$(n,e,t,r){let i=WR[e.name];i||(i={},WR[e.name]=i);let a=i[n.toURLString()];return a&&Sl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new Oj(n,false,t,r),i[n.toURLString()]=a,a}(f,n,b,new p2(n.name,t));return new S$(S,n)}class S${constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function kj(n,e,t){if(n.stats_=zM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new db(n.repoInfo_,(r,i,a,l)=>{Vk(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Uk(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Wp(n.repoInfo_,e,(r,i,a,l)=>{Vk(n,r,i,a,l)},r=>{Uk(n,r)},r=>{!function Fj(n,e){bi(e,(t,r)=>{FR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function y2(n,e){const t=n.toString();return WM[t]||(WM[t]=e()),WM[t]}(n.repoInfo_,()=>new vB(n.stats_,n.server_)),n.infoData_=new pB,n.infoSyncTree_=new wk({startListening:(r,i,a,l)=>{let f=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(f=Sw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),f},stopListening:()=>{}}),FR(n,"connected",!1),n.serverSyncTree_=new wk({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(f,m)=>{const v=l(f,m);Ca(n.eventQueue_,r._path,v)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Da(this._repo,gn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function b$(n,e){const t=WR[e];(!t||t[n.key]!==n)&&Sl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),jk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Sl("Cannot call "+e+" on a deleted database.")}}function oF(){C1.IS_TRANSPORT_INITIALIZED&&ns("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function x$(){oF(),Th.forceDisallow()}function M$(){oF(),M_.forceDisallow(),Th.forceAllow()}function O$(n,e){r1(n,e)}const F$={".sv":"timestamp"};class U${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Wp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Wp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function k$(n){JO(Sn.SDK_VERSION),(0,Sn._registerComponent)(new Qs.wA("database",(e,{instanceIdentifier:t})=>sF(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Sn.registerVersion)(YO,"0.13.3",n),(0,Sn.registerVersion)(YO,"0.13.3","esm2017")}();const H$=new ui.Yd("@firebase/database-compat"),aF=function(n){H$.warn("FIREBASE WARNING: "+n)};class z${constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,aF("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class q${constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class kh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),kw("DataSnapshot.child","path",e,!1),new kh(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),kw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new kh(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ko(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Bi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const l=Bi.getCancelAndContextArgs_("Query.on",r,i),f=(v,b)=>{t.call(l.context,new kh(this.database,v),b)};f.userCallback=t,f.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return GR(this._delegate,f,m),t;case"child_added":return Qk(this._delegate,f,m),t;case"child_removed":return eF(this._delegate,f,m),t;case"child_changed":return Jk(this._delegate,f,m),t;case"child_moved":return Xk(this._delegate,f,m),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,tF(this._delegate,e,i)}else tF(this._delegate,e)}get(){return function n$(n){return Lj((n=(0,O.m9)(n))._repo,n).then(e=>new Qp(e,new Da(n._repo,n._path),n._queryParams.getIndex()))}(this._delegate).then(e=>new kh(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=Bi.getCancelAndContextArgs_("Query.once",r,i),l=new O.BH,f=(v,b)=>{const S=new kh(this.database,v);t&&t.call(a.context,S,b),l.resolve(S)};f.userCallback=t,f.context=a.context;const m=v=>{a.cancel&&a.cancel.call(a.context,v),l.reject(v)};switch(e){case"value":GR(this._delegate,f,m,{onlyOnce:!0});break;case"child_added":Qk(this._delegate,f,m,{onlyOnce:!0});break;case"child_removed":eF(this._delegate,f,m,{onlyOnce:!0});break;case"child_changed":Jk(this._delegate,f,m,{onlyOnce:!0});break;case"child_moved":Xk(this._delegate,f,m,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new Bi(this.database,wu(this._delegate,function c$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new l$(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new Bi(this.database,wu(this._delegate,function h$(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new d$(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new Bi(this.database,wu(this._delegate,function p$(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return kw("orderByChild","path",n,!1),new f$(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new Bi(this.database,wu(this._delegate,function m$(){return new g$}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new Bi(this.database,wu(this._delegate,function y$(){return new _$}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new Bi(this.database,wu(this._delegate,function w$(){return new v$}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new Bi(this.database,wu(this._delegate,function o$(n=null,e){return Ow("startAt","key",e,!0),new rF(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new Bi(this.database,wu(this._delegate,function u$(n,e){return Ow("startAfter","key",e,!0),new a$(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new Bi(this.database,wu(this._delegate,function r$(n,e){return Ow("endAt","key",e,!0),new nF(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new Bi(this.database,wu(this._delegate,function s$(n,e){return Ow("endBefore","key",e,!0),new i$(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new Bi(this.database,wu(this._delegate,function I$(n,e){return Ow("equalTo","key",e,!0),new E$(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Bi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ko(this.database,new Da(this._delegate._repo,this._delegate._path))}}class ko extends Bi{constructor(e,t){super(e,new no(t._repo,t._path,new lb,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ko(this.database,Jp(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ko(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ko(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=HR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,aF("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ia("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=t$(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function e$(n,e,t){if(Ia("setWithPriority",n._path),Rl("setWithPriority",e,n._path,!1),kR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return LR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function Jj(n){return Ia("remove",n._path),HR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function B$(n,e,t){var r;if(n=(0,O.m9)(n),Ia("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new O.BH,f=GR(n,()=>{});return function Wj(n,e,t,r,i,a){Yp(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:e1(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},f=UR(n,e,void 0);l.currentInputSnapshot=f;const m=l.update(f.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Pw("transaction failed: Data returned ",m,l.path),l.status=0;const v=Tb(n.transactionQueueTree_,e),b=Kp(v)||[];let S;b.push(l),NR(v,b),"object"==typeof m&&null!==m&&(0,O.r3)(m,".priority")?(S=(0,O.DV)(m,".priority"),(0,O.hu)(Nw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Db(n.serverSyncTree_,e)||$t.EMPTY_NODE).getPriority().val();const P=Fw(n),U=Sr(m,S),Q=xR(U,f,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=Q,l.currentWriteId=Mb(n);const be=CR(n.serverSyncTree_,e,Q,l.currentWriteId,l.applyLocally);Ca(n.eventQueue_,e,be),Rb(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,v,b)=>{let S=null;m?a.reject(m):(S=new Qp(b,new Da(n._repo,n._path),Xn),a.resolve(new U$(v,S)))},f,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new q$(a.committed,new kh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function Xj(n,e){n=(0,O.m9)(n),Ia("setPriority",n._path),kR("setPriority",e,!1);const t=new O.BH;return LR(n._repo,Er(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function Qj(n,e){n=(0,O.m9)(n),Ia("push",n._path),Rl("push",e,n._path,!0);const t=Lk(n._repo),r=oB(t),i=Jp(n,r),a=Jp(n,r);let l;return l=null!=e?HR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new ko(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new ko(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Ia("Reference.onDisconnect",this._delegate._path),new z$(new Zk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Vw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:x$,forceLongPolling:M$}}useEmulator(e,t,r={}){!function R$(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Sl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Sl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new mw(mw.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new mw(l)}!function D$(n,e,t,r){n.repoInfo_=new HM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof ko){const t=Yk(this._delegate,e.toString());return new ko(this,t)}{const t=Kk(this._delegate,e);return new ko(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=Yk(this._delegate,e);return new ko(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function N$(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),jk(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function P$(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function Gj(n){n.persistentConnection_&&n.persistentConnection_.resume(Fk)}(n._repo)}(this._delegate)}}Vw.ServerValue={TIMESTAMP:function L$(){return F$}(),increment:n=>function V$(n){return{".sv":{increment:n}}}(n)};var K$=Object.freeze({__proto__:null,initStandalone:function Z$({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){JO(t);const l=new Qs.zt("auth-internal",new Qs.H0("database-standalone"));return l.setComponent(new Qs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new Vw(sF(n,l,void 0,e,a),n),namespace:i}}});const Y$=Vw.ServerValue;function uF(n){return null==n}function lF(n){return"function"==typeof n.set}function cF(n,e){return lF(e)?e:n.ref(e)}function dF(n,e){if(function J$(n){return"string"==typeof n}(n))return e.stringCase();if(lF(n))return e.firebaseCase();if(function X$(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Uw(n,e,t="on",r=Ds.z){return new un.y(i=>{let a=null;return a=n[t](e,(l,f)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:f})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,dt.U)(i=>{const{snapshot:a,prevKey:l}=i;let f=null;return a.exists()&&(f=a.key),{type:e,payload:a,prevKey:l,key:f}}),(0,_O.B)())}function hF(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function nH(n,e){const{payload:t,prevKey:r,key:i}=e,a=hF(n,i),l=function tH(n,e){if(uF(e))return 0;{const t=hF(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let f=null;e.payload.forEach(m=>{const v={payload:m,type:"value",prevKey:f,key:m.key};return f=m.key,n=[...n,v],!1})}return n;case"child_added":if(a>-1){const f=n[a-1];(f&&f.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(f=>f.payload.key!==t.key);case"child_changed":return n.map(f=>f.payload.key===i?e:f);case"child_moved":if(a>-1){const f=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,f),n}return n;default:return n}}function fF(n){return(uF(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function pF(n,e,t){return function eH(n,e,t){return Uw(n,"value","once",t).pipe(Hr(r=>{const i=[At(r)];return e.forEach(a=>i.push(Uw(n,a,"on",t))),(0,lM.T)(...i).pipe(rl(nH,[]))}),gc())}(n,e=fF(e),t)}function gF(n,e,t){const r=(e=fF(e)).map(i=>Uw(n,i,"on",t));return(0,lM.T)(...r)}function mF(n,e){return function(r,i){return dF(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function oH(n){return function(t){return t?dF(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function _F(n,e){return function(){return Uw(n,"value","on",e)}}!function Q$(n){n.INTERNAL.registerComponent(new Qs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Vw(i,r)},"PUBLIC").setServiceProps({Reference:ko,Query:Bi,Database:Vw,DataSnapshot:kh,enableLogging:O$,INTERNAL:K$,ServerValue:Y$}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.3")}(mc.Z);const lH=new d.OlP("angularfire2.realtimeDatabaseURL"),cH=new d.OlP("angularfire2.database.use-emulator");let dH=(()=>{class n{constructor(t,r,i,a,l,f,m,v,b,S,P,U,Q,be,$e){this.schedulers=f;const ct=m,Ct=(0,Nr.on)(t,l,r);v&&OM(Ct,l,b,P,U,Q,S,be),this.database=(0,Nr.cc)(`${Ct.name}.database.${i}`,"AngularFireDatabase",Ct.name,()=>{const Lt=l.runOutsideAngular(()=>Ct.database(i||void 0));return ct&&Lt.useEmulator(...ct),Lt},[ct])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>cF(this.database,t));let a=i;return r&&(a=r(i)),function aH(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:mF(r,"update"),set:mF(r,"set"),push:i=>r.push(i),remove:oH(r),snapshotChanges:i=>pF(n,i,t).pipe(tn.iC),stateChanges:i=>gF(n,i,t).pipe(tn.iC),auditTrail:i=>function rH(n,e,t){return function sH(n,e,t){return function iH(n,e){return Uw(n,"value","on",e).pipe((0,dt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function n2(...n){const e=(0,ys.jO)(n);return(0,vi.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),f=!1;for(let m=0;m<i;m++)(0,_s.Xf)(n[m]).subscribe((0,Fn.x)(r,v=>{a[m]=v,!f&&!l[m]&&(l[m]=!0,(f=l.every(Rd.y))&&(l=null))},t2.Z));t.subscribe((0,Fn.x)(r,m=>{if(f){const v=[m,...a];r.next(e?e(...v):v)}}))})}(e),(0,dt.U)(([i,a])=>{const l=i.lastKeyToLoad,f=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:f}}),function r2(n){return(0,vi.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Fn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,dt.U)(i=>i.actions))}(n,gF(n,e).pipe(rl((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(tn.iC),valueChanges:(i,a)=>pF(n,i,t).pipe((0,dt.U)(f=>f.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),tn.iC)}}(a,this)}object(t){return function uH(n,e){return{query:n,snapshotChanges:()=>_F(n,e.schedulers.outsideAngular)().pipe(tn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>_F(n,e.schedulers.outsideAngular)().pipe(tn.iC,(0,dt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>cF(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Nr.Dh),d.LFG(Nr.xv,8),d.LFG(lH,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(tn.HU),d.LFG(cH,8),d.LFG(YD,8),d.LFG(SM,8),d.LFG(xM,8),d.LFG(MM,8),d.LFG(RM,8),d.LFG(NM,8),d.LFG(PM,8),d.LFG(dw,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Bw=(()=>{class n{constructor(t,r){this.db=t,this.firestore=r}AddRestaurant(t){let r=t.res_name,i=t.restaurant_address,a=t.restaurant_name;this.firestore.collection("restaurants").add({res_name:r,restaurant_address:i,restaurant_name:a}).then(l=>l.id).catch(l=>{console.log(l)})}AddTable(t){let r=t.table_id,i=t.restaurant_id,a=t.is_call,l=t.call_type,f=t.call_time;this.firestore.collection("tables").add({table_id:r,restaurant_id:i,is_call:a,call_type:l,call_time:f}).then(m=>m.id).catch(m=>{console.log(m)})}GetRestorants(t){return this.firestore.collection("restaurants",i=>i.where("res_name","==",t)).get()}GetUserToRestaurant(t){var r=[];this.firestore.collection("userToRestaurant",i=>i.where("user_id","==",t)).get().subscribe(i=>0===i.docs.length?null:(i.docs.forEach(a=>r.push(JSON.stringify(a.data()))),r))}ValidRestorantAndTable(t,r){return this.firestore.collection("tables",i=>i.where("restaurant_id","==",t).where("table_id","==",r))}ValidToken(t){return this.firestore.collection("tables",r=>r.where("OTK","==",t))}SetOTK(t,r=""){this.firestore.doc("/tables/"+r).update({OTK:t})}CallService(t=""){if(""!=t){let r=new Date;this.firestore.doc("/tables/"+t).update({is_call:!0,call_time:r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),call_type:"\u05e9\u05d9\u05e8\u05d5\u05ea"})}}CallBill(t=""){if(""!=t){let r=new Date;this.firestore.doc("/tables/"+t).update({is_call:!0,call_time:r.getHours()+":"+r.getMinutes()+":"+r.getSeconds(),call_type:"\u05d7\u05e9\u05d1\u05d5\u05df"}),this.SetOTK(t)}}Updatebip(t=""){""!=t&&this.firestore.doc("/tables/"+t).update({is_bip:!0})}GetTables(t){return this.firestore.collection("tables",r=>r.where("restaurant_id","==",t).where("is_call","==",!0).limit(4))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dH),d.LFG(JD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hH=(()=>{class n{constructor(t,r){this.userService=t,this.restaurantService=r}ngOnInit(){let t=localStorage.getItem("user");t&&console.log(t);let i=JSON.parse(localStorage.getItem("user")).uid;this.restaurantService.GetUserToRestaurant(i),this.restaurantService.GetTables("4kkWRim7TbdOYUyBdnDf")}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(XD),d.Y36(Bw))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-manager-panel"]],decls:181,vars:1,consts:[[1,"navbar","navbar-light","bg-light","p-3"],[1,"d-flex","col-12","col-md-3","col-lg-2","mb-2","mb-lg-0","flex-wrap","flex-md-nowrap","justify-content-between"],[1,"cap"],["aria-relevant"," text"],["type","button","value","SignOut",1,"btn","btnPrimary",3,"click"],[1,"wrapper"],[1,"counter","col_fourth","end"],[1,"fa","fa-bug","fa-2x"],["data-to","157","data-speed","1500",1,"timer","count-title","count-number"],[1,"count-text"],[1,"position-sticky","pt-md-5"],[1,"nav","flex-column"],[1,"nav-item"],[1,"row","my-4"],[1,"col-12","col-md-6","col-lg-3","mb-4","mb-lg-0"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-text","text-success"],[1,"col-12","col-md-6","mb-4","mb-lg-0","col-lg-3"],[1,"card-text","text-danger"],[1,"row"],[1,"col-12","col-xl-8","mb-4","mb-lg-0"],[1,"table-responsive"],[1,"table"],["scope","col"],["scope","row"],["href","#",1,"btn","btn-sm","btn-primary"],["href","#",1,"btn","btn-block","btn-light"],[1,"col-12","col-xl-4"],["id","traffic-chart"],[1,"pt-5","d-flex","justify-content-between"],["href","https://themesberg.com"],[1,"nav","m-0"],["aria-current","page","href","#",1,"nav-link","text-secondary"],["href","#",1,"nav-link","text-secondary"]],template:function(t,r){1&t&&(d.TgZ(0,"body")(1,"nav",0)(2,"div",1)(3,"h1",2),d._uU(4),d.qZA(),d.TgZ(5,"h2",3),d._uU(6,"\u05e0\u05ea\u05d5\u05e0\u05d9 \u05d4\u05de\u05e1\u05e2\u05d3\u05d4"),d.qZA(),d.TgZ(7,"input",4),d.NdJ("click",function(){return r.userService.SignOut()}),d.qZA()()(),d.TgZ(8,"div",5)(9,"div",6),d._UZ(10,"i",7)(11,"h2",8),d.TgZ(12,"p",9),d._uU(13,"\u05dc\u05e7\u05d5\u05d7\u05d5\u05ea \u05e9\u05e1\u05e8\u05e7\u05d5"),d.qZA()()(),d._uU(14," --\x3e "),d.TgZ(15,"div",10)(16,"ul",11)(17,"li",12)(18,"main")(19,"div",13)(20,"div",14)(21,"div",15)(22,"h5",16),d._uU(23,"\u05dc\u05e7\u05d5\u05d7\u05d5\u05ea \u05e9\u05e1\u05e8\u05e7\u05d5"),d.qZA(),d.TgZ(24,"div",17)(25,"h5",18),d._uU(26,"345k"),d.qZA(),d.TgZ(27,"p",19),d._uU(28,"Feb 1 - Apr 1, United States"),d.qZA(),d.TgZ(29,"p",20),d._uU(30,"18.2% increase since last month"),d.qZA()()()(),d.TgZ(31,"div",21)(32,"div",15)(33,"h5",16),d._uU(34,"Revenue"),d.qZA(),d.TgZ(35,"div",17)(36,"h5",18),d._uU(37,"$2.4k"),d.qZA(),d.TgZ(38,"p",19),d._uU(39,"Feb 1 - Apr 1, United States"),d.qZA(),d.TgZ(40,"p",20),d._uU(41,"4.6% increase since last month"),d.qZA()()()(),d.TgZ(42,"div",21)(43,"div",15)(44,"h5",16),d._uU(45,"Purchases"),d.qZA(),d.TgZ(46,"div",17)(47,"h5",18),d._uU(48,"43"),d.qZA(),d.TgZ(49,"p",19),d._uU(50,"Feb 1 - Apr 1, United States"),d.qZA(),d.TgZ(51,"p",22),d._uU(52,"2.6% decrease since last month"),d.qZA()()()(),d.TgZ(53,"div",21)(54,"div",15)(55,"h5",16),d._uU(56,"Traffic"),d.qZA(),d.TgZ(57,"div",17)(58,"h5",18),d._uU(59,"64k"),d.qZA(),d.TgZ(60,"p",19),d._uU(61,"Feb 1 - Apr 1, United States"),d.qZA(),d.TgZ(62,"p",20),d._uU(63,"2.5% increase since last month"),d.qZA()()()()(),d.TgZ(64,"div",23)(65,"div",24)(66,"div",15)(67,"h2",16),d._uU(68,"\u05d1\u05d9\u05e7\u05d5\u05e8\u05d5\u05ea"),d.qZA(),d.TgZ(69,"div",17)(70,"div",25)(71,"table",26)(72,"thead")(73,"tr")(74,"th",27),d._uU(75,"\u05e9\u05dd"),d.qZA(),d.TgZ(76,"th",27),d._uU(77,"\u05de\u05dc\u05dc"),d.qZA(),d.TgZ(78,"th",27),d._uU(79,"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"),d.qZA(),d.TgZ(80,"th",27),d._uU(81,"Date"),d.qZA(),d._UZ(82,"th",27),d.qZA()(),d.TgZ(83,"tbody")(84,"tr")(85,"th",28),d._uU(86,"17371705"),d.qZA(),d.TgZ(87,"td"),d._uU(88,"Volt Premium Bootstrap 5 Dashboard"),d.qZA(),d.TgZ(89,"td"),d._uU(90,"johndoe@gmail.com"),d.qZA(),d.TgZ(91,"td"),d._uU(92,"Aug 31 2020"),d.qZA(),d.TgZ(93,"td")(94,"a",29),d._uU(95,"View"),d.qZA()()(),d.TgZ(96,"tr")(97,"th",28),d._uU(98,"17370540"),d.qZA(),d.TgZ(99,"td"),d._uU(100,"Pixel Pro Premium Bootstrap UI Kit"),d.qZA(),d.TgZ(101,"td"),d._uU(102,"jacob.monroe@company.com"),d.qZA(),d.TgZ(103,"td"),d._uU(104,"Aug 28 2020"),d.qZA(),d.TgZ(105,"td")(106,"a",29),d._uU(107,"View"),d.qZA()()(),d.TgZ(108,"tr")(109,"th",28),d._uU(110,"17371705"),d.qZA(),d.TgZ(111,"td"),d._uU(112,"Volt Premium Bootstrap 5 Dashboard"),d.qZA(),d.TgZ(113,"td"),d._uU(114,"johndoe@gmail.com"),d.qZA(),d.TgZ(115,"td"),d._uU(116,"Aug 31 2020"),d.qZA(),d.TgZ(117,"td")(118,"a",29),d._uU(119,"View"),d.qZA()()(),d.TgZ(120,"tr")(121,"th",28),d._uU(122,"17370540"),d.qZA(),d.TgZ(123,"td"),d._uU(124,"Pixel Pro Premium Bootstrap UI Kit"),d.qZA(),d.TgZ(125,"td"),d._uU(126,"jacob.monroe@company.com"),d.qZA(),d.TgZ(127,"td"),d._uU(128,"Aug 28 2020"),d.qZA(),d.TgZ(129,"td")(130,"a",29),d._uU(131,"View"),d.qZA()()(),d.TgZ(132,"tr")(133,"th",28),d._uU(134,"17371705"),d.qZA(),d.TgZ(135,"td"),d._uU(136,"Volt Premium Bootstrap 5 Dashboard"),d.qZA(),d.TgZ(137,"td"),d._uU(138,"johndoe@gmail.com"),d.qZA(),d.TgZ(139,"td"),d._uU(140,"Aug 31 2020"),d.qZA(),d.TgZ(141,"td")(142,"a",29),d._uU(143,"View"),d.qZA()()(),d.TgZ(144,"tr")(145,"th",28),d._uU(146,"17370540"),d.qZA(),d.TgZ(147,"td"),d._uU(148,"Pixel Pro Premium Bootstrap UI Kit"),d.qZA(),d.TgZ(149,"td"),d._uU(150,"jacob.monroe@company.com"),d.qZA(),d.TgZ(151,"td"),d._uU(152,"Aug 28 2020"),d.qZA(),d.TgZ(153,"td")(154,"a",29),d._uU(155,"View"),d.qZA()()()()()(),d.TgZ(156,"a",30),d._uU(157,"View all"),d.qZA()()()(),d.TgZ(158,"div",31)(159,"div",15)(160,"h5",16),d._uU(161,"Traffic last 6 months"),d.qZA(),d.TgZ(162,"div",17),d._UZ(163,"div",32),d.qZA()()()(),d.TgZ(164,"p"),d._uU(165,"This is the homepage of a simple admin interface which is part of a tutorial written on Themesberg"),d.qZA()(),d.TgZ(166,"footer",33)(167,"span"),d._uU(168,"Copyright \xa9 2019-2020 "),d.TgZ(169,"a",34),d._uU(170,"Themesberg"),d.qZA()(),d.TgZ(171,"ul",35)(172,"li",12)(173,"a",36),d._uU(174,"Privacy Policy"),d.qZA()(),d.TgZ(175,"li",12)(176,"a",37),d._uU(177,"Terms and conditions"),d.qZA()(),d.TgZ(178,"li",12)(179,"a",37),d._uU(180,"Contact"),d.qZA()()()()()()()()),2&t&&(d.xp6(4),d.hij("\u05e9\u05dc\u05d5\u05dd ",r.username,""))},styles:[".counter[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:20px 0;border-radius:5px}.count-title[_ngcontent-%COMP%]{font-size:40px;font-weight:400;margin-top:10px;margin-bottom:0;text-align:center}.count-text[_ngcontent-%COMP%]{font-size:13px;font-weight:400;margin-top:10px;margin-bottom:0;text-align:center}.fa-2x[_ngcontent-%COMP%]{margin:0 auto;float:none;display:table;color:#ff5e00}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%]{font-size:1.5rem;text-align:center}*[_ngcontent-%COMP%]{box-sizing:border-box}.row[_ngcontent-%COMP%]{margin-top:2em}.light[_ngcontent-%COMP%]{background:white;padding:2em 0;margin-top:2em}.light[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin:0}.col[_ngcontent-%COMP%]{padding:1em}.fifty[_ngcontent-%COMP%]{width:50%}.graphiq[_ngcontent-%COMP%]{width:100%;position:relative;display:flex}.graphiq__graph-layout[_ngcontent-%COMP%]{flex:1;overflow-x:hidden}.graphiq__graph-values[_ngcontent-%COMP%]{font-size:.75em;padding-right:5px;display:flex;flex-direction:column;justify-content:space-between;padding-bottom:1.25em;text-align:right;font-weight:700}.graphiq__line[_ngcontent-%COMP%]{fill:none;stroke-miterlimit:10}.graphiq__graph-key[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.graphiq__graph-key[_ngcontent-%COMP%]   .key[_ngcontent-%COMP%]{font-size:.75em;text-align:center;display:block}.graphiq__y-division[_ngcontent-%COMP%]{fill:none;stroke-miterlimit:10;z-index:-1;transition:.25s ease-in}.graphiq__graph-dot[_ngcontent-%COMP%]{transition:stroke-width ease-in-out .2s;transform-origin:50% 50%}.graphiq__value-dialog[_ngcontent-%COMP%]{display:block;position:absolute;background:transparent;font-size:.75em;line-height:0;padding:.66em .33em;font-weight:700;animation:float .3s ease-out forwards}@keyframes float{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY()}}body[_ngcontent-%COMP%]{padding-top:50px}.h2[_ngcontent-%COMP%], .h1[_ngcontent-%COMP%], .h5[_ngcontent-%COMP%], .p[_ngcontent-%COMP%]{direction:rtl}.sidebar[_ngcontent-%COMP%]{direction:rtl;position:fixed;top:0;bottom:0;left:0;z-index:100;padding:90px 0 0;box-shadow:inset -1px 0 #0000001a;z-index:99}@media (max-width: 767.98px){.sidebar[_ngcontent-%COMP%]{direction:rtl;top:11.5rem;padding:0}}.navbar[_ngcontent-%COMP%]{direction:rtl;box-shadow:inset 0 -1px #0000001a}@media (min-width: 767.98px){.navbar[_ngcontent-%COMP%]{direction:rtl;top:0;position:sticky;z-index:999}}.sidebar[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{direction:rtl;color:#333}.sidebar[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%]{direction:rtl;color:#0d6efd}"]}),n})();function fH(n,e){if(1&n&&(d.TgZ(0,"div",2)(1,"div",3)(2,"h1"),d._uU(3,"\u05e9\u05d5\u05dc\u05d7\u05df"),d.qZA(),d.TgZ(4,"h2")(5,"span",4),d._uU(6),d.qZA()(),d.TgZ(7,"h2")(8,"span",4),d._uU(9),d.qZA()()()()),2&n){const t=e.$implicit;d.xp6(6),d.Oqu(t.table_id),d.xp6(3),d.Oqu(t.call_type)}}let pH=(()=>{class n{constructor(t,r,i){this.res_service=t,this.firestore2=r,this.route=i,this.tables=[]}ngOnInit(){let t=[];this.route.params.subscribe(r=>{this.id=r.id,this.restaurant=r.restaurant}),this.res_service.GetTables("4kkWRim7TbdOYUyBdnDf").snapshotChanges().subscribe(()=>{this.res_service.GetTables("4kkWRim7TbdOYUyBdnDf").get().subscribe(r=>{t=[],r.docs.forEach(i=>t.push(i.data())),this.tables=t;for(let i=0;i<this.tables.length;i++)0==this.tables[i].is_bip&&1==this.tables[i].is_call&&(this.audio_call(),this.Update_bip())}),console.log("done")})}Update_bip(){this.res_service.ValidRestorantAndTable(this.tables[0].restaurant_id,this.tables[0].table_id).get().subscribe(r=>{this.res_service.Updatebip(r.docs[0].id)})}audio_call(){const t=new Audio;t.src="https://firebasestorage.googleapis.com/v0/b/servicio-system.appspot.com/o/monitor.mp3?alt=media&token=5271873e-b14d-4939-b362-2ed1d606b4a4",t.load(),t.play()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Bw),d.Y36(JD),d.Y36(su))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-monitor"]],decls:3,vars:1,consts:[[1,"row","itemsBlock"],["class","col-md-6 ",4,"ngFor","ngForOf"],[1,"col-md-6"],[1,"vl"],[1,"tbl"]],template:function(t,r){1&t&&(d.TgZ(0,"body")(1,"div",0),d.YNc(2,fH,10,2,"div",1),d.qZA()()),2&t&&(d.xp6(2),d.Q6J("ngForOf",r.tables))},dependencies:[xi],styles:[".split[_ngcontent-%COMP%]{height:50%;width:50%;position:fixed;z-index:1;top:0;overflow-x:hidden;padding-top:20px}.split_down[_ngcontent-%COMP%]{height:50%;width:50%;position:fixed;z-index:1;bottom:0;overflow-x:hidden;padding-top:20px}h1[_ngcontent-%COMP%]{font-size:500%;text-align:center}h2[_ngcontent-%COMP%]{font-size:300%;text-align:center}hr.new[_ngcontent-%COMP%]{border:5px solid rgb(0,0,0);border-radius:20px}.left_up[_ngcontent-%COMP%]{left:0;background-color:#fff;border-color:#000}.left_down[_ngcontent-%COMP%]{left:0;background-color:#fff}.right_up[_ngcontent-%COMP%], .right_down[_ngcontent-%COMP%]{right:0;background-color:#fff}.centered[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center}",".vl[_ngcontent-%COMP%] {\n          border: 3px solid rgb(6, 6, 6);\n          height: 300px;\n        }"]}),n})(),yF=(()=>{class n{constructor(t){this.http=t,this.headers=new Ys({"Content-Type":"application/json"})}shorten(t,r){let i="";return r&&(i=`&alias=${encodeURIComponent(r)}`),this.http.get("https://tinyurl.com/api-create.php?url="+encodeURIComponent(t)+i,{headers:this.headers,responseType:"text"}).pipe((0,dt.U)(a=>a.toString()))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Md))},n.\u0275prov=(0,d.Yz7)({factory:function(){return new n((0,d.LFG)(Md))},token:n,providedIn:"root"}),n})(),gH=(()=>{class n{constructor(t,r,i,a){this.router=t,this.tinyUrl=r,this.res_service=i,this.route=a}ngOnInit(){this.route.params.subscribe(t=>{this.restorant=t.restaurant_id,this.table_id=t.table_id,this.res_service.ValidRestorantAndTable(this.restorant,this.table_id).get().subscribe(r=>{this.token=this.SetOTK(),this.res_service.SetOTK(this.token,r.docs[0].id),this.router.navigateByUrl("/restaurantgusts/"+this.token)}).then(this.router.navigate(["restaurantgusts",{token:this.token}]))})}SetOTK(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i="";for(let a=0;a<40;a++)i+=t.charAt(Math.floor(Math.random()*t.length));return localStorage.setItem("OTK",i),i}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Rr),d.Y36(yF),d.Y36(Bw),d.Y36(su))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-restaurantgusts-landing"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"p"),d._uU(1,"restaurantgusts-landing works!"),d.qZA())}}),n})(),mH=(()=>{class n{constructor(t,r,i){this.tinyUrl=t,this.res_service=r,this.route=i}ngOnInit(){this.route.params.subscribe(t=>{this.token=t.token,this.res_service.ValidToken(this.token).get().subscribe(r=>{r.docs.length>0?r.docs[0].data().OTK!=this.token?console.log("token invalid"):(this.restaurant_id=r.docs[0].data().restaurant_id,this.table_id=r.docs[0].data().table_id):console.log("token invalid")})})}SetOTK(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",i="";for(let a=0;a<40;a++)i+=t.charAt(Math.floor(Math.random()*t.length));return localStorage.setItem("OTK",i),i}CallService(){this.res_service.ValidRestorantAndTable(this.restaurant_id,this.table_id).get().subscribe(t=>{this.res_service.CallService(t.docs[0].id)})}CallBill(){this.res_service.ValidRestorantAndTable(this.restaurant_id,this.table_id).get().subscribe(t=>{this.res_service.CallBill(t.docs[0].id)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(yF),d.Y36(Bw),d.Y36(su))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-restaurantgusts"]],decls:5,vars:0,consts:[[1,"d-flex","justify-content-evenly"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"button",1),d.NdJ("click",function(){return r.CallService()}),d._uU(2,"\u05e9\u05d9\u05e8\u05d5\u05ea"),d.qZA(),d.TgZ(3,"button",1),d.NdJ("click",function(){return r.CallBill()}),d._uU(4,"\u05d7\u05e9\u05d1\u05d5\u05df"),d.qZA()())},styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#292929;color:#ffb600;padding:100%;text-align:center}a[_ngcontent-%COMP%]{color:#ffb600;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#ffd366}.inner[_ngcontent-%COMP%]{width:600px;margin:0 auto}.activity[_ngcontent-%COMP%]{padding:0;margin:2em 0;list-style:none}.activity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{transition:box-shadow .2s ease;-webkit-backface-visibility:hidden;backface-visibility:hidden;border-radius:50%;color:#ffb600;display:inline-block;font-size:.889em;height:8em;margin:0 1em 1em;position:relative;text-align:center;text-transform:lowercase;width:8em;line-height:8em}.activity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0}.activity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{box-shadow:0 0 0 7px #fff}.activity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:before{transform:scale(.925);box-shadow:0 0 0 1px #fff;opacity:.5}.activity[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{transition:all .2s ease;border-radius:50%;bottom:0;box-shadow:0 0 0 1px #fff;content:"";left:0;position:absolute;right:0;top:0}']}),n})();class _H{constructor(){this.id=0,this.name="",this.email="",this.mobile="",this.address="",this.services="",this.nickname="",this.password=""}}let yH=(()=>{class n{constructor(t){this._http=t}postRestaurant(t){return this._http.post("https://servicio-system-default-rtdb.firebaseio.com/users",t).pipe((0,dt.U)(r=>r))}getRestaurant(){return this._http.get("https://servicio-system-default-rtdb.firebaseio.com/users").pipe((0,dt.U)(t=>t))}updateRestaurant(t,r){return this._http.put("https://servicio-system-default-rtdb.firebaseio.com/users/"+r,t).pipe((0,dt.U)(i=>i))}deleteRestaurant(t){return this._http.delete("https://servicio-system-default-rtdb.firebaseio.com/users/"+t).pipe((0,dt.U)(r=>r))}updateCalls(t,r){return this._http.put("https://servicio-system-default-rtdb.firebaseio.com/usercomponent/"+r,t).pipe((0,dt.U)(i=>i))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Md))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr")(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.TgZ(11,"td"),d._uU(12),d.qZA(),d.TgZ(13,"td"),d._uU(14),d.qZA(),d.TgZ(15,"td"),d._uU(16),d.qZA(),d.TgZ(17,"td")(18,"button",37),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.editResto(a))}),d._uU(19,"\u05e2\u05e8\u05d9\u05db\u05d4"),d.qZA(),d._uU(20,"\xa0 "),d.TgZ(21,"button",38),d.NdJ("click",function(){const a=d.CHM(t).$implicit,l=d.oxw();return d.KtG(l.deleteResto(a))}),d._uU(22,"\u05de\u05d7\u05d9\u05e7\u05d4"),d.qZA()()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.id),d.xp6(2),d.Oqu(t.name),d.xp6(2),d.Oqu(t.email),d.xp6(2),d.Oqu(t.mobile),d.xp6(2),d.Oqu(t.address),d.xp6(2),d.Oqu(t.services),d.xp6(2),d.Oqu(t.nickname),d.xp6(2),d.Oqu(t.password)}}function wH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",39),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.addRestaurant())}),d._uU(1,"\u05e9\u05de\u05d5\u05e8"),d.qZA()}}function EH(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",39),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateResto())}),d._uU(1,"\u05e2\u05d3\u05db\u05df \u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd"),d.qZA()}}const IH=[{path:"",redirectTo:"",pathMatch:"full"},{path:"admin-login",component:iv},{path:"restaurant-admin",canActivate:[iv],component:(()=>{class n{constructor(t,r){this.formBuilder=t,this.api=r,this.restaurantModelObj=new _H}ngOnInit(){this.formValue=this.formBuilder.group({name:[""],email:[""],mobile:[""],address:[""],services:[""],nickname:[""],password:[""]}),this.getAllData()}clickAddResto(){this.formValue.reset(),this.showAdd=!0,this.showbtn=!1}addRestaurant(){this.restaurantModelObj.name=this.formValue.value.name,this.restaurantModelObj.email=this.formValue.value.email,this.restaurantModelObj.mobile=this.formValue.value.mobile,this.restaurantModelObj.address=this.formValue.value.address,this.restaurantModelObj.services=this.formValue.value.services,this.restaurantModelObj.nickname=this.formValue.value.nickname,this.restaurantModelObj.password=this.formValue.value.password,this.api.postRestaurant(this.restaurantModelObj).subscribe(t=>{console.log(t),alert("\u05d4\u05de\u05e1\u05e2\u05d3\u05d4 \u05e0\u05d5\u05e1\u05e4\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),document.getElementById("clear")?.click(),this.getAllData()},t=>{alert("\u05d0\u05e0\u05d0 \u05d5\u05d5\u05d3\u05d0 \u05e9\u05d4\u05d6\u05e0\u05ea \u05e4\u05e8\u05d8\u05d9\u05dd \u05e0\u05db\u05d5\u05e0\u05d9\u05dd")})}getAllData(){this.api.getRestaurant().subscribe(t=>{this.allRestaurantData=t})}deleteResto(t){this.api.deleteRestaurant(t.id).subscribe(r=>{alert("\u05d4\u05de\u05e1\u05e2\u05d3\u05d4 \u05d4\u05d5\u05e1\u05e8\u05d4 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),this.getAllData()})}editResto(t){this.showAdd=!1,this.showbtn=!0,this.restaurantModelObj.id=t.id,this.formValue.controls.name.setValue(t.name),this.formValue.controls.email.setValue(t.email),this.formValue.controls.mobile.setValue(t.mobile),this.formValue.controls.address.setValue(t.address),this.formValue.controls.services.setValue(t.service),this.formValue.controls.nickname.setValue(t.nickname),this.formValue.controls.password.setValue(t.password)}updateResto(){this.restaurantModelObj.name=this.formValue.value.name,this.restaurantModelObj.email=this.formValue.value.email,this.restaurantModelObj.mobile=this.formValue.value.mobile,this.restaurantModelObj.address=this.formValue.value.address,this.restaurantModelObj.services=this.formValue.value.services,this.restaurantModelObj.nickname=this.formValue.value.nickname,this.restaurantModelObj.password=this.formValue.value.password,this.api.updateRestaurant(this.restaurantModelObj,this.restaurantModelObj.id).subscribe(t=>{alert("\u05d4\u05e9\u05d9\u05e0\u05d5\u05d9\u05d9\u05dd \u05e0\u05e9\u05de\u05e8\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),document.getElementById("clear")?.click(),this.getAllData()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Qw),d.Y36(yH))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-restaurent-dash"]],decls:76,vars:4,consts:[[1,"navbar","navbar-light","bg-primary"],[1,"container-fluid"],[1,"d-flex"],[1,"p-5","mb-4","bg-light","rounded-3"],[1,"container-fluid","py-5"],[1,"rtl","display-5","fw-bold"],[1,"rtl","fs-4"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary",3,"click"],[1,"table","mt-4"],["scope","col"],[4,"ngFor","ngForOf"],["id","exampleModal","tabindex","-1","role","dialog","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"rtl","modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"close"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","Restaurant Name "],["type","text","formControlName","name",1,"form-control"],["for","InputEmail1"],["type","text","formControlName","email",1,"form-control"],["for","Mobile"],["type","text","formControlName","mobile",1,"form-control"],["for","Address"],["type","text","formControlName","address",1,"form-control"],["for","Service"],["type","text","formControlName","services",1,"form-control"],["for","exampleInputNickname"],["type","Nickname","formControlName","nickname","id","exampleInputNickname",1,"form-control"],["for","exampleInputPassword1"],["type","password","formControlName","password","id","exampleInputPassword1",1,"form-control"],[1,"modal-footer"],["type","button","id","clear","data","","data-bs-dismiss","modal",1,"btn","btn-warning"],["type","button","class","btn btn-primary",3,"click",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-info",3,"click"],[1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0)(1,"div",1),d._UZ(2,"div",2),d.qZA()(),d.TgZ(3,"div",3)(4,"div",4)(5,"h1",5),d._uU(6,"\u05de\u05e2\u05e8\u05db\u05ea \u05e0\u05d9\u05d4\u05d5\u05dc \u05de\u05e1\u05e2\u05d3\u05d5\u05ea"),d.qZA(),d.TgZ(7,"p",6),d._uU(8,"\u05d4\u05d5\u05e1\u05e4\u05ea \u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05d7\u05d3\u05e9 \u05dc\u05de\u05e2\u05e8\u05db\u05ea "),d.qZA(),d.TgZ(9,"button",7),d.NdJ("click",function(){return r.clickAddResto()}),d._uU(10,"\u05d4\u05d5\u05e1\u05e3 \u05de\u05e1\u05e2\u05d3\u05d4"),d.qZA()()(),d.TgZ(11,"table",8)(12,"thead")(13,"tr")(14,"th",9),d._uU(15,"\u05de\u05e1\u05e4\u05e8 \u05de\u05d6\u05d4\u05d4"),d.qZA(),d.TgZ(16,"th",9),d._uU(17,"\u05e9\u05dd \u05d4\u05de\u05e1\u05e2\u05d3\u05d4"),d.qZA(),d.TgZ(18,"th",9),d._uU(19,"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"),d.qZA(),d.TgZ(20,"th",9),d._uU(21,"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df"),d.qZA(),d.TgZ(22,"th",9),d._uU(23,"\u05db\u05ea\u05d5\u05d1\u05ea"),d.qZA(),d.TgZ(24,"th",9),d._uU(25,"\u05e9\u05d9\u05e8\u05d5\u05ea"),d.qZA(),d.TgZ(26,"th",9),d._uU(27,"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),d.qZA(),d.TgZ(28,"th",9),d._uU(29,"\u05e1\u05d9\u05e1\u05de\u05d4"),d.qZA(),d.TgZ(30,"th",9),d._uU(31,"\u05e4\u05e2\u05d5\u05dc\u05d5\u05ea"),d.qZA()()(),d.TgZ(32,"tbody"),d.YNc(33,vH,23,8,"tr",10),d.qZA()(),d.TgZ(34,"div",11)(35,"div",12)(36,"div",13)(37,"div",14)(38,"h5",15),d._uU(39,"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05de\u05e1\u05e2\u05d3\u05d4"),d.qZA(),d._UZ(40,"button",16),d.qZA(),d.TgZ(41,"div",17)(42,"form",18)(43,"div",19)(44,"label",20),d._uU(45," \u05e9\u05dd \u05d4\u05de\u05e1\u05e2\u05d3\u05d4"),d.qZA(),d._UZ(46,"input",21),d.qZA(),d.TgZ(47,"div",19)(48,"label",22),d._uU(49,"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc "),d.qZA(),d._UZ(50,"input",23),d.qZA(),d.TgZ(51,"div",19)(52,"label",24),d._uU(53,"\u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df"),d.qZA(),d._UZ(54,"input",25),d.qZA(),d.TgZ(55,"div",19)(56,"label",26),d._uU(57,"\u05db\u05ea\u05d5\u05d1\u05ea"),d.qZA(),d._UZ(58,"input",27),d.qZA(),d.TgZ(59,"div",19)(60,"label",28),d._uU(61,"\u05e9\u05d9\u05e8\u05d5\u05ea"),d.qZA(),d._UZ(62,"input",29),d.qZA(),d.TgZ(63,"div",19)(64,"label",30),d._uU(65,"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),d.qZA(),d._UZ(66,"input",31),d.qZA(),d.TgZ(67,"div",19)(68,"label",32),d._uU(69,"\u05e1\u05d9\u05e1\u05de\u05d4"),d.qZA(),d._UZ(70,"input",33),d.qZA()()(),d.TgZ(71,"div",34)(72,"button",35),d._uU(73,"\u05d1\u05d8\u05dc"),d.qZA(),d.YNc(74,wH,2,0,"button",36),d.YNc(75,EH,2,0,"button",36),d.qZA()()()()),2&t&&(d.xp6(33),d.Q6J("ngForOf",r.allRestaurantData),d.xp6(9),d.Q6J("formGroup",r.formValue),d.xp6(32),d.Q6J("ngIf",r.showAdd),d.xp6(1),d.Q6J("ngIf",r.showbtn))},dependencies:[xi,Ur,Xa,Qo,Xo,Io,Te,Yu],styles:["h2[_ngcontent-%COMP%]{color:#f0f8ff}p.rtl[_ngcontent-%COMP%], h1.rtl[_ngcontent-%COMP%], h2.rtl[_ngcontent-%COMP%]{direction:rtl}.slider[_ngcontent-%COMP%]{width:100%;height:450%}"]}),n})()},{path:"manager-login",component:KO},{path:"manager-panel",component:hH,canActivate:[(()=>{class n{constructor(t,r){this.userService=t,this.router=r}canActivate(t,r){return!0!==this.userService.isLoggedIn&&this.router.navigate(["manager-login"]),!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(XD),d.LFG(Rr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"monitor",component:pH},{path:"restaurantgusts/:token",component:mH},{path:"restaurantgusts-landing/:restaurant_id/:table_id",component:gH}];let CH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[pI.forRoot(IH),pI]}),n})(),DH=(()=>{class n{constructor(){this.title="RestaurantApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[Hg]}),n})();class wF{constructor(){return(0,tn.vb)("auth")}}class ZR{constructor(e){return e}}const EF="firestore",KR=new d.OlP("angularfire2.firestore-instances");function MH(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ZR(r)}}const RH={provide:class SH{constructor(){return(0,tn.vb)(EF)}},deps:[[new d.FiY,KR]]},NH={provide:ZR,useFactory:function xH(n,e){const t=(0,tn.JM)(EF,n,e);return t&&new ZR(t)},deps:[[new d.FiY,KR],A_]};let PH=(()=>{class n{constructor(){(0,Bp.KN)("angularfire",tn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[NH,RH]}),n})();function OH(n,...e){return{ngModule:PH,providers:[{provide:KR,useFactory:MH(n),multi:!0,deps:[d.R0b,d.zs3,tn.HU,wO,[new d.FiY,wF],[new d.FiY,dw],...e]}]}}const kH=(0,tn.u3)(WL,!0),YR_firebase={apiKey:"AIzaSyAx5cnSv8Xd2fCIVLbCNp4A2JXwDOacOzg",authDomain:"servicio-system.firebaseapp.com",databaseURL:"https://servicio-system-default-rtdb.firebaseio.com",projectId:"servicio-system",storageBucket:"servicio-system.appspot.com",messagingSenderId:"458693307521",appId:"1:458693307521:web:a7eff536812a0b7992f180"};let FH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[DH]}),n.\u0275inj=d.cJS({providers:[KO,iv,XD,Bw,JD],imports:[Pn,CH,Zw,cE,Nr.hO.initializeApp(YR_firebase),XV(()=>eU(YR_firebase)),OH(()=>kH())]}),n})();(0,d.G48)(),Fu().bootstrapModule(FH).catch(n=>console.error(n))},5867:(ft,ke,L)=>{L.d(ke,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=L(9681);(0,d.registerVersion)("firebase","9.9.1","app")},127:(ft,ke,L)=>{L.d(ke,{Z:()=>d.Z});var d=L(3942);d.Z.registerVersion("firebase","9.9.1","app-compat")},5881:(ft,ke,L)=>{L.r(ke);var d=L(5861),j=L(3942),N=L(6457),ae=L(2090),fe=(L(9681),L(1877),L(4859));function he(){return window}function W(){return(W=(0,d.Z)(function*(ee,$,H){var Ee;const{BuildInfo:He}=he();(0,N.aq)($.sessionId,"AuthEvent did not contain a session ID");const gt=yield _e($.sessionId),Re={};return(0,N.ar)()?Re.ibi=He.packageName:(0,N.as)()?Re.apn=He.packageName:(0,N.at)(ee,"operation-not-supported-in-this-environment"),He.displayName&&(Re.appDisplayName=He.displayName),Re.sessionId=gt,(0,N.au)(ee,H,$.type,void 0,null!==(Ee=$.eventId)&&void 0!==Ee?Ee:void 0,Re)})).apply(this,arguments)}function We(){return(We=(0,d.Z)(function*(ee){const{BuildInfo:$}=he(),H={};(0,N.ar)()?H.iosBundleId=$.packageName:(0,N.as)()?H.androidPackageName=$.packageName:(0,N.at)(ee,"operation-not-supported-in-this-environment"),yield(0,N.av)(ee,H)})).apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(ee,$,H){const{cordova:Ee}=he();let He=()=>{};try{yield new Promise((gt,Re)=>{let tt=null;function Et(){var wt;gt();const fr=null===(wt=Ee.plugins.browsertab)||void 0===wt?void 0:wt.close;"function"==typeof fr&&fr(),"function"==typeof H?.close&&H.close()}function cn(){tt||(tt=window.setTimeout(()=>{Re((0,N.aw)(ee,"redirect-cancelled-by-user"))},2e3))}function Ir(){"visible"===document?.visibilityState&&cn()}$.addPassiveListener(Et),document.addEventListener("resume",cn,!1),(0,N.as)()&&document.addEventListener("visibilitychange",Ir,!1),He=()=>{$.removePassiveListener(Et),document.removeEventListener("resume",cn,!1),document.removeEventListener("visibilitychange",Ir,!1),tt&&window.clearTimeout(tt)}})}finally{He()}})).apply(this,arguments)}function _e(ee){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,d.Z)(function*(ee){const $=Ze(ee),H=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(H)).map(He=>He.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(ee){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ee),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ee);const $=new ArrayBuffer(ee.length),H=new Uint8Array($);for(let Ee=0;Ee<ee.length;Ee++)H[Ee]=ee.charCodeAt(Ee);return H}class xe extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(H=>H($)),super.onEvent($)}initialized(){var $=this;return(0,d.Z)(function*(){yield $.initPromise})()}}function ie(ee){return me.apply(this,arguments)}function me(){return(me=(0,d.Z)(function*(ee){const $=yield se()._get(oe(ee));return $&&(yield se()._remove(oe(ee))),$})).apply(this,arguments)}function X(){const ee=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let H=0;H<20;H++){const Ee=Math.floor(Math.random()*$.length);ee.push($.charAt(Ee))}return ee.join("")}function se(){return(0,N.ay)(N.b)}function oe(ee){return(0,N.az)("authEvent",ee.config.apiKey,ee.name)}function Ue(ee){if(!ee?.includes("?"))return{};const[$,...H]=ee.split("?");return(0,ae.zd)(H.join("?"))}function Ye(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function Ut(){var ee;return(null===(ee=self?.location)||void 0===ee?void 0:ee.protocol)||null}function wn(ee=(0,ae.z$)()){return!("file:"!==Ut()&&"ionic:"!==Ut()&&"capacitor:"!==Ut()||!ee.toLowerCase().match(/iphone|ipad|ipod|android/))}function gi(){try{const ee=self.localStorage,$=N.aI();if(ee)return ee.setItem($,"1"),ee.removeItem($),!function is(ee=(0,ae.z$)()){return function kr(){return(0,ae.w1)()&&11===document?.documentMode}()||function Rn(ee=(0,ae.z$)()){return/Edge\/\d+/.test(ee)}(ee)}()||(0,ae.hl)()}catch{return Ai()&&(0,ae.hl)()}return!1}function Ai(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function $n(){return(function Zt(){return"http:"===Ut()||"https:"===Ut()}()||(0,ae.ru)()||wn())&&!function Ti(){return(0,ae.b$)()||(0,ae.UG)()}()&&gi()&&!Ai()}function ji(){return wn()&&typeof document<"u"}function Fr(){return(Fr=(0,d.Z)(function*(){return!!ji()&&new Promise(ee=>{const $=setTimeout(()=>{ee(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),ee(!0)})})})).apply(this,arguments)}const Xt={LOCAL:"local",NONE:"none",SESSION:"session"},ur=N.ax,Lr="persistence";function In(ee){return cr.apply(this,arguments)}function cr(){return(cr=(0,d.Z)(function*(ee){yield ee._initializationPromise;const $=jt(),H=N.az(Lr,ee.config.apiKey,ee.name);$&&$.setItem(H,ee._getPersistence())})).apply(this,arguments)}function jt(){var ee;try{return(null===(ee=function En(){return typeof window<"u"?window:null}())||void 0===ee?void 0:ee.sessionStorage)||null}catch{return null}}const Je=N.ax;class ut{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class Wt{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize($){var H=this;return(0,d.Z)(function*(){const Ee=$._key();let He=H.eventManagers.get(Ee);return He||(He=new xe($),H.eventManagers.set(Ee,He),H.attachCallbackListeners($,He)),He})()}_openPopup($){(0,N.at)($,"operation-not-supported-in-this-environment")}_openRedirect($,H,Ee,He){var gt=this;return(0,d.Z)(function*(){!function ge(ee){var $,H,Ee,He,gt,Re,tt,Et,cn,Ir;const wt=he();(0,N.ax)("function"==typeof(null===($=wt?.universalLinks)||void 0===$?void 0:$.subscribe),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(H=wt?.BuildInfo)||void 0===H?void 0:H.packageName)<"u",ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(gt=null===(He=null===(Ee=wt?.cordova)||void 0===Ee?void 0:Ee.plugins)||void 0===He?void 0:He.browsertab)||void 0===gt?void 0:gt.openUrl),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Et=null===(tt=null===(Re=wt?.cordova)||void 0===Re?void 0:Re.plugins)||void 0===tt?void 0:tt.browsertab)||void 0===Et?void 0:Et.isAvailable),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Ir=null===(cn=wt?.cordova)||void 0===cn?void 0:cn.InAppBrowser)||void 0===Ir?void 0:Ir.open),ee,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Re=yield gt._initialize($);yield Re.initialized(),Re.resetRedirect(),(0,N.aD)(),yield gt._originValidation($);const tt=function De(ee,$,H=null){return{type:$,eventId:H,urlResponse:null,sessionId:X(),postBody:null,tenantId:ee.tenantId,error:(0,N.aw)(ee,"no-auth-event")}}($,Ee,He);yield function Ke(ee,$){return se()._set(oe(ee),$)}($,tt);const Et=yield function q(ee,$,H){return W.apply(this,arguments)}($,tt,H),cn=yield function Pe(ee){const{cordova:$}=he();return new Promise(H=>{$.plugins.browsertab.isAvailable(Ee=>{let He=null;Ee?$.plugins.browsertab.openUrl(ee):He=$.InAppBrowser.open(ee,(0,N.ap)()?"_blank":"_system","location=yes"),H(He)})})}(Et);return function Me(ee,$,H){return Ge.apply(this,arguments)}($,Re,cn)})()}_isIframeWebStorageSupported($,H){throw new Error("Method not implemented.")}_originValidation($){const H=$._key();return this.originValidationPromises[H]||(this.originValidationPromises[H]=function te(ee){return We.apply(this,arguments)}($)),this.originValidationPromises[H]}attachCallbackListeners($,H){const{universalLinks:Ee,handleOpenURL:He,BuildInfo:gt}=he(),Re=setTimeout((0,d.Z)(function*(){yield ie($),H.onEvent(Ye())}),500),tt=function(){var Ir=(0,d.Z)(function*(wt){clearTimeout(Re);const fr=yield ie($);let mn=null;fr&&wt?.url&&(mn=function Ce(ee,$){var H,Ee;const He=function ce(ee){const $=Ue(ee),H=$.link?decodeURIComponent($.link):void 0,Ee=Ue(H).link,He=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return Ue(He).link||He||Ee||H||ee}($);if(He.includes("/__/auth/callback")){const gt=Ue(He),Re=gt.firebaseError?function ve(ee){try{return JSON.parse(ee)}catch{return null}}(decodeURIComponent(gt.firebaseError)):null,tt=null===(Ee=null===(H=Re?.code)||void 0===H?void 0:H.split("auth/"))||void 0===Ee?void 0:Ee[1],Et=tt?(0,N.aw)(tt):null;return Et?{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,error:Et,urlResponse:null,sessionId:null,postBody:null}:{type:ee.type,eventId:ee.eventId,tenantId:ee.tenantId,sessionId:ee.sessionId,urlResponse:He,postBody:null}}return null}(fr,wt.url)),H.onEvent(mn||Ye())});return function(fr){return Ir.apply(this,arguments)}}();typeof Ee<"u"&&"function"==typeof Ee.subscribe&&Ee.subscribe(null,tt);const Et=He,cn=`${gt.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var Ir=(0,d.Z)(function*(wt){if(wt.toLowerCase().startsWith(cn)&&tt({url:wt}),"function"==typeof Et)try{Et(wt)}catch(fr){console.error(fr)}});return function(wt){return Ir.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize($){var H=this;return(0,d.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._initialize($)})()}_openPopup($,H,Ee,He){var gt=this;return(0,d.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openPopup($,H,Ee,He)})()}_openRedirect($,H,Ee,He){var gt=this;return(0,d.Z)(function*(){return yield gt.selectUnderlyingResolver(),gt.assertedUnderlyingResolver._openRedirect($,H,Ee,He)})()}_isIframeWebStorageSupported($,H){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,H)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return ji()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Je(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,d.Z)(function*(){if($.underlyingResolver)return;const H=yield function ht(){return Fr.apply(this,arguments)}();$.underlyingResolver=H?$.cordovaResolver:$.browserResolver})()}}function Si(ee){return ee.unwrap()}function Tt(ee){return Cn(ee)}function Cn(ee){const{_tokenResponse:$}=ee instanceof ae.ZR?ee.customData:ee;if(!$)return null;if(!(ee instanceof ae.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return N.P.credentialFromResult(ee);const H=$.providerId;if(!H||H===N.o.PASSWORD)return null;let Ee;switch(H){case N.o.GOOGLE:Ee=N.Q;break;case N.o.FACEBOOK:Ee=N.N;break;case N.o.GITHUB:Ee=N.T;break;case N.o.TWITTER:Ee=N.W;break;default:const{oauthIdToken:He,oauthAccessToken:gt,oauthTokenSecret:Re,pendingToken:tt,nonce:Et}=$;return gt||Re||He||tt?tt?H.startsWith("saml.")?N.aL._create(H,tt):N.J._fromParams({providerId:H,signInMethod:H,pendingToken:tt,idToken:He,accessToken:gt}):new N.U(H).credential({idToken:He,accessToken:gt,rawNonce:Et}):null}return ee instanceof ae.ZR?Ee.credentialFromError(ee):Ee.credentialFromResult(ee)}function Dn(ee,$){return $.catch(H=>{throw H instanceof ae.ZR&&function Vr(ee,$){var H,Ee;const He=null===(H=$.customData)||void 0===H?void 0:H._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ee=$)||void 0===Ee?void 0:Ee.code))$.resolver=new G(ee,N.an(ee,$));else if(He){const gt=Cn($),Re=$;gt&&(Re.credential=gt,Re.tenantId=He.tenantId||void 0,Re.email=He.email||void 0,Re.phoneNumber=He.phoneNumber||void 0)}}(ee,H),H}).then(H=>{const He=H.user;return{operationType:H.operationType,credential:Tt(H),additionalUserInfo:N.al(H),user:z.getOrCreate(He)}})}function an(ee,$){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(ee,$){const H=yield $;return{verificationId:H.verificationId,confirm:Ee=>Dn(ee,H.confirm(Ee))}})).apply(this,arguments)}class G{constructor($,H){this.resolver=H,this.auth=function dr(ee){return ee.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return Dn(Si(this.auth),this.resolver.resolveSignIn($))}}class z{constructor($){this._delegate=$,this.multiFactor=N.ao($)}static getOrCreate($){return z.USER_MAP.has($)||z.USER_MAP.set($,new z($)),z.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var H=this;return(0,d.Z)(function*(){return Dn(H.auth,N.Z(H._delegate,$))})()}linkWithPhoneNumber($,H){var Ee=this;return(0,d.Z)(function*(){return an(Ee.auth,N.l(Ee._delegate,$,H))})()}linkWithPopup($){var H=this;return(0,d.Z)(function*(){return Dn(H.auth,N.d(H._delegate,$,ut))})()}linkWithRedirect($){var H=this;return(0,d.Z)(function*(){return yield In(N.aE(H.auth)),N.g(H._delegate,$,ut)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var H=this;return(0,d.Z)(function*(){return Dn(H.auth,N._(H._delegate,$))})()}reauthenticateWithPhoneNumber($,H){return an(this.auth,N.r(this._delegate,$,H))}reauthenticateWithPopup($){return Dn(this.auth,N.e(this._delegate,$,ut))}reauthenticateWithRedirect($){var H=this;return(0,d.Z)(function*(){return yield In(N.aE(H.auth)),N.h(H._delegate,$,ut)})()}sendEmailVerification($){return N.ab(this._delegate,$)}unlink($){var H=this;return(0,d.Z)(function*(){return yield N.ak(H._delegate,$),H})()}updateEmail($){return N.ag(this._delegate,$)}updatePassword($){return N.ah(this._delegate,$)}updatePhoneNumber($){return N.u(this._delegate,$)}updateProfile($){return N.af(this._delegate,$)}verifyBeforeUpdateEmail($,H){return N.ac(this._delegate,$,H)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}z.USER_MAP=new WeakMap;const B=N.ax;let Z=(()=>{class ee{constructor(H,Ee){if(this.app=H,Ee.isInitialized())return this._delegate=Ee.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:He}=H.options;B(He,"invalid-api-key",{appName:H.name}),B(He,"invalid-api-key",{appName:H.name});const gt=typeof window<"u"?ut:void 0;this._delegate=Ee.initialize({options:{persistence:Oe(He,H.name),popupRedirectResolver:gt}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?z.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(H){this._delegate.languageCode=H}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(H){this._delegate.tenantId=H}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(H,Ee){N.G(this._delegate,H,Ee)}applyActionCode(H){return N.a2(this._delegate,H)}checkActionCode(H){return N.a3(this._delegate,H)}confirmPasswordReset(H,Ee){return N.a1(this._delegate,H,Ee)}createUserWithEmailAndPassword(H,Ee){var He=this;return(0,d.Z)(function*(){return Dn(He._delegate,N.a5(He._delegate,H,Ee))})()}fetchProvidersForEmail(H){return this.fetchSignInMethodsForEmail(H)}fetchSignInMethodsForEmail(H){return N.aa(this._delegate,H)}isSignInWithEmailLink(H){return N.a8(this._delegate,H)}getRedirectResult(){var H=this;return(0,d.Z)(function*(){B($n(),H._delegate,"operation-not-supported-in-this-environment");const Ee=yield N.j(H._delegate,ut);return Ee?Dn(H._delegate,Promise.resolve(Ee)):{credential:null,user:null}})()}addFrameworkForLogging(H){!function hn(ee,$){(0,N.aE)(ee)._logFramework($)}(this._delegate,H)}onAuthStateChanged(H,Ee,He){const{next:gt,error:Re,complete:tt}=K(H,Ee,He);return this._delegate.onAuthStateChanged(gt,Re,tt)}onIdTokenChanged(H,Ee,He){const{next:gt,error:Re,complete:tt}=K(H,Ee,He);return this._delegate.onIdTokenChanged(gt,Re,tt)}sendSignInLinkToEmail(H,Ee){return N.a7(this._delegate,H,Ee)}sendPasswordResetEmail(H,Ee){return N.a0(this._delegate,H,Ee||void 0)}setPersistence(H){var Ee=this;return(0,d.Z)(function*(){let He;switch(function lr(ee,$){ur(Object.values(Xt).includes($),ee,"invalid-persistence-type"),(0,ae.b$)()?ur($!==Xt.SESSION,ee,"unsupported-persistence-type"):(0,ae.UG)()?ur($===Xt.NONE,ee,"unsupported-persistence-type"):Ai()?ur($===Xt.NONE||$===Xt.LOCAL&&(0,ae.hl)(),ee,"unsupported-persistence-type"):ur($===Xt.NONE||gi(),ee,"unsupported-persistence-type")}(Ee._delegate,H),H){case Xt.SESSION:He=N.a;break;case Xt.LOCAL:He=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case Xt.NONE:He=N.L;break;default:return N.at("argument-error",{appName:Ee._delegate.name})}return Ee._delegate.setPersistence(He)})()}signInAndRetrieveDataWithCredential(H){return this.signInWithCredential(H)}signInAnonymously(){return Dn(this._delegate,N.X(this._delegate))}signInWithCredential(H){return Dn(this._delegate,N.Y(this._delegate,H))}signInWithCustomToken(H){return Dn(this._delegate,N.$(this._delegate,H))}signInWithEmailAndPassword(H,Ee){return Dn(this._delegate,N.a6(this._delegate,H,Ee))}signInWithEmailLink(H,Ee){return Dn(this._delegate,N.a9(this._delegate,H,Ee))}signInWithPhoneNumber(H,Ee){return an(this._delegate,N.s(this._delegate,H,Ee))}signInWithPopup(H){var Ee=this;return(0,d.Z)(function*(){return B($n(),Ee._delegate,"operation-not-supported-in-this-environment"),Dn(Ee._delegate,N.c(Ee._delegate,H,ut))})()}signInWithRedirect(H){var Ee=this;return(0,d.Z)(function*(){return B($n(),Ee._delegate,"operation-not-supported-in-this-environment"),yield In(Ee._delegate),N.f(Ee._delegate,H,ut)})()}updateCurrentUser(H){return this._delegate.updateCurrentUser(H)}verifyPasswordResetCode(H){return N.a4(this._delegate,H)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ee.Persistence=Xt,ee})();function K(ee,$,H){let Ee=ee;"function"!=typeof ee&&({next:Ee,error:$,complete:H}=ee);const He=Ee;return{next:Re=>He(Re&&z.getOrCreate(Re)),error:$,complete:H}}function Oe(ee,$){const H=function ss(ee,$){const H=jt();if(!H)return[];const Ee=N.az(Lr,ee,$);switch(H.getItem(Ee)){case Xt.NONE:return[N.L];case Xt.LOCAL:return[N.i,N.a];case Xt.SESSION:return[N.a];default:return[]}}(ee,$);if(typeof self<"u"&&!H.includes(N.i)&&H.push(N.i),typeof window<"u")for(const Ee of[N.b,N.a])H.includes(Ee)||H.push(Ee);return H.includes(N.L)||H.push(N.L),H}class qe{constructor(){this.providerId="phone",this._delegate=new N.P(Si(j.Z.auth()))}static credential($,H){return N.P.credential($,H)}verifyPhoneNumber($,H){return this._delegate.verifyPhoneNumber($,H)}unwrap(){return this._delegate}}qe.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,qe.PROVIDER_ID=N.P.PROVIDER_ID;const _t=N.ax;class en{constructor($,H,Ee=j.Z.app()){var He;_t(null===(He=Ee.options)||void 0===He?void 0:He.apiKey,"invalid-api-key",{appName:Ee.name}),this._delegate=new N.R($,H,Ee.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hr(ee){ee.INTERNAL.registerComponent(new fe.wA("auth-compat",$=>{const H=$.getProvider("app-compat").getImmediate(),Ee=$.getProvider("auth");return new Z(H,Ee)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:qe,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:en,TwitterAuthProvider:N.W,Auth:Z,AuthCredential:N.H,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ee.registerVersion("@firebase/auth-compat","0.2.18")}(j.Z)},8306:(ft,ke,L)=>{L.d(ke,{y:()=>q});var d=L(930),j=L(727),N=L(8822),ae=L(4671);var fe=L(2416),he=L(576),we=L(2806);let q=(()=>{class Pe{constructor(Ge){Ge&&(this._subscribe=Ge)}lift(Ge){const ge=new Pe;return ge.source=this,ge.operator=Ge,ge}subscribe(Ge,ge,_e){const Qe=function We(Pe){return Pe&&Pe instanceof d.Lv||function te(Pe){return Pe&&(0,he.m)(Pe.next)&&(0,he.m)(Pe.error)&&(0,he.m)(Pe.complete)}(Pe)&&(0,j.Nn)(Pe)}(Ge)?Ge:new d.Hp(Ge,ge,_e);return(0,we.x)(()=>{const{operator:Ze,source:Fe}=this;Qe.add(Ze?Ze.call(Qe,Fe):Fe?this._subscribe(Qe):this._trySubscribe(Qe))}),Qe}_trySubscribe(Ge){try{return this._subscribe(Ge)}catch(ge){Ge.error(ge)}}forEach(Ge,ge){return new(ge=W(ge))((_e,Qe)=>{const Ze=new d.Hp({next:Fe=>{try{Ge(Fe)}catch(xe){Qe(xe),Ze.unsubscribe()}},error:Qe,complete:_e});this.subscribe(Ze)})}_subscribe(Ge){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ge)}[N.L](){return this}pipe(...Ge){return function ye(Pe){return 0===Pe.length?ae.y:1===Pe.length?Pe[0]:function(Ge){return Pe.reduce((ge,_e)=>_e(ge),Ge)}}(Ge)(this)}toPromise(Ge){return new(Ge=W(Ge))((ge,_e)=>{let Qe;this.subscribe(Ze=>Qe=Ze,Ze=>_e(Ze),()=>ge(Qe))})}}return Pe.create=Me=>new Pe(Me),Pe})();function W(Pe){var Me;return null!==(Me=Pe??fe.v.Promise)&&void 0!==Me?Me:Promise}},7579:(ft,ke,L)=>{L.d(ke,{x:()=>fe});var d=L(8306),j=L(727);const ae=(0,L(3888).d)(we=>function(){we(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=L(8737),ye=L(2806);let fe=(()=>{class we extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const te=new he(this,this);return te.operator=W,te}_throwIfClosed(){if(this.closed)throw new ae}next(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const te of this.currentObservers)te.next(W)}})}error(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:te}=this;for(;te.length;)te.shift().error(W)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:te,isStopped:We,observers:Pe}=this;return te||We?j.Lc:(this.currentObservers=null,Pe.push(W),new j.w0(()=>{this.currentObservers=null,(0,le.P)(Pe,W)}))}_checkFinalizedStatuses(W){const{hasError:te,thrownError:We,isStopped:Pe}=this;te?W.error(We):Pe&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return we.create=(q,W)=>new he(q,W),we})();class he extends fe{constructor(q,W){super(),this.destination=q,this.source=W}next(q){var W,te;null===(te=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===te||te.call(W,q)}error(q){var W,te;null===(te=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===te||te.call(W,q)}complete(){var q,W;null===(W=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===W||W.call(q)}_subscribe(q){var W,te;return null!==(te=null===(W=this.source)||void 0===W?void 0:W.subscribe(q))&&void 0!==te?te:j.Lc}}},930:(ft,ke,L)=>{L.d(ke,{Hp:()=>Ge,Lv:()=>te});var d=L(576),j=L(727),N=L(2416),ae=L(7849),le=L(5032);const ye=we("C",void 0,void 0);function we(Fe,xe,De){return{kind:Fe,value:xe,error:De}}var q=L(3410),W=L(2806);class te extends j.w0{constructor(xe){super(),this.isStopped=!1,xe?(this.destination=xe,(0,j.Nn)(xe)&&xe.add(this)):this.destination=Ze}static create(xe,De,Ke){return new Ge(xe,De,Ke)}next(xe){this.isStopped?Qe(function he(Fe){return we("N",Fe,void 0)}(xe),this):this._next(xe)}error(xe){this.isStopped?Qe(function fe(Fe){return we("E",void 0,Fe)}(xe),this):(this.isStopped=!0,this._error(xe))}complete(){this.isStopped?Qe(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(xe){this.destination.next(xe)}_error(xe){try{this.destination.error(xe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Pe(Fe,xe){return We.call(Fe,xe)}class Me{constructor(xe){this.partialObserver=xe}next(xe){const{partialObserver:De}=this;if(De.next)try{De.next(xe)}catch(Ke){ge(Ke)}}error(xe){const{partialObserver:De}=this;if(De.error)try{De.error(xe)}catch(Ke){ge(Ke)}else ge(xe)}complete(){const{partialObserver:xe}=this;if(xe.complete)try{xe.complete()}catch(De){ge(De)}}}class Ge extends te{constructor(xe,De,Ke){let ie;if(super(),(0,d.m)(xe)||!xe)ie={next:xe??void 0,error:De??void 0,complete:Ke??void 0};else{let me;this&&N.v.useDeprecatedNextContext?(me=Object.create(xe),me.unsubscribe=()=>this.unsubscribe(),ie={next:xe.next&&Pe(xe.next,me),error:xe.error&&Pe(xe.error,me),complete:xe.complete&&Pe(xe.complete,me)}):ie=xe}this.destination=new Me(ie)}}function ge(Fe){N.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Fe):(0,ae.h)(Fe)}function Qe(Fe,xe){const{onStoppedNotification:De}=N.v;De&&q.z.setTimeout(()=>De(Fe,xe))}const Ze={closed:!0,next:le.Z,error:function _e(Fe){throw Fe},complete:le.Z}},727:(ft,ke,L)=>{L.d(ke,{Lc:()=>ye,w0:()=>le,Nn:()=>fe});var d=L(576);const N=(0,L(3888).d)(we=>function(W){we(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((te,We)=>`${We+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ae=L(8737);class le{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Pe of W)Pe.remove(this);else W.remove(this);const{initialTeardown:te}=this;if((0,d.m)(te))try{te()}catch(Pe){q=Pe instanceof N?Pe.errors:[Pe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Pe of We)try{he(Pe)}catch(Me){q=q??[],Me instanceof N?q=[...q,...Me.errors]:q.push(Me)}}if(q)throw new N(q)}}add(q){var W;if(q&&q!==this)if(this.closed)he(q);else{if(q instanceof le){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(q)}}_hasParent(q){const{_parentage:W}=this;return W===q||Array.isArray(W)&&W.includes(q)}_addParent(q){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(q),W):W?[W,q]:q}_removeParent(q){const{_parentage:W}=this;W===q?this._parentage=null:Array.isArray(W)&&(0,ae.P)(W,q)}remove(q){const{_finalizers:W}=this;W&&(0,ae.P)(W,q),q instanceof le&&q._removeParent(this)}}le.EMPTY=(()=>{const we=new le;return we.closed=!0,we})();const ye=le.EMPTY;function fe(we){return we instanceof le||we&&"closed"in we&&(0,d.m)(we.remove)&&(0,d.m)(we.add)&&(0,d.m)(we.unsubscribe)}function he(we){(0,d.m)(we)?we():we.unsubscribe()}},2416:(ft,ke,L)=>{L.d(ke,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ft,ke,L)=>{L.d(ke,{E:()=>j});const j=new(L(8306).y)(le=>le.complete())},8996:(ft,ke,L)=>{L.d(ke,{D:()=>xe});var d=L(8421),j=L(5363),N=L(9468),ye=L(8306),he=L(2202),we=L(576),q=L(9672);function te(De,Ke){if(!De)throw new Error("Iterable cannot be null");return new ye.y(ie=>{(0,q.f)(ie,Ke,()=>{const me=De[Symbol.asyncIterator]();(0,q.f)(ie,Ke,()=>{me.next().then(Ce=>{Ce.done?ie.complete():ie.next(Ce.value)})},0,!0)})})}var We=L(3670),Pe=L(8239),Me=L(1144),Ge=L(6495),ge=L(2206),_e=L(4532),Qe=L(3260);function xe(De,Ke){return Ke?function Fe(De,Ke){if(null!=De){if((0,We.c)(De))return function ae(De,Ke){return(0,d.Xf)(De).pipe((0,N.R)(Ke),(0,j.Q)(Ke))}(De,Ke);if((0,Me.z)(De))return function fe(De,Ke){return new ye.y(ie=>{let me=0;return Ke.schedule(function(){me===De.length?ie.complete():(ie.next(De[me++]),ie.closed||this.schedule())})})}(De,Ke);if((0,Pe.t)(De))return function le(De,Ke){return(0,d.Xf)(De).pipe((0,N.R)(Ke),(0,j.Q)(Ke))}(De,Ke);if((0,ge.D)(De))return te(De,Ke);if((0,Ge.T)(De))return function W(De,Ke){return new ye.y(ie=>{let me;return(0,q.f)(ie,Ke,()=>{me=De[he.h](),(0,q.f)(ie,Ke,()=>{let Ce,X;try{({value:Ce,done:X}=me.next())}catch(se){return void ie.error(se)}X?ie.complete():ie.next(Ce)},0,!0)}),()=>(0,we.m)(me?.return)&&me.return()})}(De,Ke);if((0,Qe.L)(De))return function Ze(De,Ke){return te((0,Qe.Q)(De),Ke)}(De,Ke)}throw(0,_e.z)(De)}(De,Ke):(0,d.Xf)(De)}},8421:(ft,ke,L)=>{L.d(ke,{Xf:()=>We});var d=L(655),j=L(1144),N=L(8239),ae=L(8306),le=L(3670),ye=L(2206),fe=L(4532),he=L(6495),we=L(3260),q=L(576),W=L(7849),te=L(8822);function We(Fe){if(Fe instanceof ae.y)return Fe;if(null!=Fe){if((0,le.c)(Fe))return function Pe(Fe){return new ae.y(xe=>{const De=Fe[te.L]();if((0,q.m)(De.subscribe))return De.subscribe(xe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,j.z)(Fe))return function Me(Fe){return new ae.y(xe=>{for(let De=0;De<Fe.length&&!xe.closed;De++)xe.next(Fe[De]);xe.complete()})}(Fe);if((0,N.t)(Fe))return function Ge(Fe){return new ae.y(xe=>{Fe.then(De=>{xe.closed||(xe.next(De),xe.complete())},De=>xe.error(De)).then(null,W.h)})}(Fe);if((0,ye.D)(Fe))return _e(Fe);if((0,he.T)(Fe))return function ge(Fe){return new ae.y(xe=>{for(const De of Fe)if(xe.next(De),xe.closed)return;xe.complete()})}(Fe);if((0,we.L)(Fe))return function Qe(Fe){return _e((0,we.Q)(Fe))}(Fe)}throw(0,fe.z)(Fe)}function _e(Fe){return new ae.y(xe=>{(function Ze(Fe,xe){var De,Ke,ie,me;return(0,d.mG)(this,void 0,void 0,function*(){try{for(De=(0,d.KL)(Fe);!(Ke=yield De.next()).done;)if(xe.next(Ke.value),xe.closed)return}catch(Ce){ie={error:Ce}}finally{try{Ke&&!Ke.done&&(me=De.return)&&(yield me.call(De))}finally{if(ie)throw ie.error}}xe.complete()})})(Fe,xe).catch(De=>xe.error(De))})}},6451:(ft,ke,L)=>{L.d(ke,{T:()=>ye});var d=L(8189),j=L(8421),N=L(515),ae=L(7669),le=L(8996);function ye(...fe){const he=(0,ae.yG)(fe),we=(0,ae._6)(fe,1/0),q=fe;return q.length?1===q.length?(0,j.Xf)(q[0]):(0,d.J)(we)((0,le.D)(q,he)):N.E}},5403:(ft,ke,L)=>{L.d(ke,{x:()=>j});var d=L(930);function j(ae,le,ye,fe,he){return new N(ae,le,ye,fe,he)}class N extends d.Lv{constructor(le,ye,fe,he,we,q){super(le),this.onFinalize=we,this.shouldUnsubscribe=q,this._next=ye?function(W){try{ye(W)}catch(te){le.error(te)}}:super._next,this._error=he?function(W){try{he(W)}catch(te){le.error(te)}finally{this.unsubscribe()}}:super._error,this._complete=fe?function(){try{fe()}catch(W){le.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(ft,ke,L)=>{L.d(ke,{U:()=>N});var d=L(4482),j=L(5403);function N(ae,le){return(0,d.e)((ye,fe)=>{let he=0;ye.subscribe((0,j.x)(fe,we=>{fe.next(ae.call(le,we,he++))}))})}},8189:(ft,ke,L)=>{L.d(ke,{J:()=>N});var d=L(5577),j=L(4671);function N(ae=1/0){return(0,d.z)(j.y,ae)}},5577:(ft,ke,L)=>{L.d(ke,{z:()=>he});var d=L(4004),j=L(8421),N=L(4482),ae=L(9672),le=L(5403),fe=L(576);function he(we,q,W=1/0){return(0,fe.m)(q)?he((te,We)=>(0,d.U)((Pe,Me)=>q(te,Pe,We,Me))((0,j.Xf)(we(te,We))),W):("number"==typeof q&&(W=q),(0,N.e)((te,We)=>function ye(we,q,W,te,We,Pe,Me,Ge){const ge=[];let _e=0,Qe=0,Ze=!1;const Fe=()=>{Ze&&!ge.length&&!_e&&q.complete()},xe=Ke=>_e<te?De(Ke):ge.push(Ke),De=Ke=>{Pe&&q.next(Ke),_e++;let ie=!1;(0,j.Xf)(W(Ke,Qe++)).subscribe((0,le.x)(q,me=>{We?.(me),Pe?xe(me):q.next(me)},()=>{ie=!0},void 0,()=>{if(ie)try{for(_e--;ge.length&&_e<te;){const me=ge.shift();Me?(0,ae.f)(q,Me,()=>De(me)):De(me)}Fe()}catch(me){q.error(me)}}))};return we.subscribe((0,le.x)(q,xe,()=>{Ze=!0,Fe()})),()=>{Ge?.()}}(te,We,we,W)))}},5363:(ft,ke,L)=>{L.d(ke,{Q:()=>ae});var d=L(9672),j=L(4482),N=L(5403);function ae(le,ye=0){return(0,j.e)((fe,he)=>{fe.subscribe((0,N.x)(he,we=>(0,d.f)(he,le,()=>he.next(we),ye),()=>(0,d.f)(he,le,()=>he.complete(),ye),we=>(0,d.f)(he,le,()=>he.error(we),ye)))})}},3099:(ft,ke,L)=>{L.d(ke,{B:()=>le});var d=L(8421),j=L(7579),N=L(930),ae=L(4482);function le(fe={}){const{connector:he=(()=>new j.x),resetOnError:we=!0,resetOnComplete:q=!0,resetOnRefCountZero:W=!0}=fe;return te=>{let We,Pe,Me,Ge=0,ge=!1,_e=!1;const Qe=()=>{Pe?.unsubscribe(),Pe=void 0},Ze=()=>{Qe(),We=Me=void 0,ge=_e=!1},Fe=()=>{const xe=We;Ze(),xe?.unsubscribe()};return(0,ae.e)((xe,De)=>{Ge++,!_e&&!ge&&Qe();const Ke=Me=Me??he();De.add(()=>{Ge--,0===Ge&&!_e&&!ge&&(Pe=ye(Fe,W))}),Ke.subscribe(De),!We&&Ge>0&&(We=new N.Hp({next:ie=>Ke.next(ie),error:ie=>{_e=!0,Qe(),Pe=ye(Ze,we,ie),Ke.error(ie)},complete:()=>{ge=!0,Qe(),Pe=ye(Ze,q),Ke.complete()}}),(0,d.Xf)(xe).subscribe(We))})(te)}}function ye(fe,he,...we){if(!0===he)return void fe();if(!1===he)return;const q=new N.Hp({next:()=>{q.unsubscribe(),fe()}});return he(...we).subscribe(q)}},9468:(ft,ke,L)=>{L.d(ke,{R:()=>j});var d=L(4482);function j(N,ae=0){return(0,d.e)((le,ye)=>{ye.add(N.schedule(()=>le.subscribe(ye),ae))})}},8505:(ft,ke,L)=>{L.d(ke,{b:()=>le});var d=L(576),j=L(4482),N=L(5403),ae=L(4671);function le(ye,fe,he){const we=(0,d.m)(ye)||fe||he?{next:ye,error:fe,complete:he}:ye;return we?(0,j.e)((q,W)=>{var te;null===(te=we.subscribe)||void 0===te||te.call(we);let We=!0;q.subscribe((0,N.x)(W,Pe=>{var Me;null===(Me=we.next)||void 0===Me||Me.call(we,Pe),W.next(Pe)},()=>{var Pe;We=!1,null===(Pe=we.complete)||void 0===Pe||Pe.call(we),W.complete()},Pe=>{var Me;We=!1,null===(Me=we.error)||void 0===Me||Me.call(we,Pe),W.error(Pe)},()=>{var Pe,Me;We&&(null===(Pe=we.unsubscribe)||void 0===Pe||Pe.call(we)),null===(Me=we.finalize)||void 0===Me||Me.call(we)}))}):ae.y}},4408:(ft,ke,L)=>{L.d(ke,{o:()=>le});var d=L(727);class j extends d.w0{constructor(fe,he){super()}schedule(fe,he=0){return this}}const N={setInterval(ye,fe,...he){const{delegate:we}=N;return we?.setInterval?we.setInterval(ye,fe,...he):setInterval(ye,fe,...he)},clearInterval(ye){const{delegate:fe}=N;return(fe?.clearInterval||clearInterval)(ye)},delegate:void 0};var ae=L(8737);class le extends j{constructor(fe,he){super(fe,he),this.scheduler=fe,this.work=he,this.pending=!1}schedule(fe,he=0){if(this.closed)return this;this.state=fe;const we=this.id,q=this.scheduler;return null!=we&&(this.id=this.recycleAsyncId(q,we,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(q,this.id,he),this}requestAsyncId(fe,he,we=0){return N.setInterval(fe.flush.bind(fe,this),we)}recycleAsyncId(fe,he,we=0){if(null!=we&&this.delay===we&&!1===this.pending)return he;N.clearInterval(he)}execute(fe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const we=this._execute(fe,he);if(we)return we;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(fe,he){let q,we=!1;try{this.work(fe)}catch(W){we=!0,q=W||new Error("Scheduled action threw falsy error")}if(we)return this.unsubscribe(),q}unsubscribe(){if(!this.closed){const{id:fe,scheduler:he}=this,{actions:we}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(we,this),null!=fe&&(this.id=this.recycleAsyncId(he,fe,null)),this.delay=null,super.unsubscribe()}}}},7565:(ft,ke,L)=>{L.d(ke,{v:()=>N});var d=L(6063);class j{constructor(le,ye=j.now){this.schedulerActionCtor=le,this.now=ye}schedule(le,ye=0,fe){return new this.schedulerActionCtor(this,le).schedule(fe,ye)}}j.now=d.l.now;class N extends j{constructor(le,ye=j.now){super(le,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(le){const{actions:ye}=this;if(this._active)return void ye.push(le);let fe;this._active=!0;do{if(fe=le.execute(le.state,le.delay))break}while(le=ye.shift());if(this._active=!1,fe){for(;le=ye.shift();)le.unsubscribe();throw fe}}}},4986:(ft,ke,L)=>{L.d(ke,{z:()=>N});var d=L(4408);const N=new(L(7565).v)(d.o)},6063:(ft,ke,L)=>{L.d(ke,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(ft,ke,L)=>{L.d(ke,{z:()=>d});const d={setTimeout(j,N,...ae){const{delegate:le}=d;return le?.setTimeout?le.setTimeout(j,N,...ae):setTimeout(j,N,...ae)},clearTimeout(j){const{delegate:N}=d;return(N?.clearTimeout||clearTimeout)(j)},delegate:void 0}},2202:(ft,ke,L)=>{L.d(ke,{h:()=>j});const j=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ft,ke,L)=>{L.d(ke,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ft,ke,L)=>{L.d(ke,{_6:()=>ye,jO:()=>ae,yG:()=>le});var d=L(576);function N(fe){return fe[fe.length-1]}function ae(fe){return(0,d.m)(N(fe))?fe.pop():void 0}function le(fe){return function j(fe){return fe&&(0,d.m)(fe.schedule)}(N(fe))?fe.pop():void 0}function ye(fe,he){return"number"==typeof N(fe)?fe.pop():he}},8737:(ft,ke,L)=>{function d(j,N){if(j){const ae=j.indexOf(N);0<=ae&&j.splice(ae,1)}}L.d(ke,{P:()=>d})},3888:(ft,ke,L)=>{function d(j){const ae=j(le=>{Error.call(le),le.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(ke,{d:()=>d})},2806:(ft,ke,L)=>{L.d(ke,{O:()=>ae,x:()=>N});var d=L(2416);let j=null;function N(le){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),le(),ye){const{errorThrown:fe,error:he}=j;if(j=null,fe)throw he}}else le()}function ae(le){d.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=le)}},9672:(ft,ke,L)=>{function d(j,N,ae,le=0,ye=!1){const fe=N.schedule(function(){ae(),ye?j.add(this.schedule(null,le)):this.unsubscribe()},le);if(j.add(fe),!ye)return fe}L.d(ke,{f:()=>d})},4671:(ft,ke,L)=>{function d(j){return j}L.d(ke,{y:()=>d})},1144:(ft,ke,L)=>{L.d(ke,{z:()=>d});const d=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2206:(ft,ke,L)=>{L.d(ke,{D:()=>j});var d=L(576);function j(N){return Symbol.asyncIterator&&(0,d.m)(N?.[Symbol.asyncIterator])}},576:(ft,ke,L)=>{function d(j){return"function"==typeof j}L.d(ke,{m:()=>d})},3670:(ft,ke,L)=>{L.d(ke,{c:()=>N});var d=L(8822),j=L(576);function N(ae){return(0,j.m)(ae[d.L])}},6495:(ft,ke,L)=>{L.d(ke,{T:()=>N});var d=L(2202),j=L(576);function N(ae){return(0,j.m)(ae?.[d.h])}},8239:(ft,ke,L)=>{L.d(ke,{t:()=>j});var d=L(576);function j(N){return(0,d.m)(N?.then)}},3260:(ft,ke,L)=>{L.d(ke,{L:()=>ae,Q:()=>N});var d=L(655),j=L(576);function N(le){return(0,d.FC)(this,arguments,function*(){const fe=le.getReader();try{for(;;){const{value:he,done:we}=yield(0,d.qq)(fe.read());if(we)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(he)}}finally{fe.releaseLock()}})}function ae(le){return(0,j.m)(le?.getReader)}},4482:(ft,ke,L)=>{L.d(ke,{A:()=>j,e:()=>N});var d=L(576);function j(ae){return(0,d.m)(ae?.lift)}function N(ae){return le=>{if(j(le))return le.lift(function(ye){try{return ae(ye,this)}catch(fe){this.error(fe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ft,ke,L)=>{function d(){}L.d(ke,{Z:()=>d})},7849:(ft,ke,L)=>{L.d(ke,{h:()=>N});var d=L(2416),j=L(3410);function N(ae){j.z.setTimeout(()=>{const{onUnhandledError:le}=d.v;if(!le)throw ae;le(ae)})}},4532:(ft,ke,L)=>{function d(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ke,{z:()=>d})},655:(ft,ke,L)=>{function ae(X,se){var oe={};for(var ve in X)Object.prototype.hasOwnProperty.call(X,ve)&&se.indexOf(ve)<0&&(oe[ve]=X[ve]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var ce=0;for(ve=Object.getOwnPropertySymbols(X);ce<ve.length;ce++)se.indexOf(ve[ce])<0&&Object.prototype.propertyIsEnumerable.call(X,ve[ce])&&(oe[ve[ce]]=X[ve[ce]])}return oe}function he(X,se,oe,ve){return new(oe||(oe=Promise))(function(Ue,pt){function Wt(hn){try{Ye(ve.next(hn))}catch(jn){pt(jn)}}function Vt(hn){try{Ye(ve.throw(hn))}catch(jn){pt(jn)}}function Ye(hn){hn.done?Ue(hn.value):function ce(Ue){return Ue instanceof oe?Ue:new oe(function(pt){pt(Ue)})}(hn.value).then(Wt,Vt)}Ye((ve=ve.apply(X,se||[])).next())})}function ge(X){return this instanceof ge?(this.v=X,this):new ge(X)}function _e(X,se,oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ce,ve=oe.apply(X,se||[]),Ue=[];return ce={},pt("next"),pt("throw"),pt("return"),ce[Symbol.asyncIterator]=function(){return this},ce;function pt(fn){ve[fn]&&(ce[fn]=function(qt){return new Promise(function(Ut,Zt){Ue.push([fn,qt,Ut,Zt])>1||Wt(fn,qt)})})}function Wt(fn,qt){try{!function Vt(fn){fn.value instanceof ge?Promise.resolve(fn.value.v).then(Ye,hn):jn(Ue[0][2],fn)}(ve[fn](qt))}catch(Ut){jn(Ue[0][3],Ut)}}function Ye(fn){Wt("next",fn)}function hn(fn){Wt("throw",fn)}function jn(fn,qt){fn(qt),Ue.shift(),Ue.length&&Wt(Ue[0][0],Ue[0][1])}}function Ze(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var oe,se=X[Symbol.asyncIterator];return se?se.call(X):(X=function te(X){var se="function"==typeof Symbol&&Symbol.iterator,oe=se&&X[se],ve=0;if(oe)return oe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ve>=X.length&&(X=void 0),{value:X&&X[ve++],done:!X}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),oe={},ve("next"),ve("throw"),ve("return"),oe[Symbol.asyncIterator]=function(){return this},oe);function ve(Ue){oe[Ue]=X[Ue]&&function(pt){return new Promise(function(Wt,Vt){!function ce(Ue,pt,Wt,Vt){Promise.resolve(Vt).then(function(Ye){Ue({value:Ye,done:Wt})},pt)}(Wt,Vt,(pt=X[Ue](pt)).done,pt.value)})}}}L.d(ke,{FC:()=>_e,KL:()=>Ze,_T:()=>ae,mG:()=>he,qq:()=>ge})},4650:(ft,ke,L)=>{L.d(ke,{$8M:()=>Ba,$Z:()=>Cf,AFp:()=>D0,AaK:()=>he,CHM:()=>co,CRH:()=>sh,CZH:()=>Yt,CqO:()=>lv,D6c:()=>xS,EJc:()=>lS,EpF:()=>um,F4k:()=>uv,FYo:()=>pe,FiY:()=>ue,G48:()=>wS,GfV:()=>EC,Gpc:()=>W,JOm:()=>So,KtG:()=>Mu,LFG:()=>An,LSH:()=>cf,Lbi:()=>YC,MAs:()=>ou,MMx:()=>or,NdJ:()=>Vf,OlP:()=>ln,Oqu:()=>Av,PXZ:()=>gS,Q6J:()=>sv,QGY:()=>di,QP$:()=>uh,Qsj:()=>Ve,R0b:()=>pi,RDi:()=>z_,Rgc:()=>rh,SBq:()=>Dt,Sil:()=>Cp,Suo:()=>kC,TTD:()=>us,TgZ:()=>Lf,X6Q:()=>vS,XFs:()=>ht,Xpm:()=>B,Xts:()=>Pg,Y36:()=>kd,YKP:()=>Be,YNc:()=>Ff,Yjl:()=>ee,Yz7:()=>qt,ZZ4:()=>G0,_Bn:()=>yC,_UZ:()=>om,_Vd:()=>Sc,_c5:()=>wD,_uU:()=>Tv,aQg:()=>W0,c2e:()=>QC,cJS:()=>Zt,cg1:()=>uu,dDg:()=>tD,deG:()=>Zh,dqk:()=>Je,eFA:()=>Gc,ekj:()=>ym,eoX:()=>O0,f3M:()=>qs,g9A:()=>Ui,h0i:()=>xc,hGG:()=>SS,hM9:()=>xt,hij:()=>hl,iGM:()=>m0,ifc:()=>jt,ip1:()=>Ar,kL8:()=>zI,kYT:()=>en,lG2:()=>hr,lqb:()=>Od,lri:()=>P0,n5z:()=>zl,oAB:()=>_t,oxw:()=>bI,q4F:()=>IC,qLn:()=>df,qOj:()=>nv,qZA:()=>sm,rWj:()=>ph,sBO:()=>ES,sIi:()=>Pf,s_b:()=>vl,soG:()=>t_,tb:()=>hh,tp0:()=>ze,uIk:()=>tn,vHH:()=>Me,vpe:()=>ei,wAp:()=>It,xp6:()=>EE,z2F:()=>Wc,zSh:()=>Og,zs3:()=>Mo});var d=L(7579),j=L(727),N=L(8306),ae=L(6451),le=L(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function fe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function he(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(he).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function we(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const q=ye({__forward_ref__:ye});function W(s){return s.__forward_ref__=W,s.toString=function(){return he(this())},s}function te(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(q)&&s.__forward_ref__===W}class Me extends Error{constructor(o,u){super(function Ge(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function xe(s,o){throw new Me(-201,!1)}function Vt(s,o){null==s&&function Ye(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function wn(s){return Ti(s,gi)||Ti(s,$n)}function Ti(s,o){return s.hasOwnProperty(o)?s[o]:null}function is(s){return s&&(s.hasOwnProperty(Ai)||s.hasOwnProperty(ji))?s[Ai]:null}const gi=ye({\u0275prov:ye}),Ai=ye({\u0275inj:ye}),$n=ye({ngInjectableDef:ye}),ji=ye({ngInjectorDef:ye});var ht=(()=>((ht=ht||{})[ht.Default=0]="Default",ht[ht.Host=1]="Host",ht[ht.Self=2]="Self",ht[ht.SkipSelf=4]="SkipSelf",ht[ht.Optional=8]="Optional",ht))();let Fr;function Xt(s){const o=Fr;return Fr=s,o}function ur(s,o,u){const c=wn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ht.Optional?null:void 0!==o?o:void xe(he(s))}function lr(s){return{toString:s}.toString()}var In=(()=>((In=In||{})[In.OnPush=0]="OnPush",In[In.Default=1]="Default",In))(),jt=(()=>{return(s=jt||(jt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",jt;var s})();const Je=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),dr={},Tt=[],Vr=ye({\u0275cmp:ye}),Cn=ye({\u0275dir:ye}),Dn=ye({\u0275pipe:ye}),an=ye({\u0275mod:ye}),tr=ye({\u0275fac:ye}),G=ye({__NG_ELEMENT_ID__:ye});let z=0;function B(s){return lr(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===In.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Tt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||jt.Emulated,id:"c"+z++,styles:s.styles||Tt,_:null,setInput:null,schemas:s.schemas||null,tView:null},p=s.dependencies,y=s.features;return h.inputs=Kt(s.inputs,c),h.outputs=Kt(s.outputs),y&&y.forEach(E=>E(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(K).filter(Oe):null,h.pipeDefs=p?()=>("function"==typeof p?p():p).map(Ee).filter(Oe):null,h})}function K(s){return $(s)||H(s)}function Oe(s){return null!==s}const qe={};function _t(s){return lr(()=>{const o={type:s.type,bootstrap:s.bootstrap||Tt,declarations:s.declarations||Tt,imports:s.imports||Tt,exports:s.exports||Tt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(qe[s.id]=s.type),o})}function en(s,o){return lr(()=>{const u=He(s,!0);u.declarations=o.declarations||Tt,u.imports=o.imports||Tt,u.exports=o.exports||Tt})}function Kt(s,o){if(null==s)return dr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],p=h;Array.isArray(h)&&(p=h[1],h=h[0]),u[h]=c,o&&(o[h]=p)}return u}const hr=B;function ee(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function $(s){return s[Vr]||null}function H(s){return s[Cn]||null}function Ee(s){return s[Dn]||null}function He(s,o){const u=s[an]||null;if(!u&&!0===o)throw new Error(`Type ${he(s)} does not have '\u0275mod' property.`);return u}function Ur(s){return Array.isArray(s)&&"object"==typeof s[1]}function Br(s){return Array.isArray(s)&&!0===s[1]}function Pl(s){return 0!=(8&s.flags)}function oo(s){return 2==(2&s.flags)}function Ta(s){return 1==(1&s.flags)}function mi(s){return null!==s.template}function Cu(s){return 0!=(256&s[2])}function Mi(s,o){return s.hasOwnProperty(tr)?s[tr]:null}class as{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function us(){return ao}function ao(s){return s.type.prototype.ngOnChanges&&(s.setInput=rd),Vh}function Vh(){const s=Tu(this),o=s?.current;if(o){const u=s.previous;if(u===dr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function rd(s,o,u,c){const h=Tu(s)||function Bo(s,o){return s[bu]=o}(s,{previous:dr,current:null}),p=h.current||(h.current={}),y=h.previous,E=this.declaredInputs[u],C=y[E];p[E]=new as(C&&C.currentValue,o,y===dr),s[c]=o}us.ngInherit=!0;const bu="__ngSimpleChanges__";function Tu(s){return s[bu]||null}function Nn(s){for(;Array.isArray(s);)s=s[0];return s}function xa(s,o){return Nn(o[s])}function gr(s,o){return Nn(o[s.index])}function uo(s,o){return s.data[o]}function sr(s,o){const u=o[s];return Ur(u)?u:u[0]}function $o(s){return 4==(4&s[2])}function Bs(s){return 64==(64&s[2])}function Ri(s,o){return null==o?null:s[o]}function cs(s){s[18]=0}function Ho(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const at={lFrame:ld(null),bindingsEnabled:!0};function ds(){return at.bindingsEnabled}function Se(){return at.lFrame.lView}function Bt(){return at.lFrame.tView}function co(s){return at.lFrame.contextLView=s,s[8]}function Mu(s){return at.lFrame.contextLView=null,s}function bn(){let s=Ru();for(;null!==s&&64===s.type;)s=s.parent;return s}function Ru(){return at.lFrame.currentTNode}function Wi(s,o){const u=at.lFrame;u.currentTNode=s,u.isParent=o}function ho(){return at.lFrame.isParent}function ps(){return at.lFrame.bindingIndex++}function Pu(s,o){const u=at.lFrame;u.bindingIndex=u.bindingRootIndex=s,Ou(o)}function Ou(s){at.lFrame.currentDirectiveIndex=s}function ud(){return at.lFrame.currentQueryIndex}function po(s){at.lFrame.currentQueryIndex=s}function jh(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function $s(s,o,u){if(u&ht.SkipSelf){let h=o,p=s;for(;!(h=h.parent,null!==h||u&ht.Host||(h=jh(p),null===h||(p=p[15],10&h.type))););if(null===h)return!1;o=h,s=p}const c=at.lFrame=Pa();return c.currentTNode=o,c.lView=s,!0}function jl(s){const o=Pa(),u=s[1];at.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Pa(){const s=at.lFrame,o=null===s?null:s.child;return null===o?ld(s):o}function ld(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function zo(){const s=at.lFrame;return at.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const cd=zo;function ku(){const s=zo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Dr(){return at.lFrame.selectedIndex}function Zr(s){at.lFrame.selectedIndex=s}function Pn(){const s=at.lFrame;return uo(s.tView,s.selectedIndex)}function fd(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:C,ngAfterViewChecked:A,ngOnDestroy:R}=p;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),C&&(s.viewHooks||(s.viewHooks=[])).push(-u,C),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Hh(s,o,u){go(s,o,3,u)}function Vu(s,o,u,c){(3&s[2])===u&&go(s,o,u,c)}function pd(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function go(s,o,u,c){const p=c??-1,y=o.length-1;let E=0;for(let C=void 0!==c?65535&s[18]:0;C<y;C++)if("number"==typeof o[C+1]){if(E=o[C],null!=c&&E>=c)break}else o[C]<0&&(s[18]+=65536),(E<p||-1==p)&&($l(s,u,o,C),s[18]=(4294901760&s[18])+C+2),C++}function $l(s,o,u,c){const h=u[c]<0,p=u[c+1],E=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class ms{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Fa(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const p=u[c++],y=u[c++],E=u[c++];s.setAttribute(o,y,E,p)}else{const p=h,y=u[++c];La(p)?s.setProperty(o,p,y):s.setAttribute(o,p,y),c++}}return c}function Uu(s){return 3===s||4===s||6===s}function La(s){return 64===s.charCodeAt(0)}function Hl(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Wh(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Wh(s,o,u,c,h){let p=0,y=s.length;if(-1===o)y=-1;else for(;p<s.length;){const E=s[p++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=p-1;break}}}for(;p<s.length;){const E=s[p];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==h&&(s[p+1]=h));if(c===s[p+1])return void(s[p+2]=h)}p++,null!==c&&p++,null!==h&&p++}-1!==y&&(s.splice(y,0,o),p=y+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==h&&s.splice(p++,0,h)}function zh(s){return-1!==s}function Bu(s){return 32767&s}function ju(s,o){let u=function ii(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let $u=!0;function Gl(s){const o=$u;return $u=s,o}let un=0;const zi={};function qo(s,o){const u=Hu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,_o(c.data,s),_o(o,null),_o(c.blueprint,null));const h=Gu(s,o),p=s.injectorIndex;if(zh(h)){const y=Bu(h),E=ju(h,o),C=E[1].data;for(let A=0;A<8;A++)o[p+A]=E[y+A]|C[y+A]}return o[p+8]=h,p}function _o(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Hu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Gu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=Qo(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function _s(s,o,u){!function Ua(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(G)&&(c=u[G]),null==c&&(c=u[G]=un++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function Fn(s,o,u){if(u&ht.Optional)return s;xe()}function dt(s,o,u,c){if(u&ht.Optional&&void 0===c&&(c=null),0==(u&(ht.Self|ht.Host))){const h=s[9],p=Xt(void 0);try{return h?h.get(o,c,u&ht.Optional):ur(o,c,u&ht.Optional)}finally{Xt(p)}}return Fn(c,0,u)}function Zo(s,o,u,c=ht.Default,h){if(null!==s){if(1024&o[2]){const y=function Wu(s,o,u,c,h){let p=s,y=o;for(;null!==p&&null!==y&&1024&y[2]&&!(256&y[2]);){const E=yo(p,y,u,c|ht.Self,zi);if(E!==zi)return E;let C=p.parent;if(!C){const A=y[21];if(A){const R=A.get(u,zi,c);if(R!==zi)return R}C=Qo(y),y=y[15]}p=C}return h}(s,o,u,c,zi);if(y!==zi)return y}const p=yo(s,o,u,c,zi);if(p!==zi)return p}return dt(o,u,c,h)}function yo(s,o,u,c,h){const p=function Yo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(G)?s[G]:void 0;return"number"==typeof o?o>=0?255&o:Wl:o}(u);if("function"==typeof p){if(!$s(o,s,c))return c&ht.Host?Fn(h,0,c):dt(o,u,c,h);try{const y=p(c);if(null!=y||c&ht.Optional)return y;xe()}finally{cd()}}else if("number"==typeof p){let y=null,E=Hu(s,o),C=-1,A=c&ht.Host?o[16][6]:null;for((-1===E||c&ht.SkipSelf)&&(C=-1===E?Gu(s,o):o[E+8],-1!==C&&jr(c,!1)?(y=o[1],E=Bu(C),o=ju(C,o)):E=-1);-1!==E;){const R=o[1];if(Gs(p,E,R.data)){const F=yd(E,o,u,y,c,A);if(F!==zi)return F}C=o[E+8],-1!==C&&jr(c,o[1].data[E+8]===A)&&Gs(p,E,o)?(y=R,E=Bu(C),o=ju(C,o)):E=-1}}return h}function yd(s,o,u,c,h,p){const y=o[1],E=y.data[s+8],R=vs(E,y,u,null==c?oo(E)&&$u:c!=y&&0!=(3&E.type),h&ht.Host&&p===E);return null!==R?Ko(o,y,R,E):zi}function vs(s,o,u,c,h){const p=s.providerIndexes,y=o.data,E=1048575&p,C=s.directiveStart,R=p>>20,Y=h?E+R:s.directiveEnd;for(let re=c?E:E+R;re<Y;re++){const Ae=y[re];if(re<C&&u===Ae||re>=C&&Ae.type===u)return re}if(h){const re=y[C];if(re&&mi(re)&&re.type===u)return C}return null}function Ko(s,o,u,c){let h=s[u];const p=o.data;if(function Hs(s){return s instanceof ms}(h)){const y=h;y.resolving&&function Qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Me(-200,`Circular dependency in DI detected for ${s}${u}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}(p[u]));const E=Gl(y.canSeeViewProviders);y.resolving=!0;const C=y.injectImpl?Xt(y.injectImpl):null;$s(s,c,ht.Default);try{h=s[u]=y.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function og(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:p}=o.type.prototype;if(c){const y=ao(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==C&&Xt(C),Gl(E),y.resolving=!1,cd()}}return h}function Gs(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function jr(s,o){return!(s&ht.Self||s&ht.Host&&o)}class ws{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return Zo(this._tNode,this._lView,o,c,u)}}function Wl(){return new ws(bn(),Se())}function zl(s){return lr(()=>{const o=s.prototype.constructor,u=o[tr]||vd(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const p=h[tr]||vd(h);if(p&&p!==u)return p;h=Object.getPrototypeOf(h)}return p=>new p})}function vd(s){return We(s)?()=>{const o=vd(te(s));return o&&o()}:Mi(s)}function Qo(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function Ba(s){return function ys(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const p=u[h];if(Uu(p))break;if(0===p)h+=2;else if("number"==typeof p)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(p===o)return u[h+1];h+=2}}}return null}(bn(),s)}const br="__parameters__";function Jo(s,o,u){return lr(()=>{const c=function vo(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...p){if(this instanceof h)return c.apply(this,p),this;const y=new h(...p);return E.annotation=y,E;function E(C,A,R){const F=C.hasOwnProperty(br)?C[br]:Object.defineProperty(C,br,{value:[]})[br];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),C}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class ln{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=qt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Zh=new ln("AnalyzeForEntryComponents");function xr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),xr(c,o)):o!==s&&o.push(c)}return o}function _i(s,o){s.forEach(u=>Array.isArray(u)?_i(u,o):o(u))}function Ql(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function wo(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function $r(s,o,u){let c=Ha(s,o);return c>=0?s[1|c]=u:(c=~c,function Jl(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Xl(s,o){const u=Ha(s,o);if(u>=0)return s[1|u]}function Ha(s,o){return function Io(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const p=c+(h-c>>1),y=s[p<<u];if(o===y)return p<<u;y>o?h=p:c=p+1}return~(h<<u)}(s,o,1)}const zs={},Co="__NG_DI_FLAG__",qu="ngTempTokenPath",Zu=/\n/gm,Id="__source";let yi;function ta(s){const o=yi;return yi=s,o}function Za(s,o=ht.Default){if(void 0===yi)throw new Me(-203,!1);return null===yi?ur(s,void 0,o):yi.get(s,o&ht.Optional?null:void 0,o)}function An(s,o=ht.Default){return(function En(){return Fr}()||Za)(te(s),o)}function qs(s,o=ht.Default){return An(s,o)}function Ka(s){const o=[];for(let u=0;u<s.length;u++){const c=te(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Me(900,!1);let h,p=ht.Default;for(let y=0;y<c.length;y++){const E=c[y],C=T(E);"number"==typeof C?-1===C?h=E.token:p|=C:h=E}o.push(An(h,p))}else o.push(An(c))}return o}function D(s,o){return s[Co]=o,s.prototype[Co]=o,s}function T(s){return s[Co]}const ue=D(Jo("Optional"),8),ze=D(Jo("SkipSelf"),4);let rc;function z_(s){rc=s}class rf{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Is(s){return s instanceof rf?s.changingThisBreaksApplicationSecurity:s}const x=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ne=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Tr=(()=>((Tr=Tr||{})[Tr.NONE=0]="NONE",Tr[Tr.HTML=1]="HTML",Tr[Tr.STYLE=2]="STYLE",Tr[Tr.SCRIPT=3]="SCRIPT",Tr[Tr.URL=4]="URL",Tr[Tr.RESOURCE_URL=5]="RESOURCE_URL",Tr))();function cf(s){const o=function Sd(){const s=Se();return s&&s[12]}();return o?o.sanitize(Tr.URL,s)||"":function Xa(s,o){const u=function wg(s){return s instanceof rf&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Is(s):function Te(s){return(s=String(s)).match(x)||s.match(ne)?s:"unsafe:"+s}(ge(s))}function qw(s){return s.ngOriginalError}class df{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&qw(o);for(;u&&qw(u);)u=qw(u);return u||null}}const Jw=new Map;let nN=0;const Ys="__ngContext__";function wi(s,o){Ur(o)?(s[Ys]=o[20],function ki(s){Jw.set(s[20],s)}(o)):s[Ys]=o}function hf(s){const o=s[Ys];return"number"==typeof o?function bg(s){return Jw.get(s)||null}(o):o||null}function ry(s){const o=hf(s);return o?Ur(o)?o:o.lView:null}const rE=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Je))();function Ao(s){return s instanceof Function?s():s}var So=(()=>((So=So||{})[So.Important=1]="Important",So[So.DashCase=2]="DashCase",So))();function sE(s,o){return undefined(s,o)}function Sg(s){const o=s[3];return Br(o)?o[3]:o}function oE(s){return uE(s[13])}function aE(s){return uE(s[4])}function uE(s){for(;null!==s&&!Br(s);)s=s[4];return s}function sc(s,o,u,c,h){if(null!=c){let p,y=!1;Br(c)?p=c:Ur(c)&&(y=!0,c=c[0]);const E=Nn(c);0===s&&null!==u?null==h?Nd(o,u,E):el(o,u,E,h||null,!0):1===s&&null!==u?el(o,u,E,h||null,!0):2===s?function rl(s,o,u){const c=Rg(s,o);c&&function mf(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=p&&function fy(s,o,u,c,h){const p=u[7];p!==Nn(u)&&sc(o,s,c,p,h);for(let E=10;E<u.length;E++){const C=u[E];oc(C[1],C,s,o,c,p)}}(o,s,p,u,h)}}function sy(s,o,u){return s.createElement(o,u)}function iT(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Ho(h,-1)),u.splice(c,1)}function dE(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&iT(h,c),o>0&&(s[u-1][4]=c[4]);const p=wo(s,10+o);!function oy(s,o){oc(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=p[19];null!==y&&y.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function sa(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&oc(s,o,u,3,null,null),function uN(s){let o=s[13];if(!o)return Cs(s[1],s);for(;o;){let u=null;if(Ur(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Ur(o)&&Cs(o[1],o),o=o[3];null===o&&(o=s),Ur(o)&&Cs(o[1],o),u=o&&o[4]}o=u}}(o)}}function Cs(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function sT(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof ms)){const p=u[c+1];if(Array.isArray(p))for(let y=0;y<p.length;y+=2){const E=h[p[y]],C=p[y+1];try{C.call(E)}finally{}}else try{p.call(h)}finally{}}}}(s,o),function Rd(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const y=u[p+1],E="function"==typeof y?y(o):Nn(o[y]),C=c[h=u[p+2]],A=u[p+3];"boolean"==typeof A?E.removeEventListener(u[p],C,A):A>=0?c[h=A]():c[h=-A].unsubscribe(),p+=2}else{const y=c[h=u[p+1]];u[p].call(y)}if(null!==c){for(let p=h+1;p<c.length;p++)(0,c[p])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&Br(o[3])){u!==o[3]&&iT(u,o);const c=o[19];null!==c&&c.detachView(s)}!function xd(s){Jw.delete(s[20])}(o)}}function ay(s,o,u){return function hE(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===jt.None||h===jt.Emulated)return null}return gr(c,u)}(s,o.parent,u)}function el(s,o,u,c,h){s.insertBefore(o,u,c,h)}function Nd(s,o,u){s.appendChild(o,u)}function fE(s,o,u,c,h){null!==c?el(s,o,u,c,h):Nd(s,o,u)}function Rg(s,o){return s.parentNode(o)}let cy=function tl(s,o,u){return 40&s.type?gr(s,u):null};function Hr(s,o,u,c){const h=ay(s,c,o),p=o[11],E=function ly(s,o,u){return cy(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let C=0;C<u.length;C++)fE(p,h,u[C],E,!1);else fE(p,h,u,E,!1)}function nl(s,o){if(null!==o){const u=o.type;if(3&u)return gr(o,s);if(4&u)return hy(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return nl(s,c);{const h=s[o.index];return Br(h)?hy(-1,h):Nn(h)}}if(32&u)return sE(o,s)()||Nn(s[o.index]);{const c=yf(s,o);return null!==c?Array.isArray(c)?c[0]:nl(Sg(s[16]),c):nl(s,o.next)}}return null}function yf(s,o){return null!==o?s[16][6].projection[o.projection]:null}function hy(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return nl(c,h)}return o[7]}function eu(s,o,u,c,h,p,y){for(;null!=u;){const E=c[u.index],C=u.type;if(y&&0===o&&(E&&wi(Nn(E),c),u.flags|=4),64!=(64&u.flags))if(8&C)eu(s,o,u.child,c,h,p,!1),sc(o,s,h,E,p);else if(32&C){const A=sE(u,c);let R;for(;R=A();)sc(o,s,h,R,p);sc(o,s,h,E,p)}else 16&C?gE(s,o,c,u,h,p):sc(o,s,h,E,p);u=y?u.projectionNext:u.next}}function oc(s,o,u,c,h,p){eu(u,c,s.firstChild,o,h,p,!1)}function gE(s,o,u,c,h,p){const y=u[16],C=y[6].projection[c.projection];if(Array.isArray(C))for(let A=0;A<C.length;A++)sc(o,s,h,C[A],p);else eu(s,o,C,y[3],h,p,!0)}function tu(s,o,u){s.setAttribute(o,"style",u)}function Kr(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function mE(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const p=o.length;if(h+p===c||s.charCodeAt(h+p)<=32)return h}u=h+1}}const oa="ng-template";function py(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==mE(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function il(s){return 4===s.type&&s.value!==oa}function Ng(s,o,u){return o===(4!==s.type||u?s.value:oa)}function yE(s,o,u){let c=4;const h=s.attrs||[],p=function lT(s){for(let o=0;o<s.length;o++)if(Uu(s[o]))return o;return s.length}(h);let y=!1;for(let E=0;E<o.length;E++){const C=o[E];if("number"!=typeof C){if(!y)if(4&c){if(c=2|1&c,""!==C&&!Ng(s,C,u)||""===C&&1===o.length){if(xo(c))return!1;y=!0}}else{const A=8&c?C:o[++E];if(8&c&&null!==s.attrs){if(!py(s.attrs,A,u)){if(xo(c))return!1;y=!0}continue}const F=aT(8&c?"class":C,h,il(s),u);if(-1===F){if(xo(c))return!1;y=!0;continue}if(""!==A){let Y;Y=F>p?"":h[F+1].toLowerCase();const re=8&c?Y:null;if(re&&-1!==mE(re,A,0)||2&c&&A!==Y){if(xo(c))return!1;y=!0}}}}else{if(!y&&!xo(c)&&!xo(C))return!1;if(y&&xo(C))continue;y=!1,c=C|1&c}}return xo(c)||y}function xo(s){return 0==(1&s)}function aT(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let p=!1;for(;h<o.length;){const y=o[h];if(y===s)return h;if(3===y||6===y)p=!0;else{if(1===y||2===y){let E=o[++h];for(;"string"==typeof E;)E=o[++h];continue}if(4===y)break;if(0===y){h+=4;continue}}h+=p?1:2}return-1}return function cT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function vE(s,o,u=!1){for(let c=0;c<o.length;c++)if(yE(s,o[c],u))return!0;return!1}function wE(s,o){return s?":not("+o.trim()+")":o}function hT(s){let o=s[0],u=1,c=2,h="",p=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];h+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?h+="."+y:4&c&&(h+=" "+y);else""!==h&&!xo(y)&&(o+=wE(p,h),h=""),c=y,p=p||!xo(c);u++}return""!==h&&(o+=wE(p,h)),o}const Ot={};function EE(s){Ht(Bt(),Se(),Dr()+s,!1)}function Ht(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Hh(o,p,u)}else{const p=s.preOrderHooks;null!==p&&Vu(o,p,0,u)}Zr(u)}const Pg=new ln("ENVIRONMENT_INITIALIZER"),yy=new ln("INJECTOR_DEF_TYPES");function DE(...s){return{\u0275providers:_T(0,s)}}function _T(s,...o){const u=[],c=new Set;let h;return _i(o,p=>{const y=p;aa(y,u,[],c)&&(h||(h=[]),h.push(y))}),void 0!==h&&Yr(h,u),u}function Yr(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];_i(h,p=>{o.push(p)})}}function aa(s,o,u,c){if(!(s=te(s)))return!1;let h=null,p=is(s);const y=!p&&$(s);if(p||y){if(y&&!y.standalone)return!1;h=s}else{const C=s.ngModule;if(p=is(C),!p)return!1;h=C}const E=c.has(h);if(y){if(E)return!1;if(c.add(h),y.dependencies){const C="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const A of C)aa(A,o,u,c)}}else{if(!p)return!1;{if(null!=p.imports&&!E){let A;c.add(h);try{_i(p.imports,R=>{aa(R,o,u,c)&&(A||(A=[]),A.push(R))})}finally{}void 0!==A&&Yr(A,o)}if(!E){const A=Mi(h)||(()=>new h);o.push({provide:h,useFactory:A,deps:Tt},{provide:yy,useValue:h,multi:!0},{provide:Pg,useValue:()=>An(h),multi:!0})}const C=p.providers;null==C||E||_i(C,R=>{o.push(R)})}}return h!==s&&void 0!==s.providers}const yT=ye({provide:String,useValue:ye});function vy(s){return null!==s&&"object"==typeof s&&yT in s}function ac(s){return"function"==typeof s}const Iy=new ln("INJECTOR",-1);class Cy{get(o,u=zs){if(u===zs){const c=new Error(`NullInjectorError: No provider for ${he(o)}!`);throw c.name="NullInjectorError",c}return u}}const Og=new ln("Set Injector scope."),uc={},lc={};let zt;function cc(){return void 0===zt&&(zt=new Cy),zt}class Od{}class sl extends Od{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wf(o,y=>this.processProvider(y)),this.records.set(Iy,ru(void 0,this)),h.has("environment")&&this.records.set(Od,ru(void 0,this));const p=this.records.get(Og);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(yy.multi,Tt,ht.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}get(o,u=zs,c=ht.Default){this.assertNotDestroyed();const h=ta(this),p=Xt(void 0);try{if(!(c&ht.SkipSelf)){let E=this.records.get(o);if(void 0===E){const C=function kg(s){return"function"==typeof s||"object"==typeof s&&s instanceof ln}(o)&&wn(o);E=C&&this.injectableDefInScope(C)?ru(Dy(o),uc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&ht.Self?cc():this.parent).get(o,u=c&ht.Optional&&u===zs?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[qu]=y[qu]||[]).unshift(he(o)),h)throw y;return function M(s,o,u,c){const h=s[qu];throw o[Id]&&h.unshift(o[Id]),s.message=function V(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=he(o);if(Array.isArray(o))h=o.map(he).join(" -> ");else if("object"==typeof o){let p=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];p.push(y+":"+("string"==typeof E?JSON.stringify(E):he(E)))}h=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Zu,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[qu]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Xt(p),ta(h)}}resolveInjectorInitializers(){const o=ta(this),u=Xt(void 0);try{const c=this.get(Pg.multi,Tt,ht.Self);for(const h of c)h()}finally{ta(o),Xt(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(he(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Me(205,!1)}processProvider(o){let u=ac(o=te(o))?o:te(o&&o.provide);const c=function SE(s){return vy(s)?ru(void 0,s.useValue):ru(xE(s),uc)}(o);if(ac(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=ru(void 0,uc,!0),h.factory=()=>Ka(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===uc&&(u.value=lc,u.value=u.factory()),"object"==typeof u.value&&u.value&&function ME(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=te(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function Dy(s){const o=wn(s),u=null!==o?o.factory:Mi(s);if(null!==u)return u;if(s instanceof ln)throw new Me(204,!1);if(s instanceof Function)return function AE(s){const o=s.length;if(o>0)throw function qi(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Me(204,!1);const u=function kr(s){const o=s&&(s[gi]||s[$n]);if(o){const u=function Rn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Me(204,!1)}function xE(s,o,u){let c;if(ac(s)){const h=te(s);return Mi(h)||Dy(h)}if(vy(s))c=()=>te(s.useValue);else if(function Ey(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Ka(s.deps||[]));else if(function wy(s){return!(!s||!s.useExisting)}(s))c=()=>An(te(s.useExisting));else{const h=te(s&&(s.useClass||s.provide));if(!function vf(s){return!!s.deps}(s))return Mi(h)||Dy(h);c=()=>new h(...Ka(s.deps))}return c}function ru(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function vT(s){return!!s.\u0275providers}function wf(s,o){for(const u of s)Array.isArray(u)?wf(u,o):vT(u)?wf(u.\u0275providers,o):o(u)}function Ef(s,o=null,u=null,c){const h=by(s,o,u,c);return h.resolveInjectorInitializers(),h}function by(s,o=null,u=null,c,h=new Set){const p=[u||Tt,DE(s)];return c=c||("object"==typeof s?void 0:he(s)),new sl(p,o||cc(),c||null,h)}let Mo=(()=>{class s{static create(u,c){if(Array.isArray(u))return Ef({name:""},c,u,"");{const h=u.name??"";return Ef({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=zs,s.NULL=new Cy,s.\u0275prov=qt({token:s,providedIn:"any",factory:()=>An(Iy)}),s.__NG_ELEMENT_ID__=-1,s})();function kd(s,o=ht.Default){const u=Se();return null===u?An(s,o):Zo(bn(),u,te(s),o)}function Cf(){throw new Error("invalid")}function al(s,o){return s<<17|o<<2}function Ki(s){return s>>17&32767}function Oy(s){return 2|s}function ua(s){return(131068&s)>>2}function Gg(s,o){return-131069&s|o<<2}function $E(s){return 1|s}function xf(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],p=u[c+1];if(-1!==p){const y=s.data[p];po(h),y.contentQueries(2,o[p],p)}}}function fc(s,o,u,c,h,p,y,E,C,A,R){const F=o.blueprint.slice();return F[0]=h,F[2]=76|c,(null!==R||s&&1024&s[2])&&(F[2]|=1024),cs(F),F[3]=F[15]=s,F[8]=u,F[10]=y||s&&s[10],F[11]=E||s&&s[11],F[12]=C||s&&s[12]||null,F[9]=A||s&&s[9]||null,F[6]=p,F[20]=function At(){return nN++}(),F[21]=R,F[16]=2==o.type?s[16]:F,F}function la(s,o,u,c,h){let p=s.data[o];if(null===p)p=function $y(s,o,u,c,h){const p=Ru(),y=ho(),C=s.data[o]=function jT(s,o,u,c,h,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?p:p&&p.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=C),null!==p&&(y?null==p.child&&null!==C.parent&&(p.child=C):null===p.next&&(p.next=C)),C}(s,o,u,c,h),function ad(){return at.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=h;const y=function hs(){const s=at.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===y?-1:y.injectorIndex}return Wi(p,!0),p}function Ud(s,o,u,c){if(0===u)return-1;const h=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function ll(s,o,u){jl(o);try{const c=s.viewQuery;null!==c&&tm(1,c,u);const h=s.template;null!==h&&JE(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xf(s,o),s.staticViewQueries&&tm(2,s.viewQuery,u);const p=s.components;null!==p&&function UT(s,o){for(let u=0;u<o.length;u++)JT(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ku()}}function Mf(s,o,u,c){const h=o[2];if(128!=(128&h)){jl(o);try{cs(o),function Ul(s){return at.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&JE(s,o,u,2,c);const y=3==(3&h);if(y){const A=s.preOrderCheckHooks;null!==A&&Hh(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Vu(o,A,0,null),pd(o,0)}if(function YT(s){for(let o=oE(s);null!==o;o=aE(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],p=h[3];0==(512&h[2])&&Ho(p,1),h[2]|=512}}}(o),function dI(s){for(let o=oE(s);null!==o;o=aE(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Bs(c)&&Mf(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&xf(s,o),y){const A=s.contentCheckHooks;null!==A&&Hh(o,A)}else{const A=s.contentHooks;null!==A&&Vu(o,A,1),pd(o,1)}!function QE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)Zr(~h);else{const p=h,y=u[++c],E=u[++c];Pu(y,p),E(2,o[p])}}}finally{Zr(-1)}}(s,o);const E=s.components;null!==E&&function VT(s,o){for(let u=0;u<o.length;u++)QT(s,o[u])}(o,E);const C=s.viewQuery;if(null!==C&&tm(2,C,c),y){const A=s.viewCheckHooks;null!==A&&Hh(o,A)}else{const A=s.viewHooks;null!==A&&Vu(o,A,2),pd(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Ho(o[3],-1))}finally{ku()}}}function BT(s,o,u,c){const h=o[10],y=$o(o);try{!y&&h.begin&&h.begin(),y&&ll(s,o,c),Mf(s,o,u,c)}finally{!y&&h.end&&h.end()}}function JE(s,o,u,c,h){const p=Dr(),y=2&c;try{Zr(-1),y&&o.length>22&&Ht(s,o,22,!1),u(c,h)}finally{Zr(p)}}function Hy(s,o,u){!ds()||(function Zy(s,o,u,c){const h=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||qo(u,o),wi(c,o);const y=u.initialInputs;for(let E=h;E<p;E++){const C=s.data[E],A=mi(C);A&&KT(o,u,C);const R=Ko(o,s,E,u);wi(R,o),null!==y&&Ky(0,E-h,R,C,0,y),A&&(sr(u.index,o)[8]=R)}}(s,o,u,gr(u,o)),128==(128&u.flags)&&function zT(s,o,u){const c=u.directiveStart,h=u.directiveEnd,p=u.index,y=function Bl(){return at.lFrame.currentDirectiveIndex}();try{Zr(p);for(let E=c;E<h;E++){const C=s.data[E],A=o[E];Ou(E),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&oI(C,A)}}finally{Zr(-1),Ou(y)}}(s,o,u))}function Gy(s,o,u=gr){const c=o.localNames;if(null!==c){let h=o.index+1;for(let p=0;p<c.length;p+=2){const y=c[p+1],E=-1===y?u(o,s):s[y];s[h++]=E}}}function eI(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Wy(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Wy(s,o,u,c,h,p,y,E,C,A){const R=22+c,F=R+h,Y=function zy(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ot);return u}(R,F),re="function"==typeof A?A():A;return Y[1]={type:s,blueprint:Y,template:u,queries:null,viewQuery:E,declTNode:o,data:Y.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:C,consts:re,incompleteFirstPass:!1}}function nI(s,o,u,c){const h=ev(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&tv(s).push(c,h.length-1))}function rI(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function Kg(s,o,u,c){let h=!1;if(ds()){const p=function qT(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let p=0;p<c.length;p++){const y=c[p];vE(u,y.selectors,!1)&&(h||(h=[]),_s(qo(u,o),s,y.type),mi(y)?(aI(s,u),h.unshift(y)):h.push(y))}return h}(s,o,u),y=null===c?null:{"":-1};if(null!==p){h=!0,Yg(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const F=p[R];F.providersResolver&&F.providersResolver(F)}let E=!1,C=!1,A=Ud(s,o,p.length,null);for(let R=0;R<p.length;R++){const F=p[R];u.mergedAttrs=Hl(u.mergedAttrs,F.hostAttrs),lI(s,u,o,A,F),uI(A,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const Y=F.type.prototype;!E&&(Y.ngOnChanges||Y.ngOnInit||Y.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!C&&(Y.ngOnChanges||Y.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),C=!0),A++}!function $T(s,o){const c=o.directiveEnd,h=s.data,p=o.attrs,y=[];let E=null,C=null;for(let A=o.directiveStart;A<c;A++){const R=h[A],F=R.inputs,Y=null===p||il(o)?null:Yy(F,p);y.push(Y),E=rI(F,A,E),C=rI(R.outputs,A,C)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=C}(s,u)}y&&function ZT(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const p=u[o[h+1]];if(null==p)throw new Me(-301,!1);c.push(o[h],p)}}}(u,c,y)}return u.mergedAttrs=Hl(u.mergedAttrs,u.attrs),h}function qy(s,o,u,c,h,p){const y=p.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const C=~o.index;(function WT(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=C&&E.push(C),E.push(c,h,y)}}function oI(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function aI(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function uI(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;mi(o)&&(u[""]=s)}}function Yg(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function lI(s,o,u,c,h){s.data[c]=h;const p=h.factory||(h.factory=Mi(h.type)),y=new ms(p,mi(h),kd);s.blueprint[c]=y,u[c]=y,qy(s,o,0,c,Ud(s,u,h.hostVars,Ot),h)}function KT(s,o,u){const c=gr(o,s),h=eI(u),p=s[10],y=Jg(s,fc(s,h,null,u.onPush?32:16,c,o,p,p.createRenderer(c,u),null,null,null));s[o.index]=y}function ca(s,o,u,c,h,p){const y=gr(s,o);!function Qg(s,o,u,c,h,p,y){if(null==p)s.removeAttribute(o,h,u);else{const E=null==y?ge(p):y(p,c||"",h);s.setAttribute(o,h,E,u)}}(o[11],y,p,s.value,u,c,h)}function Ky(s,o,u,c,h,p){const y=p[o];if(null!==y){const E=c.setInput;for(let C=0;C<y.length;){const A=y[C++],R=y[C++],F=y[C++];null!==E?c.setInput(u,F,A,R):u[R]=F}}}function Yy(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function cI(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function QT(s,o){const u=sr(o,s);if(Bs(u)){const c=u[1];48&u[2]?Mf(c,u,c.template,u[8]):u[5]>0&&Qy(u)}}function Qy(s){for(let c=oE(s);null!==c;c=aE(c))for(let h=10;h<c.length;h++){const p=c[h];if(512&p[2]){const y=p[1];Mf(y,p,y.template,p[8])}else p[5]>0&&Qy(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=sr(u[c],s);Bs(h)&&h[5]>0&&Qy(h)}}function JT(s,o){const u=sr(o,s),c=u[1];(function Rr(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),ll(c,u,u[8])}function Jg(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Xg(s){for(;s;){s[2]|=32;const o=Sg(s);if(Cu(s)&&!o)return s;s=o}return null}function hI(s){!function em(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=ry(u);if(null!==c){const h=c[1];BT(h,c,h.template,u)}}}(s[8])}function tm(s,o,u){po(0),o(s,u)}const bN=(()=>Promise.resolve(null))();function ev(s){return s[7]||(s[7]=[])}function tv(s){return s.cleanup||(s.cleanup=[])}function da(s,o){const u=s[9],c=u?u.get(df,null):null;c&&c.handleError(o)}function eA(s,o,u,c,h){for(let p=0;p<u.length;){const y=u[p++],E=u[p++],C=o[y],A=s.data[y];null!==A.setInput?A.setInput(C,h,c,E):C[E]=h}}function Rf(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,p=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?p=E:1==p?h=we(h,E):2==p&&(c=we(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function iA(){const s=bn();fd(Se()[1],s)}function nv(s){let o=function gI(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(mi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Me(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const y=s;y.inputs=rv(s.inputs),y.declaredInputs=rv(s.declaredInputs),y.outputs=rv(s.outputs);const E=h.hostBindings;E&&aA(s,E);const C=h.viewQuery,A=h.contentQueries;if(C&&sA(s,C),A&&oA(s,A),fe(s.inputs,h.inputs),fe(s.declaredInputs,h.declaredInputs),fe(s.outputs,h.outputs),mi(h)&&h.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(h.data.animation)}}const p=h.features;if(p)for(let y=0;y<p.length;y++){const E=p[y];E&&E.ngInherit&&E(s),E===nv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function mI(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=Hl(h.hostAttrs,u=Hl(u,h.hostAttrs))}}(c)}function rv(s){return s===dr?{}:s===Tt?[]:s}function sA(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function oA(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,p)=>{o(c,h,p),u(c,h,p)}:o}function aA(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let Nf=null;function pc(){if(!Nf){const s=Je.Symbol;if(s&&s.iterator)Nf=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Nf=c)}}}return Nf}function Pf(s){return!!vI(s)&&(Array.isArray(s)||!(s instanceof Map)&&pc()in s)}function vI(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Sn(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function tn(s,o,u,c){const h=Se();return Sn(h,ps(),o)&&(Bt(),ca(Pn(),h,s,o,u,c)),tn}function Ff(s,o,u,c,h,p,y,E){const C=Se(),A=Bt(),R=s+22,F=A.firstCreatePass?function li(s,o,u,c,h,p,y,E,C){const A=o.consts,R=la(o,s,4,y||null,Ri(A,E));Kg(o,u,R,Ri(A,C)),fd(o,R);const F=R.tViews=Wy(2,R,c,h,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,A,C,o,u,c,h,p,y):A.data[R];Wi(F,!1);const Y=C[11].createComment("");Hr(A,C,Y,F),wi(Y,C),Jg(C,C[R]=cI(Y,C,Y,F)),Ta(F)&&Hy(A,C,F),null!=y&&Gy(C,F,E)}function ou(s){return function Us(s,o){return s[o]}(function od(){return at.lFrame.contextLView}(),22+s)}function sv(s,o,u){const c=Se();return Sn(c,ps(),o)&&function Qi(s,o,u,c,h,p,y,E){const C=gr(o,u);let R,A=o.inputs;!E&&null!=A&&(R=A[c])?(eA(s,u,R,c,h),oo(o)&&function IN(s,o){const u=sr(o,s);16&u[2]||(u[2]|=32)}(u,o.index)):3&o.type&&(c=function HT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=y?y(h,o.value||"",c):h,p.setProperty(C,c,h))}(Bt(),Pn(),c,s,o,c[11],u,!1),sv}function ov(s,o,u,c,h){const y=h?"class":"style";eA(s,u,o.inputs[y],y,c)}function Lf(s,o,u,c){const h=Se(),p=Bt(),y=22+s,E=h[11],C=h[y]=sy(E,o,function Lu(){return at.lFrame.currentNamespace}()),A=p.firstCreatePass?function II(s,o,u,c,h,p,y){const E=o.consts,A=la(o,s,2,h,Ri(E,p));return Kg(o,u,A,Ri(E,y)),null!==A.attrs&&Rf(A,A.attrs,!1),null!==A.mergedAttrs&&Rf(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,p,h,0,o,u,c):p.data[y];Wi(A,!0);const R=A.mergedAttrs;null!==R&&Fa(E,C,R);const F=A.classes;null!==F&&Kr(E,C,F);const Y=A.styles;return null!==Y&&tu(E,C,Y),64!=(64&A.flags)&&Hr(p,h,C,A),0===function sd(){return at.lFrame.elementDepthCount}()&&wi(C,h),function Ma(){at.lFrame.elementDepthCount++}(),Ta(A)&&(Hy(p,h,A),function XE(s,o,u){if(Pl(o)){const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const y=s.data[p];y.contentQueries&&y.contentQueries(1,u[p],p)}}}(p,A,h)),null!==c&&Gy(h,A),Lf}function sm(){let s=bn();ho()?function Na(){at.lFrame.isParent=!1}():(s=s.parent,Wi(s,!1));const o=s;!function Ra(){at.lFrame.elementDepthCount--}();const u=Bt();return u.firstCreatePass&&(fd(u,s),Pl(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function md(s){return 0!=(16&s.flags)}(o)&&ov(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ag(s){return 0!=(32&s.flags)}(o)&&ov(u,o,Se(),o.stylesWithoutHost,!1),sm}function om(s,o,u,c){return Lf(s,o,u,c),sm(),om}function um(){return Se()}function di(s){return!!s&&"function"==typeof s.then}function uv(s){return!!s&&"function"==typeof s.subscribe}const lv=uv;function Vf(s,o,u,c){const h=Se(),p=Bt(),y=bn();return function dv(s,o,u,c,h,p,y,E){const C=Ta(c),R=s.firstCreatePass&&tv(s),F=o[8],Y=ev(o);let re=!0;if(3&c.type||E){const et=gr(c,o),st=E?E(et):et,bt=Y.length,Le=E?rn=>E(Nn(rn[c.index])):c.index;let vt=null;if(!E&&C&&(vt=function CI(s,o,u,c){const h=s.cleanup;if(null!=h)for(let p=0;p<h.length-1;p+=2){const y=h[p];if(y===u&&h[p+1]===c){const E=o[7],C=h[p+2];return E.length>C?E[C]:null}"string"==typeof y&&(p+=2)}return null}(s,o,h,c.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=p,vt.__ngLastListenerFn__=p,re=!1;else{p=DI(c,o,F,p,!1);const rn=u.listen(st,h,p);Y.push(p,rn),R&&R.push(h,Le,bt,bt+1)}}else p=DI(c,o,F,p,!1);const Ae=c.outputs;let je;if(re&&null!==Ae&&(je=Ae[h])){const et=je.length;if(et)for(let st=0;st<et;st+=2){const Bn=o[je[st]][je[st+1]].subscribe(p),xs=Y.length;Y.push(p,Bn),R&&R.push(h,c.index,xs,-(xs+1))}}}(p,h,h[11],y,s,o,0,c),Vf}function lm(s,o,u,c){try{return!1!==u(c)}catch(h){return da(s,h),!1}}function DI(s,o,u,c,h){return function p(y){if(y===Function)return c;Xg(2&s.flags?sr(s.index,o):o);let C=lm(o,0,c,y),A=p.__ngNextListenerFn__;for(;A;)C=lm(o,0,A,y)&&C,A=A.__ngNextListenerFn__;return h&&!1===C&&(y.preventDefault(),y.returnValue=!1),C}}function bI(s=1){return function Fu(s){return(at.lFrame.contextLView=function Oa(s,o){for(;s>0;)o=o[15],s--;return o}(s,at.lFrame.contextLView))[8]}(s)}function hi(s,o,u,c,h){const p=s[u+1],y=null===o;let E=c?Ki(p):ua(p),C=!1;for(;0!==E&&(!1===C||y);){const R=s[E+1];Bf(s[E],o)&&(C=!0,s[E+1]=c?$E(R):Oy(R)),E=c?Ki(R):ua(R)}C&&(s[u+1]=c?Oy(p):$E(p))}function Bf(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Ha(s,o)>=0}function ym(s,o){return function xn(s,o,u,c){const h=Se(),p=Bt(),y=function gs(s){const o=at.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function vm(s,o,u,c){const h=s.data;if(null===h[u+1]){const p=h[Dr()],y=function $f(s,o){return o>=s.expandoStartIndex}(s,u);(function wm(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!y&&(o=!1),o=function EA(s,o,u,c){const h=function js(s){const o=at.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=_c(u=Ev(null,s,o,u,c),o.attrs,c),p=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==h)if(u=Ev(h,s,o,u,c),null===p){let C=function IA(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ua(c))return s[Ki(c)]}(s,o,c);void 0!==C&&Array.isArray(C)&&(C=Ev(null,s,o,C[1],c),C=_c(C,o.attrs,c),function MI(s,o,u,c){s[Ki(u?o.classBindings:o.styleBindings)]=c}(s,o,c,C))}else p=function CA(s,o,u){let c;const h=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<h;p++)c=_c(c,s[p].hostAttrs,u);return _c(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(h,p,o,c),function gA(s,o,u,c,h,p){let y=p?o.classBindings:o.styleBindings,E=Ki(y),C=ua(y);s[c]=u;let R,A=!1;if(Array.isArray(u)){const F=u;R=F[1],(null===R||Ha(F,R)>0)&&(A=!0)}else R=u;if(h)if(0!==C){const Y=Ki(s[E+1]);s[c+1]=al(Y,E),0!==Y&&(s[Y+1]=Gg(s[Y+1],c)),s[E+1]=function AT(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=al(E,0),0!==E&&(s[E+1]=Gg(s[E+1],c)),E=c;else s[c+1]=al(C,0),0===E?E=c:s[C+1]=Gg(s[C+1],c),C=c;A&&(s[c+1]=Oy(s[c+1])),hi(s,R,c,!0),hi(s,R,c,!1),function mA(s,o,u,c,h){const p=h?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Ha(p,o)>=0&&(u[c+1]=$E(u[c+1]))}(o,R,s,c,p),y=al(E,C),p?o.classBindings=y:o.styleBindings=y}(h,p,o,u,y,c)}}(p,s,y,c),o!==Ot&&Sn(h,y,o)&&function Dv(s,o,u,c,h,p,y,E){if(!(3&o.type))return;const C=s.data,A=C[E+1];yc(function ST(s){return 1==(1&s)}(A)?NI(C,o,u,h,ua(A),y):void 0)||(yc(p)||function Hg(s){return 2==(2&s)}(A)&&(p=NI(C,null,u,h,E,y)),function oT(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let p=-1===c.indexOf("-")?void 0:So.DashCase;null==h?s.removeStyle(u,c,p):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),p|=So.Important),s.setStyle(u,c,h,p))}}(c,y,xa(Dr(),u),h,p))}(p,p.data[Dr()],h,h[11],s,h[y+1]=function bv(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=he(Is(s)))),s}(o,u),c,y)}(s,o,null,!0),ym}function Ev(s,o,u,c,h){let p=null;const y=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<y&&(p=o[E],c=_c(c,p.hostAttrs,h),p!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function _c(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let p=0;p<o.length;p++){const y=o[p];"number"==typeof y?h=y:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),$r(s,y,!!u||o[++p]))}return void 0===s?null:s}function NI(s,o,u,c,h,p){const y=null===o;let E;for(;h>0;){const C=s[h],A=Array.isArray(C),R=A?C[1]:C,F=null===R;let Y=u[h+1];Y===Ot&&(Y=F?Tt:void 0);let re=F?Xl(Y,c):R===c?Y:void 0;if(A&&!yc(re)&&(re=Xl(C,c)),yc(re)&&(E=re,y))return E;const Ae=s[h+1];h=y?Ki(Ae):ua(Ae)}if(null!==o){let C=p?o.residualClasses:o.residualStyles;null!=C&&(E=Xl(C,c))}return E}function yc(s){return void 0!==s}function Tv(s,o=""){const u=Se(),c=Bt(),h=s+22,p=c.firstCreatePass?la(c,h,1,o,null):c.data[h],y=u[h]=function gf(s,o){return s.createText(o)}(u[11],o);Hr(c,u,y,p),Wi(p,!1)}function Av(s){return hl("",s,""),Av}function hl(s,o,u){const c=Se(),h=function gc(s,o,u,c){return Sn(s,ps(),u)?o+ge(u)+c:Ot}(c,s,o,u);return h!==Ot&&function No(s,o,u){const c=xa(o,s);!function xg(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,Dr(),h),hl}const Ec=void 0;var GI=["en",[["a","p"],["AM","PM"],Ec],[["AM","PM"],Ec,Ec],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ec,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ec,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ec,"{1} 'at' {0}",Ec],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kf(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let au={};function uu(s){const o=function Ic(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Am(o);if(u)return u;const c=o.split("-")[0];if(u=Am(c),u)return u;if("en"===c)return GI;throw new Me(701,!1)}function zI(s){return uu(s)[It.PluralCase]}function Am(s){return s in au||(au[s]=Je.ng&&Je.ng.common&&Je.ng.common.locales&&Je.ng.common.locales[s]),au[s]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const Xs="en-US";let qn=Xs;function Qv(s,o,u,c,h){if(s=te(s),Array.isArray(s))for(let p=0;p<s.length;p++)Qv(s[p],o,u,c,h);else{const p=Bt(),y=Se();let E=ac(s)?s:te(s.provide),C=xE(s);const A=bn(),R=1048575&A.providerIndexes,F=A.directiveStart,Y=A.providerIndexes>>20;if(ac(s)||!s.multi){const re=new ms(C,h,kd),Ae=Xv(E,o,h?R:R+Y,F);-1===Ae?(_s(qo(A,y),p,E),Jv(p,s,o.length),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(re),y.push(re)):(u[Ae]=re,y[Ae]=re)}else{const re=Xv(E,o,R+Y,F),Ae=Xv(E,o,R,R+Y),je=re>=0&&u[re],et=Ae>=0&&u[Ae];if(h&&!et||!h&&!je){_s(qo(A,y),p,E);const st=function Um(s,o,u,c,h){const p=new ms(s,u,kd);return p.multi=[],p.index=o,p.componentProviders=0,Vm(p,h,c&&!u),p}(h?_C:BA,u.length,h,c,C);!h&&et&&(u[Ae].providerFactory=st),Jv(p,s,o.length,0),o.push(E),A.directiveStart++,A.directiveEnd++,h&&(A.providerIndexes+=1048576),u.push(st),y.push(st)}else Jv(p,s,re>-1?re:Ae,Vm(u[h?Ae:re],C,!h&&c));!h&&c&&et&&u[Ae].componentProviders++}}}function Jv(s,o,u,c){const h=ac(o),p=function TE(s){return!!s.useClass}(o);if(h||p){const C=(p?te(o.useClass):o).prototype.ngOnDestroy;if(C){const A=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const R=A.indexOf(u);-1===R?A.push(u,[c,C]):A[R+1].push(c,C)}else A.push(u,C)}}}function Vm(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Xv(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function BA(s,o,u,c){return e0(this.multi,[])}function _C(s,o,u,c){const h=this.multi;let p;if(this.providerFactory){const y=this.providerFactory.componentProviders,E=Ko(u,u[1],this.providerFactory.index,c);p=E.slice(0,y),e0(h,p);for(let C=y;C<E.length;C++)p.push(E[C])}else p=[],e0(h,p);return p}function e0(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function yC(s,o=[]){return u=>{u.providersResolver=(c,h)=>function Qd(s,o,u){const c=Bt();if(c.firstCreatePass){const h=mi(s);Qv(u,c.data,c.blueprint,h,!0),Qv(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class pl{resolveComponentFactory(o){throw function vC(s){const o=Error(`No component factory found for ${he(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Sc=(()=>{class s{}return s.NULL=new pl,s})();class xc{}class Be{}class Jd{}function t0(){return it(bn(),Se())}function it(s,o){return new Dt(gr(s,o))}let Dt=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=t0,s})();function jA(s){return s instanceof Dt?s.nativeElement:s}class pe{}let Ve=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Qr(){const s=Se(),u=sr(bn().index,s);return(Ur(u)?u:s)[11]}(),s})(),wC=(()=>{class s{}return s.\u0275prov=qt({token:s,providedIn:"root",factory:()=>null}),s})();class EC{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const IC=new EC("14.0.6"),n0={};function Bm(s,o,u,c,h=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(Nn(p)),Br(p))for(let E=10;E<p.length;E++){const C=p[E],A=C[1].firstChild;null!==A&&Bm(C[1],C,A,c)}const y=u.type;if(8&y)Bm(s,o,u.child,c);else if(32&y){const E=sE(u,o);let C;for(;C=E();)c.push(C)}else if(16&y){const E=yf(o,u);if(Array.isArray(E))c.push(...E);else{const C=Sg(o[16]);Bm(C[1],C,E,c,!0)}}u=h?u.projectionNext:u.next}return c}class ap{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Bm(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Br(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(dE(o,c),wo(u,c))}this._attachedToViewContainer=!1}sa(this._lView[1],this._lView)}onDestroy(o){nI(this._lView[1],this._lView,null,o)}markForCheck(){Xg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Xy(s,o,u){const c=o[10];c.begin&&c.begin();try{Mf(s,o,s.template,u)}catch(h){throw da(o,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function aN(s,o){oc(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Me(902,!1);this._appRef=o}}class CC extends ap{constructor(o){super(o),this._view=o}detectChanges(){hI(this._view)}checkNoChanges(){}get context(){return null}}class r0 extends Sc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=$(o);return new Ft(u,this.ngModule)}}function $A(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class DC{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,n0,c);return h!==n0||u===n0?h:this.parentInjector.get(o,u,c)}}class Ft extends Jd{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function fT(s){return s.map(hT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return $A(this.componentDef.inputs)}get outputs(){return $A(this.componentDef.outputs)}create(o,u,c,h){let p=(h=h||this.ngModule)instanceof Od?h:h?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const y=p?new DC(o,p):o,E=y.get(pe,null);if(null===E)throw new Me(407,!1);const C=y.get(wC,null),A=E.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function tI(s,o,u){return s.selectRootElement(o,u===jt.ShadowDom)}(A,c,this.componentDef.encapsulation):sy(E.createRenderer(null,this.componentDef),R,function HA(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),Y=this.componentDef.onPush?288:272,re=function pI(s,o){return{components:[],scheduler:s||rE,clean:bN,playerHandler:o||null,flags:0}}(),Ae=Wy(0,null,null,1,0,null,null,null,null,null),je=fc(null,Ae,re,Y,null,null,E,A,C,y,null);let et,st;jl(je);try{const bt=function nA(s,o,u,c,h,p){const y=u[1];u[22]=s;const C=la(y,22,2,"#host",null),A=C.mergedAttrs=o.hostAttrs;null!==A&&(Rf(C,A,!0),null!==s&&(Fa(h,s,A),null!==C.classes&&Kr(h,s,C.classes),null!==C.styles&&tu(h,s,C.styles)));const R=c.createRenderer(s,o),F=fc(u,eI(o),null,o.onPush?32:16,u[22],C,c,R,p||null,null,null);return y.firstCreatePass&&(_s(qo(C,u),y,o.type),aI(y,C),Yg(C,u.length,1)),Jg(u,F),u[22]=F}(F,this.componentDef,je,E,A);if(F)if(c)Fa(A,F,["ng-version",IC.full]);else{const{attrs:Le,classes:vt}=function pT(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===h?""!==p&&o.push(p,s[++c]):8===h&&u.push(p);else{if(!xo(h))break;h=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Le&&Fa(A,F,Le),vt&&vt.length>0&&Kr(A,F,vt.join(" "))}if(st=uo(Ae,22),void 0!==u){const Le=st.projection=[];for(let vt=0;vt<this.ngContentSelectors.length;vt++){const rn=u[vt];Le.push(null!=rn?Array.from(rn):null)}}et=function rA(s,o,u,c,h){const p=u[1],y=function sI(s,o,u){const c=bn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),lI(s,c,o,Ud(s,o,1,null),u));const h=Ko(o,s,c.directiveStart,c);wi(h,o);const p=gr(c,o);return p&&wi(p,o),h}(p,u,o);if(c.components.push(y),s[8]=y,null!==h)for(const C of h)C(y,o);if(o.contentQueries){const C=bn();o.contentQueries(1,y,C.directiveStart)}const E=bn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zr(E.index),qy(u[1],E,0,E.directiveStart,E.directiveEnd,o),oI(o,y)),y}(bt,this.componentDef,je,re,[iA]),ll(Ae,je,null)}finally{ku()}return new Qn(this.componentType,et,it(st,je),je,st)}}class Qn extends class Pr{}{constructor(o,u,c,h,p){super(),this.location=c,this._rootLView=h,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new CC(h),this.componentType=o}get injector(){return new ws(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function xt(s,o){return new eh(s,o??null)}class eh extends xc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new r0(this);const c=He(o);this._bootstrapComponents=Ao(c.bootstrap),this._r3Injector=by(o,u,[{provide:xc,useValue:this},{provide:Sc,useValue:this.componentFactoryResolver}],he(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(o)}get(o,u=Mo.THROW_IF_NOT_FOUND,c=ht.Default){return o===Mo||o===xc||o===Iy?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class nn extends Be{constructor(o){super(),this.moduleType=o}create(o){return new eh(this.moduleType,o)}}class WA extends xc{constructor(o,u,c){super(),this.componentFactoryResolver=new r0(this),this.instance=null;const h=new sl([...o,{provide:xc,useValue:this},{provide:Sc,useValue:this.componentFactoryResolver}],u||cc(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function or(s,o=null,u=null){return new WA(s,o,u).injector}function d0(s){return o=>{setTimeout(s,void 0,o)}}const ei=class hp extends d.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,p=u||(()=>null),y=c;if(o&&"object"==typeof o){const C=o;h=C.next?.bind(C),p=C.error?.bind(C),y=C.complete?.bind(C)}this.__isAsync&&(p=d0(p),h&&(h=d0(h)),y&&(y=d0(y)));const E=super.subscribe({next:h,error:p,complete:y});return o instanceof j.w0&&o.add(E),E}};function fp(){return this._results[pc()]()}class kc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=pc(),c=kc.prototype;c[u]||(c[u]=fp)}get changes(){return this._changes||(this._changes=new ei)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=xr(o);(this._changesDetected=!function $a(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],p=o[c];if(u&&(h=u(h),p=u(p)),p!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let rh=(()=>{class s{}return s.__NG_ELEMENT_ID__=Fc,s})();const yl=rh,Gm=class extends yl{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=fc(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(h[19]=y.createEmbeddedView(c)),ll(c,h,o),new ap(h)}};function Fc(){return As(bn(),Se())}function As(s,o){return 4&s.type?new Gm(o,s,it(s,o)):null}let vl=(()=>{class s{}return s.__NG_ELEMENT_ID__=wl,s})();function wl(){return zm(bn(),Se())}const MC=vl,Lc=class extends MC{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return it(this._hostTNode,this._hostLView)}get injector(){return new ws(this._hostTNode,this._hostLView)}get parentInjector(){const o=Gu(this._hostTNode,this._hostLView);if(zh(o)){const u=ju(o,this._hostLView),c=Bu(o);return new ws(u[1].data[c+8],u)}return new ws(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Wm(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,p;"number"==typeof c?h=c:null!=c&&(h=c.index,p=c.injector);const y=o.createEmbeddedView(u||{},p);return this.insert(y,h),y}createComponent(o,u,c,h,p){const y=o&&!function Ws(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const F=u||{};E=F.index,c=F.injector,h=F.projectableNodes,p=F.environmentInjector||F.ngModuleRef}const C=y?o:new Ft($(o)),A=c||this.parentInjector;if(!p&&null==C.ngModule){const Y=(y?A:this.parentInjector).get(Od,null);Y&&(p=Y)}const R=C.create(A,h,void 0,p);return this.insert(R.hostView,E),R}insert(o,u){const c=o._lView,h=c[1];if(function lo(s){return Br(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[3],Y=new Lc(F,F[6],F[3]);Y.detach(Y.indexOf(o))}}const p=this._adjustIndex(u),y=this._lContainer;!function rT(s,o,u,c){const h=10+c,p=u.length;c>0&&(u[h-1][4]=o),c<p-10?(o[4]=u[h],Ql(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function cE(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(h,c,y,p);const E=hy(p,y),C=c[11],A=Rg(C,y[7]);return null!==A&&function nT(s,o,u,c,h,p){c[0]=h,c[6]=o,oc(s,c,u,1,h,p)}(h,y[6],C,c,A,E),o.attachToViewContainerRef(),Ql(du(y),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Wm(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=dE(this._lContainer,u);c&&(wo(du(this._lContainer),u),sa(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=dE(this._lContainer,u);return c&&null!=wo(du(this._lContainer),u)?new ap(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function Wm(s){return s[8]}function du(s){return s[8]||(s[8]=[])}function zm(s,o){let u;const c=o[s.index];if(Br(c))u=c;else{let h;if(8&s.type)h=Nn(c);else{const p=o[11];h=p.createComment("");const y=gr(s,o);el(p,Rg(p,y),h,function uy(s,o){return s.nextSibling(o)}(p,y),!1)}o[s.index]=u=cI(c,o,h,s),Jg(o,u)}return new Lc(u,s,o)}class ih{constructor(o){this.queryList=o,this.matches=null}clone(){return new ih(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vc{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let p=0;p<c;p++){const y=u.getByIndex(p);h.push(this.queries[y.indexInDeclarationView].clone())}return new Vc(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==ti(o,u).matches&&this.queries[u].setDirty()}}class h0{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class f0{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,h);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new f0(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class p0{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new p0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const p=c[h];this.matchTNodeWithReadOption(o,u,NC(u,p)),this.matchTNodeWithReadOption(o,u,vs(u,o,p,!1,!1))}else c===rh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,vs(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Dt||h===vl||h===rh&&4&u.type)this.addMatch(u.index,-2);else{const p=vs(u,o,h,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function NC(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function fi(s,o,u,c){return-1===u?function PC(s,o){return 11&s.type?it(s,o):4&s.type?As(s,o):null}(o,s):-2===u?function OC(s,o,u){return u===Dt?it(o,s):u===rh?As(o,s):u===vl?zm(o,s):void 0}(s,o,c):Ko(s,s[1],u,o)}function kn(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const p=s.data,y=u.matches,E=[];for(let C=0;C<y.length;C+=2){const A=y[C];E.push(A<0?null:fi(o,p[A],y[C+1],u.metadata.read))}h.matches=E}return h.matches}function g0(s,o,u,c){const h=s.queries.getByIndex(u),p=h.matches;if(null!==p){const y=kn(s,o,h,u);for(let E=0;E<p.length;E+=2){const C=p[E];if(C>0)c.push(y[E/2]);else{const A=p[E+1],R=o[-C];for(let F=10;F<R.length;F++){const Y=R[F];Y[17]===Y[3]&&g0(Y[1],Y,A,c)}if(null!==R[9]){const F=R[9];for(let Y=0;Y<F.length;Y++){const re=F[Y];g0(re[1],re,A,c)}}}}}return c}function m0(s){const o=Se(),u=Bt(),c=ud();po(c+1);const h=ti(u,c);if(s.dirty&&$o(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const p=h.crossesNgTemplate?g0(u,o,c,[]):kn(u,o,h,c);s.reset(p,jA),s.notifyOnChanges()}return!0}return!1}function kC(s,o,u,c){const h=Bt();if(h.firstCreatePass){const p=bn();(function _0(s,o,u){null===s.queries&&(s.queries=new f0),s.queries.track(new p0(o,u))})(h,new h0(o,u,c),p.index),function FC(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function gp(s,o,u){const c=new kc(4==(4&u));nI(s,o,c,c.destroy),null===o[19]&&(o[19]=new Vc),o[19].queries.push(new ih(c))}(h,Se(),u)}function sh(){return function qm(s,o){return s[19].queries[o].queryList}(Se(),ud())}function ti(s,o){return s.queries.getByIndex(o)}function uh(s){const o=$(s)||H(s)||Ee(s);return null!==o&&o.standalone}function dh(...s){}const Ar=new ln("Application Initializer");let Yt=(()=>{class s{constructor(u){this.appInits=u,this.resolve=dh,this.reject=dh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const p=this.appInits[h]();if(di(p))u.push(p);else if(lv(p)){const y=new Promise((E,C)=>{p.subscribe({complete:E,error:C})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(An(Ar,8))},s.\u0275prov=qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const D0=new ln("AppId",{providedIn:"root",factory:function b0(){return`${T0()}${T0()}${T0()}`}});function T0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ui=new ln("Platform Initializer"),YC=new ln("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),hh=new ln("appBootstrapListener");let QC=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const t_=new ln("LocaleId",{providedIn:"root",factory:()=>qs(t_,ht.Optional|ht.SkipSelf)||function Ep(){return typeof $localize<"u"&&$localize.locale||Xs}()}),lS=new ln("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Ip{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Cp=(()=>{class s{compileModuleSync(u){return new nn(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Ao(He(u).declarations).reduce((y,E)=>{const C=$(E);return C&&y.push(new Ft(C)),y},[]);return new Ip(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const hS=(()=>Promise.resolve(0))();function x0(s){typeof Zone>"u"?hS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class pi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ei(!1),this.onMicrotaskEmpty=new ei(!1),this.onStable=new ei(!1),this.onError=new ei(!1),typeof Zone>"u")throw new Me(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function fS(){let s=Je.requestAnimationFrame,o=Je.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function R0(s){const o=()=>{!function ni(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Je,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,r_(s),s.isCheckStableRunning=!0,M0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),r_(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,p,y,E)=>{try{return fh(s),u.invokeTask(h,p,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Po(s)}},onInvoke:(u,c,h,p,y,E,C)=>{try{return fh(s),u.invoke(h,p,y,E,C)}finally{s.shouldCoalesceRunChangeDetection&&o(),Po(s)}},onHasTask:(u,c,h,p)=>{u.hasTask(h,p),c===h&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,r_(s),M0(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,h,p)=>(u.handleError(h,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!pi.isInAngularZone())throw new Me(909,!1)}static assertNotInAngularZone(){if(pi.isInAngularZone())throw new Me(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const p=this._inner,y=p.scheduleEventTask("NgZoneEvent: "+h,o,eD,dh,dh);try{return p.runTask(y,u,c)}finally{p.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const eD={};function M0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function r_(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function fh(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Po(s){s._nesting--,M0(s)}class N0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ei,this.onMicrotaskEmpty=new ei,this.onStable=new ei,this.onError=new ei}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const P0=new ln(""),ph=new ln("");let k0,tD=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,k0||(function nD(s){k0=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{pi.assertNotInAngularZone(),x0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())x0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(An(pi),An(O0),An(ph))},s.\u0275prov=qt({token:s,factory:s.\u0275fac}),s})(),O0=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return k0?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Dl=null;const gh=new ln("AllowMultipleToken"),Dp=new ln("PlatformDestroyListeners");class gS{constructor(o,u){this.name=o,this.token=u}}function Gc(s,o,u=[]){const c=`Platform: ${o}`,h=new ln(c);return(p=[])=>{let y=i_();if(!y||y.injector.get(gh,!1)){const E=[...u,...p,{provide:h,useValue:!0}];s?s(E):function sD(s){if(Dl&&!Dl.get(gh,!1))throw new Me(400,!1);Dl=s;const o=s.get(Ii);(function oD(s){const o=s.get(Ui,null);o&&o.forEach(u=>u())})(s)}(function aD(s=[],o){return Mo.create({name:o,providers:[{provide:Og,useValue:"platform"},{provide:Dp,useValue:new Set([()=>Dl=null])},...s]})}(E,c))}return function _S(s){const o=i_();if(!o)throw new Me(401,!1);return o}()}}function i_(){return Dl?.get(Ii)??null}let Ii=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function lD(s,o){let u;return u="noop"===s?new N0:("zone.js"===s?void 0:s)||new pi(o),u}(c?.ngZone,function uD(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:pi,useValue:h}];return h.run(()=>{const y=Mo.create({providers:p,parent:this.injector,name:u.moduleType.name}),E=u.create(y),C=E.injector.get(df,null);if(!C)throw new Me(402,!1);return h.runOutsideAngular(()=>{const A=h.onError.subscribe({next:R=>{C.handleError(R)}});E.onDestroy(()=>{Tp(this._modules,E),A.unsubscribe()})}),function Oo(s,o,u){try{const c=u();return di(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(C,h,()=>{const A=E.injector.get(Yt);return A.runInitializers(),A.donePromise.then(()=>(function Qf(s){Vt(s,"Expected localeId to be defined"),"string"==typeof s&&(qn=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(t_,Xs)||Xs),this._moduleDoBootstrap(E),E))})})}bootstrapModule(u,c=[]){const h=F0({},c);return function rD(s,o,u){const c=new nn(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,h))}_moduleDoBootstrap(u){const c=u.injector.get(Wc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Me(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Me(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Dp,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(An(Mo))},s.\u0275prov=qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function F0(s,o){return Array.isArray(o)?o.reduce(F0,s):{...s,...o}}let Wc=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new N.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),y=new N.y(E=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{pi.assertNotInAngularZone(),x0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{pi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=(0,ae.T)(p,y.pipe((0,le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof Jd;if(!this._injector.get(Yt).done)throw!h&&uh(u),new Me(405,false);let y;y=h?u:this._injector.get(Sc).resolveComponentFactory(u),this.componentTypes.push(y.componentType);const E=function iD(s){return s.isBoundToModule}(y)?void 0:this._injector.get(xc),A=y.create(Mo.NULL,[],c||y.selector,E),R=A.location.nativeElement,F=A.injector.get(P0,null);return F?.registerApplication(R),A.onDestroy(()=>{this.detachView(A.hostView),Tp(this.components,A),F?.unregisterApplication(R)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Me(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Tp(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(hh,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Tp(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Me(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(An(pi),An(Mo),An(df))},s.\u0275prov=qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Tp(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let dD=!0,hD=!1;function vS(){return hD=!0,dD}function wS(){if(hD)throw new Error("Cannot enable prod mode after platform setup.");dD=!1}let ES=(()=>{class s{}return s.__NG_ELEMENT_ID__=IS,s})();function IS(s){return function CS(s,o,u){if(oo(s)&&!u){const c=sr(s.index,o);return new ap(c,c)}return 47&s.type?new ap(o[16],o):null}(bn(),Se(),16==(16&s))}class U0{constructor(){}supports(o){return Pf(o)}create(o){return new j0(o)}}const B0=(s,o)=>o;class j0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||B0}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,p=null;for(;u||c;){const y=!c||u&&u.currentIndex<$0(c,h,p)?u:c,E=$0(y,h,p),C=y.currentIndex;if(y===c)h--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)h++;else{p||(p=[]);const A=E-h,R=C-h;if(A!=R){for(let Y=0;Y<A;Y++){const re=Y<p.length?p[Y]:p[Y]=0,Ae=re+Y;R<=Ae&&Ae<A&&(p[Y]=re+1)}p[y.previousIndex]=R-A}}E!==C&&o(y,E,C)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Pf(o))throw new Me(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,p,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)p=o[E],y=this._trackByFn(E,p),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,p,y,E)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,y,E),c=!0),u=u._next}else h=0,function dA(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[pc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(h,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,h)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,h)):o=this._addAfter(new mD(u,c),p,h),o}_verifyReinsertion(o,u,c,h){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,p=o._nextRemoved;return null===h?this._removalsHead=p:h._nextRemoved=p,null===p?this._removalsTail=h:p._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new yD),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new yD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class mD{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _D{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class yD{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new _D,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $0(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class H0{constructor(){}supports(o){return o instanceof Map||vI(o)}create(){return new u_}}class u_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||vI(o)))throw new Me(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const p=h._prev,y=h._next;return p&&(p._next=y),y&&(y._prev=p),h._next=null,h._prev=null,h}const c=new xp(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class xp{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function bl(){return new G0([new U0])}let G0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||bl()),deps:[[s,new ze,new ue]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Me(901,!1)}}return s.\u0275prov=qt({token:s,providedIn:"root",factory:bl}),s})();function vD(){return new W0([new H0])}let W0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||vD()),deps:[[s,new ze,new ue]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Me(901,!1)}}return s.\u0275prov=qt({token:s,providedIn:"root",factory:vD}),s})();const wD=Gc(null,"core",[]);let SS=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(An(Wc))},s.\u0275mod=_t({type:s}),s.\u0275inj=Zt({}),s})();function xS(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(ft,ke,L)=>{L.d(ke,{Z:()=>Me});var d=L(2090),j=L(4859),N=L(9681),ae=L(1877);class le{constructor(ge,_e){this._delegate=ge,this.firebase=_e,(0,N._addComponent)(ge,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(ge,_e=N._DEFAULT_ENTRY_NAME){var Qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(ge);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Qe=Ze.getComponent())||void 0===Qe?void 0:Qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:_e})}_removeServiceInstance(ge,_e=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(_e)}_addComponent(ge){(0,N._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,N._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function we(){const Ge=function he(Ge){const ge={},_e={__esModule:!0,initializeApp:function Fe(ie,me={}){const Ce=N.initializeApp(ie,me);if((0,d.r3)(ge,Ce.name))return ge[Ce.name];const X=new Ge(Ce,_e);return ge[Ce.name]=X,X},app:Ze,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function De(ie){const me=ie.name,Ce=me.replace("-compat","");if(N._registerComponent(ie)&&"PUBLIC"===ie.type){const X=(se=Ze())=>{if("function"!=typeof se[Ce])throw fe.create("invalid-app-argument",{appName:me});return se[Ce]()};void 0!==ie.serviceProps&&(0,d.ZB)(X,ie.serviceProps),_e[Ce]=X,Ge.prototype[Ce]=function(...se){return this._getService.bind(this,me).apply(this,ie.multipleInstances?se:[])}}return"PUBLIC"===ie.type?_e[Ce]:null},removeApp:function Qe(ie){delete ge[ie]},useAsService:function Ke(ie,me){return"serverAuth"===me?null:me},modularAPIs:N}};function Ze(ie){if(!(0,d.r3)(ge,ie=ie||N._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:ie});return ge[ie]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function xe(){return Object.keys(ge).map(ie=>ge[ie])}}),Ze.App=Ge,_e}(le);return Ge.INTERNAL=Object.assign(Object.assign({},Ge.INTERNAL),{createFirebaseNamespace:we,extendNamespace:function ge(_e){(0,d.ZB)(Ge,_e)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ge}(),W=new ae.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ge=self.firebase.SDK_VERSION;Ge&&Ge.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Me=q;!function Pe(Ge){(0,N.registerVersion)("@firebase/app-compat","0.1.30",Ge)}()},9681:(ft,ke,L)=>{L.r(ke),L.d(ke,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>gi,_DEFAULT_ENTRY_NAME:()=>Vt,_addComponent:()=>fn,_addOrOverwriteComponent:()=>qt,_apps:()=>hn,_clearComponents:()=>Ti,_components:()=>jn,_getProvider:()=>Zt,_registerComponent:()=>Ut,_removeServiceInstance:()=>wn,deleteApp:()=>ht,getApp:()=>$n,getApps:()=>ji,initializeApp:()=>Ai,onLog:()=>Xt,registerVersion:()=>En,setLogLevel:()=>ur});var d=L(5861),j=L(4859),N=L(1877),ae=L(2090),le=L(8766);class ye{constructor(Z){this.container=Z}getPlatformInfoString(){return this.container.getProviders().map(K=>{if(function fe(B){return"VERSION"===B.getComponent()?.type}(K)){const Oe=K.getImmediate();return`${Oe.library}/${Oe.version}`}return null}).filter(K=>K).join(" ")}}const he="@firebase/app",q=new N.Yd("@firebase/app"),Vt="[DEFAULT]",Ye={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},hn=new Map,jn=new Map;function fn(B,Z){try{B.container.addComponent(Z)}catch(K){q.debug(`Component ${Z.name} failed to register with FirebaseApp ${B.name}`,K)}}function qt(B,Z){B.container.addOrOverwriteComponent(Z)}function Ut(B){const Z=B.name;if(jn.has(Z))return q.debug(`There were multiple attempts to register component ${Z}.`),!1;jn.set(Z,B);for(const K of hn.values())fn(K,B);return!0}function Zt(B,Z){const K=B.container.getProvider("heartbeat").getImmediate({optional:!0});return K&&K.triggerHeartbeat(),B.container.getProvider(Z)}function wn(B,Z,K=Vt){Zt(B,Z).clearInstance(K)}function Ti(){jn.clear()}const Rn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class is{constructor(Z,K,Oe){this._isDeleted=!1,this._options=Object.assign({},Z),this._config=Object.assign({},K),this._name=K.name,this._automaticDataCollectionEnabled=K.automaticDataCollectionEnabled,this._container=Oe,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Z){this.checkDestroyed(),this._automaticDataCollectionEnabled=Z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Z){this._isDeleted=Z}checkDestroyed(){if(this.isDeleted)throw Rn.create("app-deleted",{appName:this._name})}}const gi="9.9.1";function Ai(B,Z={}){"object"!=typeof Z&&(Z={name:Z});const K=Object.assign({name:Vt,automaticDataCollectionEnabled:!1},Z),Oe=K.name;if("string"!=typeof Oe||!Oe)throw Rn.create("bad-app-name",{appName:String(Oe)});const qe=hn.get(Oe);if(qe){if((0,ae.vZ)(B,qe.options)&&(0,ae.vZ)(K,qe.config))return qe;throw Rn.create("duplicate-app",{appName:Oe})}const _t=new j.H0(Oe);for(const Kt of jn.values())_t.addComponent(Kt);const en=new is(B,K,_t);return hn.set(Oe,en),en}function $n(B=Vt){const Z=hn.get(B);if(!Z)throw Rn.create("no-app",{appName:B});return Z}function ji(){return Array.from(hn.values())}function ht(B){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,d.Z)(function*(B){const Z=B.name;hn.has(Z)&&(hn.delete(Z),yield Promise.all(B.container.getProviders().map(K=>K.delete())),B.isDeleted=!0)})).apply(this,arguments)}function En(B,Z,K){var Oe;let qe=null!==(Oe=Ye[B])&&void 0!==Oe?Oe:B;K&&(qe+=`-${K}`);const _t=qe.match(/\s|\//),en=Z.match(/\s|\//);if(_t||en){const Kt=[`Unable to register library "${qe}" with version "${Z}":`];return _t&&Kt.push(`library name "${qe}" contains illegal characters (whitespace or "/")`),_t&&en&&Kt.push("and"),en&&Kt.push(`version name "${Z}" contains illegal characters (whitespace or "/")`),void q.warn(Kt.join(" "))}Ut(new j.wA(`${qe}-version`,()=>({library:qe,version:Z}),"VERSION"))}function Xt(B,Z){if(null!==B&&"function"!=typeof B)throw Rn.create("invalid-log-argument");(0,N.Am)(B,Z)}function ur(B){(0,N.Ub)(B)}const In="firebase-heartbeat-store";let cr=null;function ss(){return cr||(cr=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(B,Z)=>{0===Z&&B.createObjectStore(In)}}).catch(B=>{throw Rn.create("storage-open",{originalErrorMessage:B.message})})),cr}function Je(){return(Je=(0,d.Z)(function*(B){var Z;try{return(yield ss()).transaction(In).objectStore(In).get(dr(B))}catch(K){throw Rn.create("storage-get",{originalErrorMessage:null===(Z=K)||void 0===Z?void 0:Z.message})}})).apply(this,arguments)}function ut(B,Z){return Si.apply(this,arguments)}function Si(){return(Si=(0,d.Z)(function*(B,Z){var K;try{const qe=(yield ss()).transaction(In,"readwrite");return yield qe.objectStore(In).put(Z,dr(B)),qe.done}catch(Oe){throw Rn.create("storage-set",{originalErrorMessage:null===(K=Oe)||void 0===K?void 0:K.message})}})).apply(this,arguments)}function dr(B){return`${B.name}!${B.options.appId}`}class Cn{constructor(Z){this.container=Z,this._heartbeatsCache=null;const K=this.container.getProvider("app").getImmediate();this._storage=new tr(K),this._heartbeatsCachePromise=this._storage.read().then(Oe=>(this._heartbeatsCache=Oe,Oe))}triggerHeartbeat(){var Z=this;return(0,d.Z)(function*(){const Oe=Z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qe=Dn();if(null===Z._heartbeatsCache&&(Z._heartbeatsCache=yield Z._heartbeatsCachePromise),Z._heartbeatsCache.lastSentHeartbeatDate!==qe&&!Z._heartbeatsCache.heartbeats.some(_t=>_t.date===qe))return Z._heartbeatsCache.heartbeats.push({date:qe,agent:Oe}),Z._heartbeatsCache.heartbeats=Z._heartbeatsCache.heartbeats.filter(_t=>{const en=new Date(_t.date).valueOf();return Date.now()-en<=2592e6}),Z._storage.overwrite(Z._heartbeatsCache)})()}getHeartbeatsHeader(){var Z=this;return(0,d.Z)(function*(){if(null===Z._heartbeatsCache&&(yield Z._heartbeatsCachePromise),null===Z._heartbeatsCache||0===Z._heartbeatsCache.heartbeats.length)return"";const K=Dn(),{heartbeatsToSend:Oe,unsentEntries:qe}=function an(B,Z=1024){const K=[];let Oe=B.slice();for(const qe of B){const _t=K.find(en=>en.agent===qe.agent);if(_t){if(_t.dates.push(qe.date),G(K)>Z){_t.dates.pop();break}}else if(K.push({agent:qe.agent,dates:[qe.date]}),G(K)>Z){K.pop();break}Oe=Oe.slice(1)}return{heartbeatsToSend:K,unsentEntries:Oe}}(Z._heartbeatsCache.heartbeats),_t=(0,ae.L)(JSON.stringify({version:2,heartbeats:Oe}));return Z._heartbeatsCache.lastSentHeartbeatDate=K,qe.length>0?(Z._heartbeatsCache.heartbeats=qe,yield Z._storage.overwrite(Z._heartbeatsCache)):(Z._heartbeatsCache.heartbeats=[],Z._storage.overwrite(Z._heartbeatsCache)),_t})()}}function Dn(){return(new Date).toISOString().substring(0,10)}class tr{constructor(Z){this.app=Z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Z=this;return(0,d.Z)(function*(){return(yield Z._canUseIndexedDBPromise)&&(yield function jt(B){return Je.apply(this,arguments)}(Z.app))||{heartbeats:[]}})()}overwrite(Z){var K=this;return(0,d.Z)(function*(){var Oe;if(yield K._canUseIndexedDBPromise){const _t=yield K.read();return ut(K.app,{lastSentHeartbeatDate:null!==(Oe=Z.lastSentHeartbeatDate)&&void 0!==Oe?Oe:_t.lastSentHeartbeatDate,heartbeats:Z.heartbeats})}})()}add(Z){var K=this;return(0,d.Z)(function*(){var Oe;if(yield K._canUseIndexedDBPromise){const _t=yield K.read();return ut(K.app,{lastSentHeartbeatDate:null!==(Oe=Z.lastSentHeartbeatDate)&&void 0!==Oe?Oe:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...Z.heartbeats]})}})()}}function G(B){return(0,ae.L)(JSON.stringify({version:2,heartbeats:B})).length}!function z(B){Ut(new j.wA("platform-logger",Z=>new ye(Z),"PRIVATE")),Ut(new j.wA("heartbeat",Z=>new Cn(Z),"PRIVATE")),En(he,"0.7.29",B),En(he,"0.7.29","esm2017"),En("fire-js","")}("")},4859:(ft,ke,L)=>{L.d(ke,{H0:()=>he,wA:()=>N,zt:()=>le});var d=L(5861),j=L(2090);class N{constructor(q,W,te){this.name=q,this.instanceFactory=W,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const ae="[DEFAULT]";class le{constructor(q,W){this.name=q,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const W=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(W)){const te=new j.BH;if(this.instancesDeferred.set(W,te),this.isInitialized(W)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:W});We&&te.resolve(We)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(q){var W;const te=this.normalizeInstanceIdentifier(q?.identifier),We=null!==(W=q?.optional)&&void 0!==W&&W;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Pe){if(We)return null;throw Pe}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function fe(we){return"EAGER"===we.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[W,te]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(W);try{const Pe=this.getOrInitializeService({instanceIdentifier:We});te.resolve(Pe)}catch{}}}}clearInstance(q=ae){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,d.Z)(function*(){const W=Array.from(q.instances.values());yield Promise.all([...W.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...W.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=ae){return this.instances.has(q)}getOptions(q=ae){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:W={}}=q,te=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:te,options:W});for(const[Pe,Me]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Pe)&&Me.resolve(We);return We}onInit(q,W){var te;const We=this.normalizeInstanceIdentifier(W),Pe=null!==(te=this.onInitCallbacks.get(We))&&void 0!==te?te:new Set;Pe.add(q),this.onInitCallbacks.set(We,Pe);const Me=this.instances.get(We);return Me&&q(Me,We),()=>{Pe.delete(q)}}invokeOnInitCallbacks(q,W){const te=this.onInitCallbacks.get(W);if(te)for(const We of te)try{We(q,W)}catch{}}getOrInitializeService({instanceIdentifier:q,options:W={}}){let te=this.instances.get(q);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(we=q,we===ae?void 0:we),options:W}),this.instances.set(q,te),this.instancesOptions.set(q,W),this.invokeOnInitCallbacks(te,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,te)}catch{}var we;return te||null}normalizeInstanceIdentifier(q=ae){return this.component?this.component.multipleInstances?q:ae:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const W=this.getProvider(q.name);if(W.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);W.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const W=new le(q,this);return this.providers.set(q,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(ft,ke,L)=>{L.d(ke,{Am:()=>we,Ub:()=>he,Yd:()=>fe,in:()=>j});const d=[];var j=(()=>{return(q=j||(j={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",j;var q})();const N={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},ae=j.INFO,le={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(q,W,...te)=>{if(W<q.logLevel)return;const We=(new Date).toISOString(),Pe=le[W];if(!Pe)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Pe](`[${We}]  ${q.name}:`,...te)};class fe{constructor(W){this.name=W,this._logLevel=ae,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in j))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?N[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...W),this._logHandler(this,j.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...W),this._logHandler(this,j.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,j.INFO,...W),this._logHandler(this,j.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,j.WARN,...W),this._logHandler(this,j.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...W),this._logHandler(this,j.ERROR,...W)}}function he(q){d.forEach(W=>{W.setLogLevel(q)})}function we(q,W){for(const te of d){let We=null;W&&W.level&&(We=N[W.level]),te.userLogHandler=null===q?null:(Pe,Me,...Ge)=>{const ge=Ge.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Me>=(We??Pe.logLevel)&&q({level:j[Me].toLowerCase(),message:ge,args:Ge,type:Pe.name})}}}},8766:(ft,ke,L)=>{L.d(ke,{Lj:()=>Fe,X3:()=>Ze});var d=L(5861);let N,ae;const fe=new WeakMap,he=new WeakMap,we=new WeakMap,q=new WeakMap,W=new WeakMap;let Pe={get(me,Ce,X){if(me instanceof IDBTransaction){if("done"===Ce)return he.get(me);if("objectStoreNames"===Ce)return me.objectStoreNames||we.get(me);if("store"===Ce)return X.objectStoreNames[1]?void 0:X.objectStore(X.objectStoreNames[0])}return _e(me[Ce])},set:(me,Ce,X)=>(me[Ce]=X,!0),has:(me,Ce)=>me instanceof IDBTransaction&&("done"===Ce||"store"===Ce)||Ce in me};function ge(me){return"function"==typeof me?function Ge(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...Ce){return me.apply(Qe(this),Ce),_e(fe.get(this))}:function(...Ce){return _e(me.apply(Qe(this),Ce))}:function(Ce,...X){const se=me.call(Qe(this),Ce,...X);return we.set(se,Ce.sort?Ce.sort():[Ce]),_e(se)}}(me):(me instanceof IDBTransaction&&function We(me){if(he.has(me))return;const Ce=new Promise((X,se)=>{const oe=()=>{me.removeEventListener("complete",ve),me.removeEventListener("error",ce),me.removeEventListener("abort",ce)},ve=()=>{X(),oe()},ce=()=>{se(me.error||new DOMException("AbortError","AbortError")),oe()};me.addEventListener("complete",ve),me.addEventListener("error",ce),me.addEventListener("abort",ce)});he.set(me,Ce)}(me),((me,Ce)=>Ce.some(X=>me instanceof X))(me,function le(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,Pe):me)}function _e(me){if(me instanceof IDBRequest)return function te(me){const Ce=new Promise((X,se)=>{const oe=()=>{me.removeEventListener("success",ve),me.removeEventListener("error",ce)},ve=()=>{X(_e(me.result)),oe()},ce=()=>{se(me.error),oe()};me.addEventListener("success",ve),me.addEventListener("error",ce)});return Ce.then(X=>{X instanceof IDBCursor&&fe.set(X,me)}).catch(()=>{}),W.set(Ce,me),Ce}(me);if(q.has(me))return q.get(me);const Ce=ge(me);return Ce!==me&&(q.set(me,Ce),W.set(Ce,me)),Ce}const Qe=me=>W.get(me);function Ze(me,Ce,{blocked:X,upgrade:se,blocking:oe,terminated:ve}={}){const ce=indexedDB.open(me,Ce),Ue=_e(ce);return se&&ce.addEventListener("upgradeneeded",pt=>{se(_e(ce.result),pt.oldVersion,pt.newVersion,_e(ce.transaction))}),X&&ce.addEventListener("blocked",()=>X()),Ue.then(pt=>{ve&&pt.addEventListener("close",()=>ve()),oe&&pt.addEventListener("versionchange",()=>oe())}).catch(()=>{}),Ue}function Fe(me,{blocked:Ce}={}){const X=indexedDB.deleteDatabase(me);return Ce&&X.addEventListener("blocked",()=>Ce()),_e(X).then(()=>{})}const xe=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Ke=new Map;function ie(me,Ce){if(!(me instanceof IDBDatabase)||Ce in me||"string"!=typeof Ce)return;if(Ke.get(Ce))return Ke.get(Ce);const X=Ce.replace(/FromIndex$/,""),se=Ce!==X,oe=De.includes(X);if(!(X in(se?IDBIndex:IDBObjectStore).prototype)||!oe&&!xe.includes(X))return;const ve=function(){var ce=(0,d.Z)(function*(Ue,...pt){const Wt=this.transaction(Ue,oe?"readwrite":"readonly");let Vt=Wt.store;return se&&(Vt=Vt.index(pt.shift())),(yield Promise.all([Vt[X](...pt),oe&&Wt.done]))[0]});return function(pt){return ce.apply(this,arguments)}}();return Ke.set(Ce,ve),ve}!function Me(me){Pe=me(Pe)}(me=>({...me,get:(Ce,X,se)=>ie(Ce,X)||me.get(Ce,X,se),has:(Ce,X)=>!!ie(Ce,X)||me.has(Ce,X)}))},5861:(ft,ke,L)=>{function d(N,ae,le,ye,fe,he,we){try{var q=N[he](we),W=q.value}catch(te){return void le(te)}q.done?ae(W):Promise.resolve(W).then(ye,fe)}function j(N){return function(){var ae=this,le=arguments;return new Promise(function(ye,fe){var he=N.apply(ae,le);function we(W){d(he,ye,fe,we,q,"next",W)}function q(W){d(he,ye,fe,we,q,"throw",W)}we(void 0)})}}L.d(ke,{Z:()=>j})}},ft=>{ft(ft.s=3556)}]);